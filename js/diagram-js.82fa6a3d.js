(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["diagram-js"],{"0363":function(e,t,n){"use strict";n.d(t,"a",(function(){return Text}));var o=n("87f2"),i=n("6b8b"),r=0,a={width:150,height:50};function parseAlign(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function parsePadding(e){return Object(o["isObject"])(e)?Object(o["assign"])({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function getTextBBox(e,t){var n;t.textContent=e;try{var o,i=""===e;return t.textContent=i?"dummy":e,n=t.getBBox(),o={width:n.width+2*n.x,height:n.height},i&&(o.width=0),o}catch(r){return{width:0,height:0}}}function layoutNext(e,t,n){for(var o,i=e.shift(),r=i;;){if(o=getTextBBox(r,n),o.width=r?o.width:0," "===r||""===r||o.width<Math.round(t)||r.length<2)return fit(e,r,i,o);r=shortenLine(r,o.width,t)}}function fit(e,t,n,o){if(t.length<n.length){var i=n.slice(t.length).trim();e.unshift(i)}return{width:o.width,height:o.height,text:t}}function semanticShorten(e,t){var n,o=e.split(/(\s|-)/g),i=[],r=0;if(o.length>1)while(n=o.shift()){if(!(n.length+r<t)){"-"===n&&i.pop();break}i.push(n),r+=n.length}return i.join("")}function shortenLine(e,t,n){var o=Math.max(e.length*(n/t),1),i=semanticShorten(e,o);return i||(i=e.slice(0,Math.max(Math.round(o-1),1))),i}function getHelperSvg(){var e=document.getElementById("helper-svg");return e||(e=Object(i["f"])("svg"),Object(i["b"])(e,{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(e)),e}function Text(e){this._config=Object(o["assign"])({},{size:a,padding:r,style:{},align:"center-top"},e||{})}function getLineHeight(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}Text.prototype.createText=function(e,t){return this.layoutText(e,t).element},Text.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions},Text.prototype.layoutText=function(e,t){var n=Object(o["assign"])({},this._config.size,t.box),r=Object(o["assign"])({},this._config.style,t.style),a=parseAlign(t.align||this._config.align),c=parsePadding(void 0!==t.padding?t.padding:this._config.padding),s=t.fitBox||!1,u=getLineHeight(r),d=e.split(/\r?\n/g),l=[],p=n.width-c.left-c.right,h=Object(i["f"])("text");Object(i["b"])(h,{x:0,y:0}),Object(i["b"])(h,r);var f=getHelperSvg();Object(i["a"])(f,h);while(d.length)l.push(layoutNext(d,p,h));"middle"===a.vertical&&(c.top=c.bottom=0);var v=Object(o["reduce"])(l,(function(e,t,n){return e+(u||t.height)}),0)+c.top+c.bottom,g=Object(o["reduce"])(l,(function(e,t,n){return t.width>e?t.width:e}),0),y=c.top;"middle"===a.vertical&&(y+=(n.height-v)/2),y-=(u||l[0].height)/4;var m=Object(i["f"])("text");Object(i["b"])(m,r),Object(o["forEach"])(l,(function(e){var t;switch(y+=u||e.height,a.horizontal){case"left":t=c.left;break;case"right":t=(s?g:p)-c.right-e.width;break;default:t=Math.max(((s?g:p)-e.width)/2+c.left,0)}var n=Object(i["f"])("tspan");Object(i["b"])(n,{x:t,y:y}),n.textContent=e.text,Object(i["a"])(m,n)})),Object(i["j"])(h);var b={width:g,height:v};return{dimensions:b,element:m}}},"041f":function(e,t,n){"use strict";var o=n("dda7"),i=n("7d74"),r=n("acb6"),a=n("e506"),c=n("1025"),s=15;function MoveCanvas(e,t){var n;function handleMove(a){var u=n.start,d=Object(c["c"])(a),l=Object(r["b"])(d,u);if(!n.dragging&&MoveCanvas_length(l)>s&&(n.dragging=!0,Object(i["a"])(e),Object(o["a"])("grab")),n.dragging){var p=n.last||n.start;l=Object(r["b"])(d,p),t.scroll({dx:l.x,dy:l.y}),n.last=d}a.preventDefault()}function handleEnd(e){a["event"].unbind(document,"mousemove",handleMove),a["event"].unbind(document,"mouseup",handleEnd),n=null,Object(o["b"])()}function handleStart(e){if(!Object(a["closest"])(e.target,".djs-draggable")&&!(e.button||e.ctrlKey||e.shiftKey||e.altKey))return n={start:Object(c["c"])(e)},a["event"].bind(document,"mousemove",handleMove),a["event"].bind(document,"mouseup",handleEnd),!0}e.on("element.mousedown",500,(function(e){return handleStart(e.originalEvent)}))}function MoveCanvas_length(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}MoveCanvas.$inject=["eventBus","canvas"];t["a"]={__init__:["moveCanvas"],moveCanvas:["type",MoveCanvas]}},"0ae4":function(e,t,n){"use strict";var o=n("1cff"),i=n("c5b3"),r=n("87f2"),a=n("e506"),c=n("1025"),s=n("6de3"),u=n("6b8b"),d=n("e116"),l=n("997c"),p="djs-bendpoint",h="djs-segment-dragger";function toCanvasCoordinates(e,t){var n,o=Object(c["c"])(t),i=e._container.getBoundingClientRect();n={x:i.left,y:i.top};var r=e.viewbox();return{x:r.x+(o.x-n.x)/r.scale,y:r.y+(o.y-n.y)/r.scale}}function getConnectionIntersection(e,t,n){var o=toCanvasCoordinates(e,n),i=Object(l["a"])(t,o);return i}function addBendpoint(e,t){var n=Object(u["f"])("g");Object(u["c"])(n).add(p),Object(u["a"])(e,n);var o=Object(u["f"])("circle");Object(u["b"])(o,{cx:0,cy:0,r:4}),Object(u["c"])(o).add("djs-visual"),Object(u["a"])(n,o);var i=Object(u["f"])("circle");return Object(u["b"])(i,{cx:0,cy:0,r:10}),Object(u["c"])(i).add("djs-hit"),Object(u["a"])(n,i),t&&Object(u["c"])(n).add(t),n}function createParallelDragger(e,t,n,o){var i=Object(u["f"])("g");Object(u["a"])(e,i);var r=14,a=3,c=11,s=calculateHitWidth(t,n,o),l=a+c,p=Object(u["f"])("rect");Object(u["b"])(p,{x:-r/2,y:-a/2,width:r,height:a}),Object(u["c"])(p).add("djs-visual"),Object(u["a"])(i,p);var h=Object(u["f"])("rect");return Object(u["b"])(h,{x:-s/2,y:-l/2,width:s,height:l}),Object(u["c"])(h).add("djs-hit"),Object(u["a"])(i,h),Object(d["a"])(i,"v"===o?90:0,0,0),i}function addSegmentDragger(e,t,n){var o=Object(u["f"])("g"),i=Object(s["a"])(t,n),r=Object(s["d"])(t,n);return Object(u["a"])(e,o),createParallelDragger(o,t,n,r),Object(u["c"])(o).add(h),Object(u["c"])(o).add("h"===r?"horizontal":"vertical"),Object(d["c"])(o,i.x,i.y),o}function calculateSegmentMoveRegion(e){return Math.abs(Math.round(2*e/3))}function calculateHitWidth(e,t,n){var o=t.x-e.x,i=t.y-e.y;return calculateSegmentMoveRegion("h"===n?o:i)}var f=n("e7a5"),v=n.n(f);function Bendpoints(e,t,n,o,i){function isIntersectionMiddle(e,t,n){var o,i,r,a,c,u,d=e.index,l=e.point;return!(d<=0||e.bendpoint)&&(o=t[d-1],i=t[d],r=Object(s["a"])(o,i),a=Object(s["d"])(o,i),c=Math.abs(l.x-r.x),u=Math.abs(l.y-r.y),a&&c<=n&&u<=n)}function calculateIntersectionThreshold(e,t){var n,o,i,r,a=e.waypoints;return t.index<=0||t.bendpoint?null:(n={start:a[t.index-1],end:a[t.index]},o=Object(s["d"])(n.start,n.end),o?(i="h"===o?n.end.x-n.start.x:n.end.y-n.start.y,r=calculateSegmentMoveRegion(i)/2,r):null)}function activateBendpointMove(e,n){var r,a=n.waypoints,c=getConnectionIntersection(t,a,e);if(c)return r=calculateIntersectionThreshold(n,c),isIntersectionMiddle(c,a,r)?i.start(e,n,c.index):o.start(e,n,c.index,!c.bendpoint),!0}function bindInteractionEvents(e,t,o){a["event"].bind(e,t,(function(e){n.triggerMouseEvent(t,e,o),e.stopPropagation()}))}function getBendpointsContainer(e,n){var o=t.getLayer("overlays"),i=Object(a["query"])('.djs-bendpoints[data-element-id="'+v()(e.id)+'"]',o);return!i&&n&&(i=Object(u["f"])("g"),Object(u["b"])(i,{"data-element-id":e.id}),Object(u["c"])(i).add("djs-bendpoints"),Object(u["a"])(o,i),bindInteractionEvents(i,"mousedown",e),bindInteractionEvents(i,"click",e),bindInteractionEvents(i,"dblclick",e)),i}function getSegmentDragger(e,t){return Object(a["query"])('.djs-segment-dragger[data-segment-idx="'+e+'"]',t)}function createBendpoints(e,t){t.waypoints.forEach((function(t,n){var o=addBendpoint(e);Object(u["a"])(e,o),Object(d["c"])(o,t.x,t.y)})),addBendpoint(e,"floating")}function createSegmentDraggers(e,t){for(var n,o,i,r=t.waypoints,a=1;a<r.length;a++)n=r[a-1],o=r[a],Object(s["d"])(n,o)&&(i=addSegmentDragger(e,n,o),Object(u["b"])(i,{"data-segment-idx":a}),bindInteractionEvents(i,"mousemove",t))}function clearBendpoints(e){Object(r["forEach"])(Object(a["queryAll"])("."+p,e),(function(e){Object(u["j"])(e)}))}function clearSegmentDraggers(e){Object(r["forEach"])(Object(a["queryAll"])("."+h,e),(function(e){Object(u["j"])(e)}))}function addHandles(e){var t=getBendpointsContainer(e);return t||(t=getBendpointsContainer(e,!0),createBendpoints(t,e),createSegmentDraggers(t,e)),t}function updateHandles(e){var t=getBendpointsContainer(e);t&&(clearSegmentDraggers(t),clearBendpoints(t),createSegmentDraggers(t,e),createBendpoints(t,e))}function updateFloatingBendpointPosition(e,t){var n=Object(a["query"])(".floating",e),o=t.point;n&&Object(d["c"])(n,o.x,o.y)}function updateSegmentDraggerPosition(e,t,n){var o,i,r=getSegmentDragger(t.index,e),a=n[t.index-1],c=n[t.index],u=t.point,l=Object(s["a"])(a,c),p=Object(s["d"])(a,c);r&&(o=getDraggerVisual(r),i={x:u.x-l.x,y:u.y-l.y},"v"===p&&(i={x:i.y,y:i.x}),Object(d["c"])(o,i.x,i.y))}e.on("connection.changed",(function(e){updateHandles(e.element)})),e.on("connection.remove",(function(e){var t=getBendpointsContainer(e.element);t&&Object(u["j"])(t)})),e.on("element.marker.update",(function(e){var t,n=e.element;n.waypoints&&(t=addHandles(n),e.add?Object(u["c"])(t).add(e.marker):Object(u["c"])(t).remove(e.marker))})),e.on("element.mousemove",(function(e){var n,o,i=e.element,r=i.waypoints;if(r){if(n=getBendpointsContainer(i,!0),o=getConnectionIntersection(t,r,e.originalEvent),!o)return;updateFloatingBendpointPosition(n,o),o.bendpoint||updateSegmentDraggerPosition(n,o,r)}})),e.on("element.mousedown",(function(e){var t=e.originalEvent,n=e.element;if(n.waypoints)return activateBendpointMove(t,n)})),e.on("selection.changed",(function(e){var t=e.newSelection,n=t[0];n&&n.waypoints&&addHandles(n)})),e.on("element.hover",(function(e){var t=e.element;t.waypoints&&(addHandles(t),n.registerEvent(e.gfx,"mousemove","element.mousemove"))})),e.on("element.out",(function(e){n.unregisterEvent(e.gfx,"mousemove","element.mousemove")})),e.on("element.updateId",(function(e){var t=e.element,n=e.newId;if(t.waypoints){var o=getBendpointsContainer(t);o&&Object(u["b"])(o,{"data-element-id":n})}})),this.addHandles=addHandles,this.updateHandles=updateHandles,this.getBendpointsContainer=getBendpointsContainer,this.getSegmentDragger=getSegmentDragger}function getDraggerVisual(e){return Object(a["query"])(".djs-visual",e)}Bendpoints.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];var g=n("2e42"),y=Math.round,m="reconnectStart",b="reconnectEnd",x="updateWaypoints";function BendpointMove(e,t,n,o,i,r){this._injector=e,this.start=function(e,t,r,a){var c,s=n.getGraphics(t),u=t.source,d=t.target,l=t.waypoints;c=a||0!==r?a||r!==l.length-1?x:b:m;var p=c===x?"connection.updateWaypoints":"connection.reconnect",h=i.allowed(p,{connection:t,source:u,target:d});!1===h&&(h=i.allowed(p,{connection:t,source:d,target:u})),!1!==h&&o.init(e,"bendpoint.move",{data:{connection:t,connectionGfx:s,context:{allowed:h,bendpointIndex:r,connection:t,source:u,target:d,insert:a,type:c}}})},t.on("bendpoint.move.hover",(function(e){var t,n=e.context,o=n.connection,r=o.source,a=o.target,c=e.hover,s=n.type;if(n.hover=c,c){var u=s===x?"connection.updateWaypoints":"connection.reconnect";if(t=n.allowed=i.allowed(u,{connection:o,source:s===m?c:r,target:s===b?c:a}),t)return n.source=s===m?c:r,void(n.target=s===b?c:a);!1===t&&(t=n.allowed=i.allowed(u,{connection:o,source:s===b?c:a,target:s===m?c:r})),t&&(n.source=s===b?c:a,n.target=s===m?c:r)}})),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],(function(e){var t=e.context;t.hover=null,t.source=null,t.target=null,t.allowed=!1})),t.on("bendpoint.move.end",(function(e){var t=e.context,n=t.allowed,o=t.bendpointIndex,i=t.connection,a=t.insert,c=i.waypoints.slice(),s=t.source,u=t.target,d=t.type,l=t.hints||{},p={x:y(e.x),y:y(e.y)};if(!n)return!1;d===x?(a?c.splice(o,0,p):c[o]=p,l.bendpointMove={insert:a,bendpointIndex:o},c=this.cropWaypoints(i,c),r.updateWaypoints(i,Object(g["c"])(c),l)):(d===m?(l.docking="source",isReverse(t)&&(l.docking="target",l.newWaypoints=c.reverse())):d===b&&(l.docking="target",isReverse(t)&&(l.docking="source",l.newWaypoints=c.reverse())),r.reconnect(i,s,u,p,l))}),this)}function isReverse(e){var t=e.hover,n=e.source,o=e.target,i=e.type;return i===m?t&&o&&t===o&&n!==o:i===b?t&&n&&t===n&&n!==o:void 0}BendpointMove.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],BendpointMove.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var o=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=o,t};var _="reconnectStart",j="reconnectEnd",O="updateWaypoints",w="connect-ok",S="connect-not-ok",E="connect-hover",C="djs-updating",M="djs-element-hidden",P=1100;function BendpointMovePreview(e,t,n,o){this._injector=t;var i=t.get("connectionPreview",!1);n.on("bendpoint.move.start",(function(e){var t=e.context,n=t.bendpointIndex,i=t.connection,r=t.insert,a=i.waypoints,c=a.slice();t.waypoints=a,r&&c.splice(n,0,{x:e.x,y:e.y}),i.waypoints=c;var s=t.draggerGfx=addBendpoint(o.getLayer("overlays"));Object(u["c"])(s).add("djs-dragging"),o.addMarker(i,M),o.addMarker(i,C)})),n.on("bendpoint.move.hover",(function(e){var t=e.context,n=t.allowed,i=t.hover,r=t.type;if(i){if(o.addMarker(i,E),r===O)return;n?(o.removeMarker(i,S),o.addMarker(i,w)):!1===n&&(o.removeMarker(i,w),o.addMarker(i,S))}})),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],P,(function(e){var t=e.context,n=t.hover,i=t.target;n&&(o.removeMarker(n,E),o.removeMarker(n,i?w:S))})),n.on("bendpoint.move.move",(function(t){var n=t.context,o=n.allowed,r=n.bendpointIndex,a=n.draggerGfx,c=n.hover,s=n.type,u=n.connection,l=u.source,p=u.target,h=u.waypoints.slice(),f={x:t.x,y:t.y},v=n.hints||{},g={};i&&(v.connectionStart&&(g.connectionStart=v.connectionStart),v.connectionEnd&&(g.connectionEnd=v.connectionEnd),s===_?isReverse(n)?(g.connectionEnd=g.connectionEnd||f,g.source=p,g.target=c||l,h=h.reverse()):(g.connectionStart=g.connectionStart||f,g.source=c||l,g.target=p):s===j?isReverse(n)?(g.connectionStart=g.connectionStart||f,g.source=c||p,g.target=l,h=h.reverse()):(g.connectionEnd=g.connectionEnd||f,g.source=l,g.target=c||p):(g.noCropping=!0,g.noLayout=!0,h[r]=f),s===O&&(h=e.cropWaypoints(u,h)),g.waypoints=h,i.drawPreview(n,o,g)),Object(d["c"])(a,t.x,t.y)}),this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],P,(function(e){var t=e.context,n=t.connection,r=t.draggerGfx,a=t.hover,c=t.target,s=t.waypoints;n.waypoints=s,Object(u["j"])(r),o.removeMarker(n,C),o.removeMarker(n,M),a&&(o.removeMarker(a,w),o.removeMarker(a,c?w:S)),i&&i.cleanUp(t)}))}BendpointMovePreview.$inject=["bendpointMove","injector","eventBus","canvas"];var k="connect-hover",R="djs-updating";function axisAdd(e,t,n){return axisSet(e,t,e[t]+n)}function axisSet(e,t,n){return{x:"x"===t?n:e.x,y:"y"===t?n:e.y}}function axisFenced(e,t,n,o){var i=Math.max(t[o],n[o]),r=Math.min(t[o],n[o]),a=20,c=Math.min(Math.max(r+a,e[o]),i-a);return axisSet(t,o,c)}function flipAxis(e){return"x"===e?"y":"x"}function getDocking(e,t,n){var o,i;return e.original?e.original:(o=Object(g["e"])(t),i=flipAxis(n),axisSet(e,i,o[i]))}function ConnectionSegmentMove(e,t,n,o,i,r){var a=e.get("connectionDocking",!1);function cropConnection(e,t){if(!a)return t;var n,o=e.waypoints;return e.waypoints=t,n=a.getCroppedWaypoints(e),e.waypoints=o,n}function redrawConnection(e){i.update("connection",e.connection,e.connectionGfx)}function updateDragger(e,t,n){var o=e.newWaypoints,i=e.segmentStartIndex+t,r=o[i],a=e.segmentEndIndex+t,c=o[a],s=flipAxis(e.axis),u=axisFenced(n,r,c,s);Object(d["c"])(e.draggerGfx,u.x,u.y)}function filterRedundantWaypoints(e,t){var n=0,o=e.filter((function(o,i){return!Object(s["e"])(e[i-1],e[i+1],o)||(n=i<=t?n-1:n,!1)}));return{waypoints:o,segmentOffset:n}}this.start=function(e,t,i){var r,a,c,u,d=n.getGraphics(t),l=i-1,p=i,h=t.waypoints,f=h[l],v=h[p],g=getConnectionIntersection(n,h,e);a=Object(s["d"])(f,v),a&&(c="v"===a?"x":"y",0===l&&(f=getDocking(f,t.source,c)),p===h.length-1&&(v=getDocking(v,t.target,c)),u=g?g.point:{x:(f.x+v.x)/2,y:(f.y+v.y)/2},r={connection:t,segmentStartIndex:l,segmentEndIndex:p,segmentStart:f,segmentEnd:v,axis:c,dragPosition:u},o.init(e,u,"connectionSegment.move",{cursor:"x"===c?"resize-ew":"resize-ns",data:{connection:t,connectionGfx:d,context:r}}))},t.on("connectionSegment.move.start",(function(e){var t=e.context,o=e.connection,i=n.getLayer("overlays");t.originalWaypoints=o.waypoints.slice(),t.draggerGfx=addSegmentDragger(i,t.segmentStart,t.segmentEnd),Object(u["c"])(t.draggerGfx).add("djs-dragging"),n.addMarker(o,R)})),t.on("connectionSegment.move.move",(function(e){var t,n,o=e.context,i=o.connection,r=o.segmentStartIndex,a=o.segmentEndIndex,c=o.segmentStart,s=o.segmentEnd,u=o.axis,d=o.originalWaypoints.slice(),l=axisAdd(c,u,e["d"+u]),p=axisAdd(s,u,e["d"+u]),h=d.length,f=0;d[r]=l,d[a]=p,r<2&&(t=Object(g["f"])(i.source,l),1===r?"intersect"===t&&(d.shift(),d[0]=l,f--):"intersect"!==t&&(d.unshift(c),f++)),a>h-3&&(n=Object(g["f"])(i.target,p),a===h-2?"intersect"===n&&(d.pop(),d[d.length-1]=p):"intersect"!==n&&d.push(s)),o.newWaypoints=i.waypoints=cropConnection(i,d),updateDragger(o,f,e),o.newSegmentStartIndex=r+f,redrawConnection(e)})),t.on("connectionSegment.move.hover",(function(e){e.context.hover=e.hover,n.addMarker(e.hover,k)})),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],(function(e){var t=e.context.hover;t&&n.removeMarker(t,k)})),t.on("connectionSegment.move.cleanup",(function(e){var t=e.context,o=t.connection;t.draggerGfx&&Object(u["j"])(t.draggerGfx),n.removeMarker(o,R)})),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],(function(e){var t=e.context,n=t.connection;n.waypoints=t.originalWaypoints,redrawConnection(e)})),t.on("connectionSegment.move.end",(function(e){var t=e.context,n=t.connection,o=t.newWaypoints,i=t.newSegmentStartIndex;o=o.map((function(e){return{original:e.original,x:Math.round(e.x),y:Math.round(e.y)}}));var a=filterRedundantWaypoints(o,i),c=a.waypoints,s=cropConnection(n,c),u=a.segmentOffset,d={segmentMove:{segmentStartIndex:t.segmentStartIndex,newSegmentStartIndex:i+u}};r.updateWaypoints(n,s,d)}))}ConnectionSegmentMove.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var T=n("9f71"),B=Math.abs,A=Math.round,H=10;function BendpointSnapping(e){function snapTo(e,t){if(Object(r["isArray"])(e)){var n=e.length;while(n--)if(B(e[n]-t)<=H)return e[n]}else{e=+e;var o=t%e;if(o<H)return t-o;if(o>e-H)return t-o+e}return t}function mid(e){if(e.width)return{x:A(e.width/2+e.x),y:A(e.height/2+e.y)}}function getConnectionSegmentSnaps(e){var t=e.snapPoints,n=e.connection,o=n.waypoints,i=e.segmentStart,a=e.segmentStartIndex,c=e.segmentEnd,s=e.segmentEndIndex,u=e.axis;if(t)return t;var d=[o[a-1],i,c,o[s+1]];return a<2&&d.unshift(mid(n.source)),s>o.length-3&&d.unshift(mid(n.target)),e.snapPoints=t={horizontal:[],vertical:[]},Object(r["forEach"])(d,(function(e){e&&(e=e.original||e,"y"===u&&t.horizontal.push(e.y),"x"===u&&t.vertical.push(e.x))})),t}function getBendpointSnaps(e){var t=e.snapPoints,n=e.connection.waypoints,o=e.bendpointIndex;if(t)return t;var i=[n[o-1],n[o+1]];return e.snapPoints=t={horizontal:[],vertical:[]},Object(r["forEach"])(i,(function(e){e&&(e=e.original||e,t.horizontal.push(e.y),t.vertical.push(e.x))})),t}e.on("connectionSegment.move.move",1500,(function(e){var t,n,o=e.context,i=getConnectionSegmentSnaps(o),a=e.x,c=e.y;if(i){t=snapTo(i.vertical,a),n=snapTo(i.horizontal,c);var s=a-t,u=c-n;Object(r["assign"])(e,{dx:e.dx-s,dy:e.dy-u,x:t,y:n}),(s||-1!==i.vertical.indexOf(a))&&Object(T["e"])(e,"x",t),(u||-1!==i.horizontal.indexOf(c))&&Object(T["e"])(e,"y",n)}})),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,(function(e){var t,n,o=e.context,i=getBendpointSnaps(o),a=o.hover,c=a&&mid(a),s=e.x,u=e.y;if(i){t=snapTo(c?i.vertical.concat([c.x]):i.vertical,s),n=snapTo(c?i.horizontal.concat([c.y]):i.horizontal,u);var d=s-t,l=u-n;Object(r["assign"])(e,{dx:e.dx-d,dy:e.dy-l,x:e.x-d,y:e.y-l}),(d||-1!==i.vertical.indexOf(s))&&Object(T["e"])(e,"x",t),(l||-1!==i.horizontal.indexOf(u))&&Object(T["e"])(e,"y",n)}}))}BendpointSnapping.$inject=["eventBus"];t["a"]={__depends__:[o["a"],i["a"]],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",Bendpoints],bendpointMove:["type",BendpointMove],bendpointMovePreview:["type",BendpointMovePreview],connectionSegmentMove:["type",ConnectionSegmentMove],bendpointSnapping:["type",BendpointSnapping]}},1025:function(e,t,n){"use strict";function __stopPropagation(e){e&&"function"===typeof e.stopPropagation&&e.stopPropagation()}function getOriginal(e){return e.originalEvent||e.srcEvent}function stopPropagation(e,t){__stopPropagation(e,t),__stopPropagation(getOriginal(e),t)}function toPoint(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}n.d(t,"a",(function(){return getOriginal})),n.d(t,"b",(function(){return stopPropagation})),n.d(t,"c",(function(){return toPoint}))},1502:function(e,t,n){"use strict";n.d(t,"a",(function(){return hasModifier})),n.d(t,"b",(function(){return isCmd})),n.d(t,"c",(function(){return isKey})),n.d(t,"d",(function(){return isShift}));var o=n("87f2");function hasModifier(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function isCmd(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}function isKey(e,t){return e=Object(o["isArray"])(e)?e:[e],-1!==e.indexOf(t.key)||-1!==e.indexOf(t.keyCode)}function isShift(e){return e.shiftKey}},1651:function(e,t,n){"use strict";function IdGenerator(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}n.d(t,"a",(function(){return IdGenerator})),IdGenerator.prototype.next=function(){return this._prefix+ ++this._counter}},1867:function(e,t,n){"use strict";var o=n("87f2");function last(e){return e&&e[e.length-1]}function sortTopOrMiddle(e){return e.y}function sortLeftOrCenter(e){return e.x}var i={left:sortLeftOrCenter,center:sortLeftOrCenter,right:function(e){return e.x+e.width},top:sortTopOrMiddle,middle:sortTopOrMiddle,bottom:function(e){return e.y+e.height}};function AlignElements(e){this._modeling=e}AlignElements.$inject=["modeling"],AlignElements.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",o="width";return-1!==t.indexOf(e)&&(n="y",o="height"),{axis:n,dimension:o}},AlignElements.prototype._isType=function(e,t){return-1!==t.indexOf(e)},AlignElements.prototype._alignmentPosition=function(e,t){var n,i,r,a=this._getOrientationDetails(e),c=a.axis,s=a.dimension,u={},d={},l=!1;function getMiddleOrTop(e,t){return Math.round((e[c]+t[c]+t[s])/2)}if(this._isType(e,["left","top"]))u[e]=t[0][c];else if(this._isType(e,["right","bottom"]))r=last(t),u[e]=r[c]+r[s];else if(this._isType(e,["center","middle"])){if(Object(o["forEach"])(t,(function(e){var t=e[c]+Math.round(e[s]/2);d[t]?d[t].elements.push(e):d[t]={elements:[e],center:t}})),n=Object(o["sortBy"])(d,(function(e){return e.elements.length>1&&(l=!0),e.elements.length})),l)return u[e]=last(n).center,u;i=t[0],t=Object(o["sortBy"])(t,(function(e){return e[c]+e[s]})),r=last(t),u[e]=getMiddleOrTop(i,r)}return u},AlignElements.prototype.trigger=function(e,t){var n=this._modeling,r=Object(o["filter"])(e,(function(e){return!(e.waypoints||e.host||e.labelTarget)})),a=i[t],c=Object(o["sortBy"])(r,a),s=this._alignmentPosition(t,c);n.alignElements(c,s)};t["a"]={__init__:["alignElements"],alignElements:["type",AlignElements]}},"194a":function(e,t,n){"use strict";var o=n("1cff"),i=n("c5b3"),r=n("4e09"),a=n("71f4"),c=n("87f2"),s=n("2e42"),u=n("43c6"),d=n("4e3a"),l=n("78f9"),p=n("dda7"),h=Math.abs,f=Math.round,v={x:"width",y:"height"},g="crosshair",y={n:"top",w:"left",s:"bottom",e:"right"},m=1500,b={n:"s",w:"e",s:"n",e:"w"},x=20;function SpaceTool(e,t,n,o,i,r){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=o,this._rules=i,this._toolManager=r;var a=this;r.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",(function(e){n.once("spaceTool.selection.ended",(function(){a.activateMakeSpace(e.originalEvent)}))})),n.on("spaceTool.move",m,(function(e){var t=e.context,n=t.initialized;n||(n=t.initialized=a.init(e,t)),n&&ensureConstraints(e)})),n.on("spaceTool.end",(function(e){var t=e.context,o=t.axis,i=t.direction,r=t.movingShapes,c=t.resizingShapes,s=t.start;if(t.initialized){ensureConstraints(e);var u={x:0,y:0};u[o]=f(e["d"+o]),a.makeSpace(r,c,u,i,s),n.once("spaceTool.ended",(function(e){a.activateSelection(e.originalEvent,!0,!0)}))}}))}function addPadding(e){return{top:e.top-x,right:e.right+x,bottom:e.bottom+x,left:e.left-x}}function ensureConstraints(e){var t,n,o=e.context,i=o.spaceToolConstraints;i&&(Object(c["isNumber"])(i.left)&&(t=Math.max(e.x,i.left),e.dx=e.dx+t-e.x,e.x=t),Object(c["isNumber"])(i.right)&&(t=Math.min(e.x,i.right),e.dx=e.dx+t-e.x,e.x=t),Object(c["isNumber"])(i.top)&&(n=Math.max(e.y,i.top),e.dy=e.dy+n-e.y,e.y=n),Object(c["isNumber"])(i.bottom)&&(n=Math.min(e.y,i.bottom),e.dy=e.dy+n-e.y,e.y=n))}function getSpaceToolConstraints(e,t,n,o,i){var r=e.movingShapes,a=e.resizingShapes;if(a.length){var d,l,p={};return Object(c["forEach"])(a,(function(e){var h,f,g,m=Object(s["b"])(e),x=Object(c["filter"])(e.children,(function(e){return!isConnection(e)&&!isLabel(e)&&!includes(r,e)&&!includes(a,e)})),_=Object(c["filter"])(e.children,(function(e){return!isConnection(e)&&!isLabel(e)&&includes(r,e)}));x.length&&(f=addPadding(Object(s["b"])(Object(u["b"])(x))),h=o-m[y[n]]+f[y[n]],"n"===n?p.bottom=l=Object(c["isNumber"])(l)?Math.min(l,h):h:"w"===n?p.right=l=Object(c["isNumber"])(l)?Math.min(l,h):h:"s"===n?p.top=d=Object(c["isNumber"])(d)?Math.max(d,h):h:"e"===n&&(p.left=d=Object(c["isNumber"])(d)?Math.max(d,h):h)),_.length&&(g=addPadding(Object(s["b"])(Object(u["b"])(_))),h=o-g[y[b[n]]]+m[y[b[n]]],"n"===n?p.bottom=l=Object(c["isNumber"])(l)?Math.min(l,h):h:"w"===n?p.right=l=Object(c["isNumber"])(l)?Math.min(l,h):h:"s"===n?p.top=d=Object(c["isNumber"])(d)?Math.max(d,h):h:"e"===n&&(p.left=d=Object(c["isNumber"])(d)?Math.max(d,h):h));var j=i&&i[e.id];j&&("n"===n?(h=o+e[v[t]]-j[v[t]],p.bottom=l=Object(c["isNumber"])(l)?Math.min(l,h):h):"w"===n?(h=o+e[v[t]]-j[v[t]],p.right=l=Object(c["isNumber"])(l)?Math.min(l,h):h):"s"===n?(h=o-e[v[t]]+j[v[t]],p.top=d=Object(c["isNumber"])(d)?Math.max(d,h):h):"e"===n&&(h=o-e[v[t]]+j[v[t]],p.left=d=Object(c["isNumber"])(d)?Math.max(d,h):h))})),p}}function includes(e,t){return-1!==e.indexOf(t)}function isConnection(e){return!!e.waypoints}function isLabel(e){return!!e.labelTarget}SpaceTool.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager"],SpaceTool.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:g,data:{context:{reactivate:n}},trapClick:!1})},SpaceTool.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:g,data:{context:{}}})},SpaceTool.prototype.makeSpace=function(e,t,n,o,i){return this._modeling.createSpace(e,t,n,o,i)},SpaceTool.prototype.init=function(e,t){var n=h(e.dx)>h(e.dy)?"x":"y",o=e["d"+n],i=e[n]-o;if(h(o)<5)return!1;o<0&&(o*=-1),Object(l["a"])(e)&&(o*=-1);var r=Object(d["a"])(n,o),a=this._canvas.getRootElement(),s=Object(u["h"])(a,!0),f=this.calculateAdjustments(s,n,o,i),v=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:r,shapes:f.resizingShapes,start:i}),g=getSpaceToolConstraints(f,n,r,i,v);return Object(c["assign"])(t,f,{axis:n,direction:r,spaceToolConstraints:g,start:i}),Object(p["a"])("resize-"+("x"===n?"ew":"ns")),!0},SpaceTool.prototype.calculateAdjustments=function(e,t,n,o){var i=this._rules,r=[],a=[];return Object(c["forEach"])(e,(function(e){if(e.parent&&!isConnection(e)){var c=e[t],s=c+e[v[t]];return n>0&&c>o||n<0&&s<o?r.push(e):c<o&&s>o&&i.allowed("shape.resize",{shape:e})?a.push(e):void 0}})),{movingShapes:r,resizingShapes:a}},SpaceTool.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},SpaceTool.prototype.isActive=function(){var e=this._dragging.context();return e&&/^spaceTool/.test(e.prefix)};var _=n("6b8b"),j=n("e116"),O="djs-dragging",w="djs-resizing",S=250,E=Math.max;function SpaceToolPreview(e,t,n,o,i){function addPreviewGfx(e,t){Object(c["forEach"])(e,(function(e){i.addDragger(e,t),n.addMarker(e,O)}))}e.on("spaceTool.selection.start",(function(e){var t=n.getLayer("space"),i=e.context,r={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},a=Object(_["f"])("g");Object(_["b"])(a,o.cls("djs-crosshair-group",["no-events"])),Object(_["a"])(t,a);var c=Object(_["f"])("path");Object(_["b"])(c,"d",r.x),Object(_["c"])(c).add("djs-crosshair"),Object(_["a"])(a,c);var s=Object(_["f"])("path");Object(_["b"])(s,"d",r.y),Object(_["c"])(s).add("djs-crosshair"),Object(_["a"])(a,s),i.crosshairGroup=a})),e.on("spaceTool.selection.move",(function(e){var t=e.context.crosshairGroup;Object(j["c"])(t,e.x,e.y)})),e.on("spaceTool.selection.cleanup",(function(e){var t=e.context,n=t.crosshairGroup;n&&Object(_["j"])(n)})),e.on("spaceTool.move",S,(function(e){var r=e.context,a=r.line,s=r.axis,u=r.movingShapes,d=r.resizingShapes;if(r.initialized){if(!r.dragGroup){var l=n.getLayer("space");a=Object(_["f"])("path"),Object(_["b"])(a,"d","M0,0 L0,0"),Object(_["c"])(a).add("djs-crosshair"),Object(_["a"])(l,a),r.line=a;var p=Object(_["f"])("g");Object(_["b"])(p,o.cls("djs-drag-group",["no-events"])),Object(_["a"])(n.getDefaultLayer(),p),addPreviewGfx(u,p);var h=r.movingConnections=t.filter((function(e){var t=!1;Object(c["forEach"])(u,(function(n){Object(c["forEach"])(n.outgoing,(function(n){e===n&&(t=!0)}))}));var n=!1;Object(c["forEach"])(u,(function(t){Object(c["forEach"])(t.incoming,(function(t){e===t&&(n=!0)}))}));var o=!1;Object(c["forEach"])(d,(function(t){Object(c["forEach"])(t.outgoing,(function(t){e===t&&(o=!0)}))}));var i=!1;return Object(c["forEach"])(d,(function(t){Object(c["forEach"])(t.incoming,(function(t){e===t&&(i=!0)}))})),SpaceToolPreview_isConnection(e)&&(t||o)&&(n||i)}));addPreviewGfx(h,p),r.dragGroup=p}if(!r.frameGroup){var f=Object(_["f"])("g");Object(_["b"])(f,o.cls("djs-frame-group",["no-events"])),Object(_["a"])(n.getDefaultLayer(),f);var v=[];Object(c["forEach"])(d,(function(e){var t=i.addFrame(e,f),o=t.getBBox();v.push({element:t,initialBounds:o}),n.addMarker(e,w)})),r.frameGroup=f,r.frames=v}var g={x:"M"+e.x+", -10000 L"+e.x+", 10000",y:"M -10000, "+e.y+" L 10000, "+e.y};Object(_["b"])(a,{d:g[s]});var y={x:"y",y:"x"},m={x:e.dx,y:e.dy};m[y[r.axis]]=0,Object(j["c"])(r.dragGroup,m.x,m.y),Object(c["forEach"])(r.frames,(function(e){var t,n,o=e.element,i=e.initialBounds;"e"===r.direction?Object(_["b"])(o,{width:E(i.width+m.x,5)}):(t=E(i.width-m.x,5),Object(_["b"])(o,{width:t,x:i.x+i.width-t})),"s"===r.direction?Object(_["b"])(o,{height:E(i.height+m.y,5)}):(n=E(i.height-m.y,5),Object(_["b"])(o,{height:n,y:i.y+i.height-n}))}))}})),e.on("spaceTool.cleanup",(function(e){var t=e.context,o=t.movingShapes,i=t.movingConnections,r=t.resizingShapes,a=t.line,s=t.dragGroup,u=t.frameGroup;Object(c["forEach"])(o,(function(e){n.removeMarker(e,O)})),Object(c["forEach"])(i,(function(e){n.removeMarker(e,O)})),s&&(Object(_["j"])(a),Object(_["j"])(s)),Object(c["forEach"])(r,(function(e){n.removeMarker(e,w)})),u&&Object(_["j"])(u)}))}function SpaceToolPreview_isConnection(e){return e.waypoints}SpaceToolPreview.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];t["a"]={__init__:["spaceToolPreview"],__depends__:[o["a"],i["a"],r["a"],a["a"]],spaceTool:["type",SpaceTool],spaceToolPreview:["type",SpaceToolPreview]}},"19ce":function(e,t,n){"use strict";n.d(t,"a",(function(){return KeyboardBindings}));var o=n("1502"),i=500,r=67,a=86,c=89,s=90,u=["c","C",r],d=["v","V",a],l=["y","Y",c],p=["z","Z",s];function KeyboardBindings(e,t){var n=this;e.on("editorActions.init",i,(function(e){var o=e.editorActions;n.registerBindings(t,o)}))}KeyboardBindings.$inject=["eventBus","keyboard"],KeyboardBindings.prototype.registerBindings=function(e,t){function addListener(n,o){t.isRegistered(n)&&e.addListener(o)}addListener("undo",(function(e){var n=e.keyEvent;if(Object(o["b"])(n)&&!Object(o["d"])(n)&&Object(o["c"])(p,n))return t.trigger("undo"),!0})),addListener("redo",(function(e){var n=e.keyEvent;if(Object(o["b"])(n)&&(Object(o["c"])(l,n)||Object(o["c"])(p,n)&&Object(o["d"])(n)))return t.trigger("redo"),!0})),addListener("copy",(function(e){var n=e.keyEvent;if(Object(o["b"])(n)&&Object(o["c"])(u,n))return t.trigger("copy"),!0})),addListener("paste",(function(e){var n=e.keyEvent;if(Object(o["b"])(n)&&Object(o["c"])(d,n))return t.trigger("paste"),!0})),addListener("stepZoom",(function(e){var n=e.keyEvent;if(Object(o["c"])(["+","Add","="],n)&&Object(o["b"])(n))return t.trigger("stepZoom",{value:1}),!0})),addListener("stepZoom",(function(e){var n=e.keyEvent;if(Object(o["c"])(["-","Subtract"],n)&&Object(o["b"])(n))return t.trigger("stepZoom",{value:-1}),!0})),addListener("zoom",(function(e){var n=e.keyEvent;if(Object(o["c"])("0",n)&&Object(o["b"])(n))return t.trigger("zoom",{value:1}),!0})),addListener("removeSelection",(function(e){var n=e.keyEvent;if(Object(o["c"])(["Backspace","Delete","Del"],n))return t.trigger("removeSelection"),!0}))}},"1cff":function(e,t,n){"use strict";var o=n("e506"),i=n("1025"),r=1500;function HoverFix(e,t,n){var o=this,a=n.get("dragging",!1);function ensureHover(t){if(!t.hover){var n=t.originalEvent,i=o._findTargetGfx(n),r=i&&e.get(i);i&&r&&(t.stopPropagation(),a.hover({element:r,gfx:i}),a.move(n))}}a&&t.on("drag.start",(function(e){t.once("drag.move",r,(function(e){ensureHover(e)}))})),function(){var e,n;t.on("element.hover",(function(t){e=t.gfx,n=t.element})),t.on("element.hover",r,(function(o){n&&t.fire("element.out",{element:n,gfx:e})})),t.on("element.out",(function(){e=null,n=null}))}(),this._findTargetGfx=function(e){var t,n;if(e instanceof MouseEvent)return t=Object(i["c"])(e),n=document.elementFromPoint(t.x,t.y),getGfx(n)}}function getGfx(e){return Object(o["closest"])(e,"svg, .djs-element",!0)}HoverFix.$inject=["elementRegistry","eventBus","injector"];var a={__init__:["hoverFix"],hoverFix:["type",HoverFix]},c=n("c78f"),s=n("87f2"),u=n("dda7"),d=n("7d74"),l=n("acb6"),p=Math.round,h="djs-drag-active";function preventDefault(e){e.preventDefault()}function isTouchEvent(e){return"undefined"!==typeof TouchEvent&&e instanceof TouchEvent}function getLength(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function Dragging(e,t,n,r){var a,c={threshold:5,trapClick:!0};function toLocalPoint(e){var n=t.viewbox(),o=t._container.getBoundingClientRect();return{x:n.x+(e.x-o.left)/n.scale,y:n.y+(e.y-o.top)/n.scale}}function fire(t,n){n=n||a;var o=e.createEvent(Object(s["assign"])({},n.payload,n.data,{isTouch:n.isTouch}));return!1!==e.fire("drag."+t,o)&&e.fire(n.prefix+"."+t,o)}function restoreSelection(e){var t=e.filter((function(e){return r.get(e.id)}));t.length&&n.select(t)}function move(e,o){var r=a.payload,c=a.displacement,d=a.globalStart,f=Object(i["c"])(e),v=Object(l["b"])(f,d),g=a.localStart,y=toLocalPoint(f),m=Object(l["b"])(y,g);if(!a.active&&(o||getLength(v)>a.threshold)){if(Object(s["assign"])(r,{x:p(g.x+c.x),y:p(g.y+c.y),dx:0,dy:0},{originalEvent:e}),!1===fire("start"))return cancel();a.active=!0,a.keepSelection||(r.previousSelection=n.get(),n.select(null)),a.cursor&&Object(u["a"])(a.cursor),t.addMarker(t.getRootElement(),h)}Object(i["b"])(e),a.active&&(Object(s["assign"])(r,{x:p(y.x+c.x),y:p(y.y+c.y),dx:p(m.x),dy:p(m.y)},{originalEvent:e}),fire("move"))}function end(e){var t,n=!0;a.active&&(e&&(a.payload.originalEvent=e,Object(i["b"])(e)),n=fire("end")),!1===n&&fire("rejected"),t=cleanup(!0!==n),fire("ended",t)}function checkCancel(e){27===e.which&&(preventDefault(e),cancel())}function trapClickAndEnd(t){var n;a.active&&(n=Object(d["a"])(e),setTimeout(n,400),preventDefault(t)),end(t)}function trapTouch(e){move(e)}function hover(e){var t=a.payload;t.hoverGfx=e.gfx,t.hover=e.element,fire("hover")}function out(e){fire("out");var t=a.payload;t.hoverGfx=null,t.hover=null}function cancel(e){var t;if(a){var n=a.active;n&&fire("cancel"),t=cleanup(e),n&&fire("canceled",t)}}function cleanup(i){var r,c;fire("cleanup"),Object(u["b"])(),c=a.trapClick?trapClickAndEnd:end,o["event"].unbind(document,"mousemove",move),o["event"].unbind(document,"dragstart",preventDefault),o["event"].unbind(document,"selectstart",preventDefault),o["event"].unbind(document,"mousedown",c,!0),o["event"].unbind(document,"mouseup",c,!0),o["event"].unbind(document,"keyup",checkCancel),o["event"].unbind(document,"touchstart",trapTouch,!0),o["event"].unbind(document,"touchcancel",cancel,!0),o["event"].unbind(document,"touchmove",move,!0),o["event"].unbind(document,"touchend",end,!0),e.off("element.hover",hover),e.off("element.out",out),t.removeMarker(t.getRootElement(),h);var s=a.payload.previousSelection;return!1!==i&&s&&!n.get().length&&restoreSelection(s),r=a,a=null,r}function init(t,n,r,u){a&&cancel(!1),"string"===typeof n&&(u=r,r=n,n=null),u=Object(s["assign"])({},c,u||{});var d,p,h,f,v,g=u.data||{};f=u.trapClick?trapClickAndEnd:end,t?(d=Object(i["a"])(t)||t,p=Object(i["c"])(t),Object(i["b"])(t),"dragstart"===d.type&&preventDefault(d)):(d=null,p={x:0,y:0}),h=toLocalPoint(p),n||(n=h),v=isTouchEvent(d),a=Object(s["assign"])({prefix:r,data:g,payload:{},globalStart:p,displacement:Object(l["b"])(n,h),localStart:h,isTouch:v},u),u.manual||(v?(o["event"].bind(document,"touchstart",trapTouch,!0),o["event"].bind(document,"touchcancel",cancel,!0),o["event"].bind(document,"touchmove",move,!0),o["event"].bind(document,"touchend",end,!0)):(o["event"].bind(document,"mousemove",move),o["event"].bind(document,"dragstart",preventDefault),o["event"].bind(document,"selectstart",preventDefault),o["event"].bind(document,"mousedown",f,!0),o["event"].bind(document,"mouseup",f,!0)),o["event"].bind(document,"keyup",checkCancel),e.on("element.hover",hover),e.on("element.out",out)),fire("init"),u.autoActivate&&move(t,!0)}e.on("diagram.destroy",cancel),this.init=init,this.move=move,this.hover=hover,this.out=out,this.end=end,this.cancel=cancel,this.context=function(){return a},this.setOptions=function(e){Object(s["assign"])(c,e)}}Dragging.$inject=["eventBus","canvas","selection","elementRegistry"];t["a"]={__depends__:[a,c["a"]],dragging:["type",Dragging]}},"224b":function(e,t,n){"use strict";var o=n("39c0"),i=n("4672"),r=n("87f2"),a=n("e506"),c=".entry",s=1e3;function ContextPad(e,t,n){this._eventBus=t,this._overlays=n;var o=Object(r["isDefined"])(e&&e.scale)?e.scale:{min:1,max:1.5};this._overlaysConfig={position:{right:-9,top:-6},scale:o},this._current=null,this._init()}function addClasses(e,t){var n=Object(a["classes"])(e),o=Object(r["isArray"])(t)?t:t.split(/\s+/g);o.forEach((function(e){n.add(e)}))}ContextPad.$inject=["config.contextPad","eventBus","overlays"],ContextPad.prototype._init=function(){var e=this._eventBus,t=this;e.on("selection.changed",(function(e){var n=e.newSelection;1===n.length?t.open(n[0]):t.close()})),e.on("elements.delete",(function(e){var n=e.elements;Object(r["forEach"])(n,(function(e){t.isOpen(e)&&t.close()}))})),e.on("element.changed",(function(e){var n=e.element,o=t._current;o&&o.element===n&&t.open(n,!0)}))},ContextPad.prototype.registerProvider=function(e,t){t||(t=e,e=s),this._eventBus.on("contextPad.getProviders",e,(function(e){e.providers.push(t)}))},ContextPad.prototype.getEntries=function(e){var t=this._getProviders(),n={};return Object(r["forEach"])(t,(function(t){var o=t.getContextPadEntries(e);Object(r["isFunction"])(o)?n=o(n):Object(r["forEach"])(o,(function(e,t){n[t]=e}))})),n},ContextPad.prototype.trigger=function(e,t,n){var o,i,c,s=this._current.element,u=this._current.entries,d=t.delegateTarget||t.target;if(!d)return t.preventDefault();if(o=u[Object(a["attr"])(d,"data-action")],i=o.action,c=t.originalEvent||t,Object(r["isFunction"])(i)){if("click"===e)return i(c,s,n)}else if(i[e])return i[e](c,s,n);t.preventDefault()},ContextPad.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))},ContextPad.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},ContextPad.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this.getPad(e),o=n.html;Object(r["forEach"])(t,(function(e,t){var n,i=e.group||"default",r=Object(a["domify"])(e.html||'<div class="entry" draggable="true"></div>');Object(a["attr"])(r,"data-action",t),n=Object(a["query"])("[data-group="+i+"]",o),n||(n=Object(a["domify"])('<div class="group" data-group="'+i+'"></div>'),o.appendChild(n)),n.appendChild(r),e.className&&addClasses(r,e.className),e.title&&Object(a["attr"])(r,"title",e.title),e.imageUrl&&r.appendChild(Object(a["domify"])('<img src="'+e.imageUrl+'">'))})),Object(a["classes"])(o).add("open"),this._current={element:e,pad:n,entries:t},this._eventBus.fire("contextPad.open",{current:this._current})},ContextPad.prototype.getPad=function(e){if(this.isOpen())return this._current.pad;var t=this,n=this._overlays,o=Object(a["domify"])('<div class="djs-context-pad"></div>'),i=Object(r["assign"])({html:o},this._overlaysConfig);a["delegate"].bind(o,c,"click",(function(e){t.trigger("click",e)})),a["delegate"].bind(o,c,"dragstart",(function(e){t.trigger("dragstart",e)})),a["event"].bind(o,"mousedown",(function(e){e.stopPropagation()})),this._overlayId=n.add(e,"context-pad",i);var s=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:e,pad:s}),s},ContextPad.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},ContextPad.prototype.isOpen=function(e){return!!this._current&&(!e||this._current.element===e)};t["a"]={__depends__:[o["a"],i["a"]],contextPad:["type",ContextPad]}},"2e42":function(e,t,n){"use strict";n.d(t,"g",(function(){return roundBounds})),n.d(t,"h",(function(){return roundPoint})),n.d(t,"b",(function(){return asTRBL})),n.d(t,"a",(function(){return asBounds})),n.d(t,"e",(function(){return getMid})),n.d(t,"f",(function(){return getOrientation})),n.d(t,"d",(function(){return getElementLineIntersection})),n.d(t,"c",(function(){return filterRedundantWaypoints}));var o=n("87f2"),i=n("6de3"),r=n("e5ab"),a=n.n(r);function roundBounds(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function roundPoint(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function asTRBL(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function asBounds(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function getMid(e){return roundPoint({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function getOrientation(e,t,n){n=n||0,Object(o["isObject"])(n)||(n={x:n,y:n});var i=asTRBL(e),r=asTRBL(t),a=i.bottom+n.y<=r.top,c=i.left-n.x>=r.right,s=i.top-n.y>=r.bottom,u=i.right+n.x<=r.left,d=a?"top":s?"bottom":null,l=u?"left":c?"right":null;return l&&d?d+"-"+l:l||d||"intersect"}function getElementLineIntersection(e,t,n){var r=getIntersections(e,t);return 1===r.length||2===r.length&&Object(i["b"])(r[0],r[1])<1?roundPoint(r[0]):r.length>1?(r=Object(o["sortBy"])(r,(function(e){var t=Math.floor(100*e.t2)||1;return t=100-t,t=(t<10?"0":"")+t,e.segment2+"#"+t})),roundPoint(r[n?0:r.length-1])):null}function getIntersections(e,t){return a()(e,t)}function filterRedundantWaypoints(e){e=e.slice();var t,n,o,r=0;while(e[r])t=e[r],n=e[r-1],o=e[r+1],0===Object(i["b"])(t,o)||Object(i["e"])(n,o,t)?e.splice(r,1):r++;return e}},"2f93":function(e,t,n){"use strict";var o=n("87f2"),i=n("e506"),r=n("1502"),a="keyboard.keydown",c="keyboard.keyup",s=1e3;function Keyboard(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",(function(){n._fire("destroy"),n.unbind()})),t.on("diagram.init",(function(){n._fire("init")})),t.on("attach",(function(){e&&e.bindTo&&n.bind(e.bindTo)})),t.on("detach",(function(){n.unbind()}))}function isInput(e){return e&&(Object(i["matches"])(e,"input, textarea")||"true"===e.contentEditable)}Keyboard.$inject=["config.keyboard","eventBus"],Keyboard.prototype._keydownHandler=function(e){this._keyHandler(e,a)},Keyboard.prototype._keyupHandler=function(e){this._keyHandler(e,c)},Keyboard.prototype._keyHandler=function(e,t){var n,o=e.target;if(!isInput(o)){var i={keyEvent:e};n=this._eventBus.fire(t||a,i),n&&e.preventDefault()}},Keyboard.prototype.bind=function(e){this.unbind(),this._node=e,i["event"].bind(e,"keydown",this._keydownHandler,!0),i["event"].bind(e,"keyup",this._keyupHandler,!0),this._fire("bind")},Keyboard.prototype.getBinding=function(){return this._node},Keyboard.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),i["event"].unbind(e,"keydown",this._keydownHandler,!0),i["event"].unbind(e,"keyup",this._keyupHandler,!0)),this._node=null},Keyboard.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})},Keyboard.prototype.addListener=function(e,t,n){Object(o["isFunction"])(e)&&(n=t,t=e,e=s),this._eventBus.on(n||a,e,t)},Keyboard.prototype.removeListener=function(e,t){this._eventBus.off(t||a,e)},Keyboard.prototype.hasModifier=r["a"],Keyboard.prototype.isCmd=r["b"],Keyboard.prototype.isShift=r["d"],Keyboard.prototype.isKey=r["c"];var u=n("19ce");t["a"]={__init__:["keyboard","keyboardBindings"],keyboard:["type",Keyboard],keyboardBindings:["type",u["a"]]}},3413:function(e,t,n){"use strict";n.d(t,"a",(function(){return CommandInterceptor}));var o=n("87f2"),i=1e3;function CommandInterceptor(e){this._eventBus=e}function unwrapEvent(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}CommandInterceptor.$inject=["eventBus"],CommandInterceptor.prototype.on=function(e,t,n,r,a,c){if((Object(o["isFunction"])(t)||Object(o["isNumber"])(t))&&(c=a,a=r,r=n,n=t,t=null),Object(o["isFunction"])(n)&&(c=a,a=r,r=n,n=i),Object(o["isObject"])(a)&&(c=a,a=!1),!Object(o["isFunction"])(r))throw new Error("handlerFn must be a function");Object(o["isArray"])(e)||(e=[e]);var s=this._eventBus;Object(o["forEach"])(e,(function(e){var o=["commandStack",e,t].filter((function(e){return e})).join(".");s.on(o,n,a?unwrapEvent(r,c):r,c)}))};var r=["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"];Object(o["forEach"])(r,(function(e){CommandInterceptor.prototype[e]=function(t,n,i,r,a){(Object(o["isFunction"])(t)||Object(o["isNumber"])(t))&&(a=r,r=i,i=n,n=t,t=null),this.on(t,e,n,i,r,a)}}))},"34fe":function(e,t,n){"use strict";var o=n("4672"),i=n("c78f"),r=n("e506"),a=n("43c6"),c=n("6730");function SearchPad(e,t,n,o){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=e,this._eventBus=t,this._overlays=n,this._selection=o,this._container=Object(r["domify"])(SearchPad.BOX_HTML),this._searchInput=Object(r["query"])(SearchPad.INPUT_SELECTOR,this._container),this._resultsContainer=Object(r["query"])(SearchPad.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy"],this.close,this)}function constructOverlay(e){var t=6,n=e.width+2*t,o=e.height+2*t,i=["width: "+n+"px","height: "+o+"px"].join("; ");return{position:{bottom:o-t,right:n-t},show:!0,html:'<div style="'+i+'" class="'+SearchPad.OVERLAY_CLASS+'"></div>'}}function createInnerTextNode(e,t,n){var o=createHtmlText(t),i=Object(r["domify"])(n);i.innerHTML=o,e.appendChild(i)}function createHtmlText(e){var t="";return e.forEach((function(e){e.matched?t+='<strong class="'+SearchPad.RESULT_HIGHLIGHT_CLASS+'">'+Object(c["a"])(e.matched)+"</strong>":t+=Object(c["a"])(e.normal)})),""!==t?t:null}SearchPad.$inject=["canvas","eventBus","overlays","selection"],SearchPad.prototype._bindEvents=function(){var e=this;function listen(t,n,o,i){e._eventMaps.push({el:t,type:o,listener:r["delegate"].bind(t,n,o,i)})}listen(document,"html","click",(function(t){e.close()})),listen(this._container,SearchPad.INPUT_SELECTOR,"click",(function(e){e.stopPropagation(),e.delegateTarget.focus()})),listen(this._container,SearchPad.RESULT_SELECTOR,"mouseover",(function(t){t.stopPropagation(),e._scrollToNode(t.delegateTarget),e._preselect(t.delegateTarget)})),listen(this._container,SearchPad.RESULT_SELECTOR,"click",(function(t){t.stopPropagation(),e._select(t.delegateTarget)})),listen(this._container,SearchPad.INPUT_SELECTOR,"keydown",(function(e){38===e.keyCode&&e.preventDefault(),40===e.keyCode&&e.preventDefault()})),listen(this._container,SearchPad.INPUT_SELECTOR,"keyup",(function(t){if(27===t.keyCode)return e.close();if(13===t.keyCode){var n=e._getCurrentResult();return n?e._select(n):e.close()}return 38===t.keyCode?e._scrollToDirection(!0):40===t.keyCode?e._scrollToDirection():void(37!==t.keyCode&&39!==t.keyCode&&e._search(t.delegateTarget.value))}))},SearchPad.prototype._unbindEvents=function(){this._eventMaps.forEach((function(e){r["delegate"].unbind(e.el,e.type,e.listener)}))},SearchPad.prototype._search=function(e){var t=this;if(this._clearResults(),e&&""!==e){var n=this._searchProvider.find(e);if(n.length){n.forEach((function(e){var n=e.element.id,o=t._createResultNode(e,n);t._results[n]={element:e.element,node:o}}));var o=Object(r["query"])(SearchPad.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(o),this._preselect(o)}}},SearchPad.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}},SearchPad.prototype._scrollToNode=function(e){if(e&&e!==this._getCurrentResult()){var t=e.offsetTop,n=this._resultsContainer.scrollTop,o=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<o&&(this._resultsContainer.scrollTop=o)}},SearchPad.prototype._clearResults=function(){Object(r["clear"])(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")},SearchPad.prototype._getCurrentResult=function(){return Object(r["query"])(SearchPad.RESULT_SELECTED_SELECTOR,this._resultsContainer)},SearchPad.prototype._createResultNode=function(e,t){var n=Object(r["domify"])(SearchPad.RESULT_HTML);return e.primaryTokens.length>0&&createInnerTextNode(n,e.primaryTokens,SearchPad.RESULT_PRIMARY_HTML),createInnerTextNode(n,e.secondaryTokens,SearchPad.RESULT_SECONDARY_HTML),Object(r["attr"])(n,SearchPad.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n},SearchPad.prototype.registerProvider=function(e){this._searchProvider=e},SearchPad.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,Object(r["classes"])(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},SearchPad.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,Object(r["classes"])(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))},SearchPad.prototype.toggle=function(){this.isOpen()?this.close():this.open()},SearchPad.prototype.isOpen=function(){return this._open},SearchPad.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&Object(r["classes"])(t).remove(SearchPad.RESULT_SELECTED_CLASS);var n=Object(r["attr"])(e,SearchPad.RESULT_ID_ATTRIBUTE),o=this._results[n].element;Object(r["classes"])(e).add(SearchPad.RESULT_SELECTED_CLASS),this._resetOverlay(o),this._centerViewbox(o),this._selection.select(o),this._eventBus.fire("searchPad.preselected",o)}},SearchPad.prototype._select=function(e){var t=Object(r["attr"])(e,SearchPad.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this.close(),this._resetOverlay(),this._centerViewbox(n),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)},SearchPad.prototype._centerViewbox=function(e){var t=this._canvas.viewbox(),n=Object(a["b"])(e),o={x:n.x+n.width/2-t.outer.width/2,y:n.y+n.height/2-t.outer.height/2,width:t.outer.width,height:t.outer.height};this._canvas.viewbox(o),this._canvas.zoom(t.scale)},SearchPad.prototype._resetOverlay=function(e){if(this._overlayId&&this._overlays.remove(this._overlayId),e){var t=Object(a["b"])(e),n=constructOverlay(t);this._overlayId=this._overlays.add(e,n)}},SearchPad.CONTAINER_SELECTOR=".djs-search-container",SearchPad.INPUT_SELECTOR=".djs-search-input input",SearchPad.RESULTS_CONTAINER_SELECTOR=".djs-search-results",SearchPad.RESULT_SELECTOR=".djs-search-result",SearchPad.RESULT_SELECTED_CLASS="djs-search-result-selected",SearchPad.RESULT_SELECTED_SELECTOR="."+SearchPad.RESULT_SELECTED_CLASS,SearchPad.RESULT_ID_ATTRIBUTE="data-result-id",SearchPad.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",SearchPad.OVERLAY_CLASS="djs-search-overlay",SearchPad.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>',SearchPad.RESULT_HTML='<div class="djs-search-result"></div>',SearchPad.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',SearchPad.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';t["a"]={__depends__:[o["a"],i["a"]],searchPad:["type",SearchPad]}},"35be":function(e,t,n){"use strict";var o=n("1cff"),i=n("71f4"),r=n("c5b3"),a=n("c78f"),c=n("87f2"),s=n("43c6"),u="drop-ok",d="drop-not-ok",l="attach-ok",p="new-parent",h="create",f=2e3;function Create(e,t,n,o,i){function canCreate(e,t,n,o,r){if(!t)return!1;e=Object(c["filter"])(e,(function(t){var n=t.labelTarget;return!t.parent&&!(isLabel(t)&&-1!==e.indexOf(n))}));var a=Object(c["find"])(e,(function(e){return!isConnection(e)})),s=!1,u=!1,d=!1;isSingleShape(e)&&(s=i.allowed("shape.attach",{position:n,shape:a,target:t})),s||(d=isSingleShape(e)?i.allowed("shape.create",{position:n,shape:a,source:o,target:t}):i.allowed("elements.create",{elements:e,position:n,target:t}));var l=r.connectionTarget;return d||s?(a&&o&&(u=i.allowed("connection.create",{source:l===o?a:o,target:l===o?o:a,hints:{targetParent:t,targetAttach:s}})),{attach:s,connect:u}):(null===d||null===s)&&null}function setMarker(t,n){[l,u,d,p].forEach((function(o){o===n?e.addMarker(t,o):e.removeMarker(t,o)}))}function cancel(){var e=t.context();e&&e.prefix===h&&t.cancel()}n.on(["create.move","create.hover"],(function(e){var t=e.context,n=t.elements,o=e.hover,i=t.source,r=t.hints||{};if(!o)return t.canExecute=!1,void(t.target=null);ensureConstraints(e);var a={x:e.x,y:e.y},c=t.canExecute=o&&canCreate(n,o,a,i,r);o&&null!==c&&(t.target=o,c&&c.attach?setMarker(o,l):setMarker(o,c?p:d))})),n.on(["create.end","create.out","create.cleanup"],(function(e){var t=e.hover;t&&setMarker(t,null)})),n.on("create.end",(function(e){var t=e.context,n=t.source,i=t.shape,r=t.elements,a=t.target,s=t.canExecute,u=s&&s.attach,d=s&&s.connect,l=t.hints||{};if(!1===s||!a)return!1;ensureConstraints(e);var p={x:e.x,y:e.y};d?i=o.appendShape(n,i,p,a,{attach:u,connection:!0===d?{}:d,connectionTarget:l.connectionTarget}):(r=o.createElements(r,p,a,Object(c["assign"])({},l,{attach:u})),i=Object(c["find"])(r,(function(e){return!isConnection(e)}))),Object(c["assign"])(t,{elements:r,shape:i}),Object(c["assign"])(e,{elements:r,shape:i})})),n.on("create.init",(function(){n.on("elements.changed",cancel),n.once(["create.cancel","create.end"],f,(function(){n.off("elements.changed",cancel)}))})),this.start=function(e,n,o){Object(c["isArray"])(n)||(n=[n]);var i=Object(c["find"])(n,(function(e){return!isConnection(e)}));if(i){o=Object(c["assign"])({elements:n,hints:{},shape:i},o||{}),Object(c["forEach"])(n,(function(e){Object(c["isNumber"])(e.x)||(e.x=0),Object(c["isNumber"])(e.y)||(e.y=0)}));var r=Object(s["b"])(n);Object(c["forEach"])(n,(function(e){isConnection(e)&&(e.waypoints=Object(c["map"])(e.waypoints,(function(e){return{x:e.x-r.x-r.width/2,y:e.y-r.y-r.height/2}}))),Object(c["assign"])(e,{x:e.x-r.x-r.width/2,y:e.y-r.y-r.height/2})})),t.init(e,h,{cursor:"grabbing",autoActivate:!0,data:{shape:i,elements:n,context:o}})}}}function ensureConstraints(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function isConnection(e){return!!e.waypoints}function isSingleShape(e){return e&&1===e.length&&!isConnection(e[0])}function isLabel(e){return!!e.labelTarget}Create.$inject=["canvas","dragging","eventBus","modeling","rules"];var v=n("e116"),g=n("da34"),y=n("6b8b"),m=750;function CreatePreview(e,t,n,o,i){function createDragGroup(e){var t=Object(y["f"])("g");Object(y["b"])(t,i.cls("djs-drag-group",["no-events"]));var r=Object(y["f"])("g");return e.forEach((function(e){var i;e.hidden||(e.waypoints?(i=n._createContainer("connection",r),n.drawConnection(Object(g["b"])(i),e)):(i=n._createContainer("shape",r),n.drawShape(Object(g["b"])(i),e),Object(v["c"])(i,e.x,e.y)),o.addDragger(e,t,i))})),t}t.on("create.move",m,(function(t){var n,o=t.hover,i=t.context,r=i.elements,a=i.dragGroup;a||(a=i.dragGroup=createDragGroup(r)),o?(a.parentNode||(n=e.getDefaultLayer(),Object(y["a"])(n,a)),Object(v["c"])(a,t.x,t.y)):Object(y["j"])(a)})),t.on("create.cleanup",(function(e){var t=e.context,n=t.dragGroup;n&&Object(y["j"])(n)}))}CreatePreview.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];t["a"]={__depends__:[o["a"],i["a"],r["a"],a["a"]],__init__:["create","createPreview"],create:["type",Create],createPreview:["type",CreatePreview]}},"39c0":function(e,t,n){"use strict";var o=n("87f2"),i=n("e506"),r=n("78f9"),a=n("6b8b"),c=n("bc2f");function allowAll(e){return!0}var s=500;function InteractionEvents(e,t,n){var u=this;function fire(n,o,i){var r,a,c;isIgnored(n,o)||(i?a=t.getGraphics(i):(r=o.delegateTarget||o.target,r&&(a=r,i=t.get(a))),a&&i&&(c=e.fire(n,{element:i,gfx:a,originalEvent:o}),!1===c&&(o.stopPropagation(),o.preventDefault())))}var d={};function mouseHandler(e){return d[e]}function isIgnored(e,t){var n=p[e]||r["c"];return!n(t)}var l={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},p={"element.contextmenu":allowAll};function triggerMouseEvent(e,t,n){var o=l[e];if(!o)throw new Error("unmapped DOM event name <"+e+">");return fire(o,t,n)}var h="svg, .djs-element";function registerEvent(e,t,n,o){var r=d[n]=function(e){fire(n,e)};o&&(p[n]=o),r.$delegate=i["delegate"].bind(e,h,t,r)}function unregisterEvent(e,t,n){var o=mouseHandler(n);o&&i["delegate"].unbind(e,t,o.$delegate)}function registerEvents(e){Object(o["forEach"])(l,(function(t,n){registerEvent(e,n,t)}))}function unregisterEvents(e){Object(o["forEach"])(l,(function(t,n){unregisterEvent(e,n,t)}))}e.on("canvas.destroy",(function(e){unregisterEvents(e.svg)})),e.on("canvas.init",(function(e){registerEvents(e.svg)})),e.on(["shape.added","connection.added"],(function(t){var n=t.element,o=t.gfx;e.fire("interactionEvents.createHit",{element:n,gfx:o})})),e.on(["shape.changed","connection.changed"],s,(function(t){var n=t.element,o=t.gfx;e.fire("interactionEvents.updateHit",{element:n,gfx:o})})),e.on("interactionEvents.createHit",s,(function(e){var t=e.element,n=e.gfx;u.createDefaultHit(t,n)})),e.on("interactionEvents.updateHit",(function(e){var t=e.element,n=e.gfx;u.updateDefaultHit(t,n)}));var f=createHitStyle("djs-hit djs-hit-stroke"),v=createHitStyle("djs-hit djs-hit-click-stroke"),g=createHitStyle("djs-hit djs-hit-all"),y={all:g,"click-stroke":v,stroke:f};function createHitStyle(e,t){return t=Object(o["assign"])({stroke:"white",strokeWidth:15},t||{}),n.cls(e,["no-fill","no-border"],t)}function applyStyle(e,t){var n=y[t];if(!n)throw new Error("invalid hit type <"+t+">");return Object(a["b"])(e,n),e}function appendHit(e,t){Object(a["a"])(e,t)}this.removeHits=function(e){var t=Object(i["queryAll"])(".djs-hit",e);Object(o["forEach"])(t,a["j"])},this.createDefaultHit=function(e,t){var n,o=e.waypoints,i=e.isFrame;return o?this.createWaypointsHit(t,o):(n=i?"stroke":"all",this.createBoxHit(t,n,{width:e.width,height:e.height}))},this.createWaypointsHit=function(e,t){var n=Object(c["b"])(t);return applyStyle(n,"stroke"),appendHit(e,n),n},this.createBoxHit=function(e,t,n){n=Object(o["assign"])({x:0,y:0},n);var i=Object(a["f"])("rect");return applyStyle(i,t),Object(a["b"])(i,n),appendHit(e,i),i},this.updateDefaultHit=function(e,t){var n=Object(i["query"])(".djs-hit",t);if(n)return e.waypoints?Object(c["c"])(n,e.waypoints):Object(a["b"])(n,{width:e.width,height:e.height}),n},this.fire=fire,this.triggerMouseEvent=triggerMouseEvent,this.mouseHandler=mouseHandler,this.registerEvent=registerEvent,this.unregisterEvent=unregisterEvent}InteractionEvents.$inject=["eventBus","elementRegistry","styles"];t["a"]={__init__:["interactionEvents"],interactionEvents:["type",InteractionEvents]}},"3c9c":function(e,t,n){"use strict";var o=n("39c0"),i=n("c78f"),r=n("b3a6"),a=n("c5b3"),c=n("1cff"),s=n("71f4"),u=n("87f2"),d=n("1025"),l=500,p=1250,h=1500,f=Math.round;function mid(e){return{x:e.x+f(e.width/2),y:e.y+f(e.height/2)}}function MoveEvents(e,t,n,o,i){function canMove(e,t,n,o){return i.allowed("elements.move",{shapes:e,delta:t,position:n,target:o})}function start(e,n,o,i){if(Object(u["isObject"])(o)&&(i=o,o=!1),!n.waypoints&&n.parent){var r=mid(n);return t.init(e,r,"shape.move",{cursor:"grabbing",autoActivate:o,data:{shape:n,context:i||{}}}),!0}}e.on("shape.move.start",h,(function(e){var t=e.context,n=e.shape,i=o.get().slice();-1===i.indexOf(n)&&(i=[n]),i=removeNested(i),Object(u["assign"])(t,{shapes:i,validatedShapes:i,shape:n})})),e.on("shape.move.start",p,(function(e){var t,n=e.context,o=n.validatedShapes;if(t=n.canExecute=canMove(o),!t)return!1})),e.on("shape.move.move",l,(function(e){var t,n=e.context,o=n.validatedShapes,i=e.hover,r={x:e.dx,y:e.dy},a={x:e.x,y:e.y};t=canMove(o,r,a,i),n.delta=r,n.canExecute=t,n.target=null!==t?i:null})),e.on("shape.move.end",(function(e){var t=e.context,o=t.delta,i=t.canExecute,r="attach"===i,a=t.shapes;if(!1===i)return!1;o.x=f(o.x),o.y=f(o.y),0===o.x&&0===o.y||n.moveElements(a,o,t.target,{primaryShape:t.shape,attach:r})})),e.on("element.mousedown",(function(e){var t=Object(d["a"])(e);if(!t)throw new Error("must supply DOM mousedown event");return start(t,e.element)})),this.start=start}function removeNested(e){var t=Object(u["groupBy"])(e,"id");return Object(u["filter"])(e,(function(e){while(e=e.parent)if(t[e.id])return!1;return!0}))}MoveEvents.$inject=["eventBus","dragging","modeling","selection","rules"];var v=n("43c6"),g=n("6b8b"),y=n("e116"),m=499,b="djs-dragging",x="drop-ok",_="drop-not-ok",j="new-parent",O="attach-ok";function MovePreview(e,t,n,o){function getVisualDragShapes(e){var t=getAllDraggedElements(e),n=removeEdges(t);return n}function getAllDraggedElements(e){var t=Object(v["h"])(e,!0),n=Object(u["map"])(t,(function(e){return(e.incoming||[]).concat(e.outgoing||[])}));return Object(u["flatten"])(t.concat(n))}function setMarker(e,n){[O,x,_,j].forEach((function(o){o===n?t.addMarker(e,o):t.removeMarker(e,o)}))}function makeDraggable(e,n,i){o.addDragger(n,e.dragGroup),i&&t.addMarker(n,b),e.allDraggedElements?e.allDraggedElements.push(n):e.allDraggedElements=[n]}e.on("shape.move.start",m,(function(e){var i=e.context,r=i.shapes,a=i.allDraggedElements,c=getVisualDragShapes(r);if(!i.dragGroup){var s=Object(g["f"])("g");Object(g["b"])(s,n.cls("djs-drag-group",["no-events"]));var d=t.getDefaultLayer();Object(g["a"])(d,s),i.dragGroup=s}c.forEach((function(e){o.addDragger(e,i.dragGroup)})),a=a?Object(u["flatten"])([a,getAllDraggedElements(r)]):getAllDraggedElements(r),Object(u["forEach"])(a,(function(e){t.addMarker(e,b)})),i.allDraggedElements=a,i.differentParents=haveDifferentParents(r)})),e.on("shape.move.move",m,(function(e){var t=e.context,n=t.dragGroup,o=t.target,i=t.shape.parent,r=t.canExecute;o&&("attach"===r?setMarker(o,O):t.canExecute&&o&&o.id!==i.id?setMarker(o,j):setMarker(o,t.canExecute?x:_)),Object(y["c"])(n,e.dx,e.dy)})),e.on(["shape.move.out","shape.move.cleanup"],(function(e){var t=e.context,n=t.target;n&&setMarker(n,null)})),e.on("shape.move.cleanup",(function(e){var n=e.context,o=n.allDraggedElements,i=n.dragGroup;Object(u["forEach"])(o,(function(e){t.removeMarker(e,b)})),i&&Object(g["j"])(i)})),this.makeDraggable=makeDraggable}function removeEdges(e){var t=Object(u["filter"])(e,(function(t){return!isConnection(t)||Object(u["find"])(e,Object(u["matchPattern"])({id:t.source.id}))&&Object(u["find"])(e,Object(u["matchPattern"])({id:t.target.id}))}));return t}function haveDifferentParents(e){return 1!==Object(u["size"])(Object(u["groupBy"])(e,(function(e){return e.parent&&e.parent.id})))}function isConnection(e){return e.waypoints}MovePreview.$inject=["eventBus","canvas","styles","previewSupport"];t["a"]={__depends__:[o["a"],i["a"],r["a"],a["a"],c["a"],s["a"]],__init__:["move","movePreview"],move:["type",MoveEvents],movePreview:["type",MovePreview]}},4010:function(e,t,n){"use strict";var o=n("e506"),i=n("96a7");function getStepSize(e,t){var n=Object(i["a"])(e.min),o=Object(i["a"])(e.max),r=Math.abs(n)+Math.abs(o);return r/t}function cap(e,t){return Math.max(e.min,Math.min(e.max,t))}var r=n("87f2"),a=Math.sign||function(e){return e>=0?1:-1},c={min:.2,max:4},s=10,u=.1,d=.75;function ZoomScroll(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=Object(r["bind"])(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||d;var o=this;t.on("canvas.init",(function(t){o._init(!1!==e.enabled)}))}ZoomScroll.$inject=["config.zoomScroll","eventBus","canvas"],ZoomScroll.prototype.scroll=function scroll(e){this._canvas.scroll(e)},ZoomScroll.prototype.reset=function reset(){this._canvas.zoom("fit-viewport")},ZoomScroll.prototype.zoom=function zoom(e,t){var n=getStepSize(c,2*s);this._totalDelta+=e,Math.abs(this._totalDelta)>u&&(this._zoom(e,t,n),this._totalDelta=0)},ZoomScroll.prototype._handleWheel=function handleWheel(e){if(!Object(o["closest"])(e.target,".djs-scrollable",!0)){var t=this._container;e.preventDefault();var n,i=e.ctrlKey,r=e.shiftKey,c=-1*this._scale;if(c*=i?0===e.deltaMode?.02:.32:0===e.deltaMode?1:16,i){var s=t.getBoundingClientRect(),u={x:e.clientX-s.left,y:e.clientY-s.top};n=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*a(e.deltaY)*c,this.zoom(n,u)}else n=r?{dx:c*e.deltaY,dy:0}:{dx:c*e.deltaX,dy:c*e.deltaY},this.scroll(n)}},ZoomScroll.prototype.stepZoom=function stepZoom(e,t){var n=getStepSize(c,s);this._zoom(e,t,n)},ZoomScroll.prototype._zoom=function(e,t,n){var o=this._canvas,r=e>0?1:-1,a=Object(i["a"])(o.zoom()),s=Math.round(a/n)*n;s+=n*r;var u=Math.pow(10,s);o.zoom(cap(c,u),t)},ZoomScroll.prototype.toggle=function toggle(e){var t=this._container,n=this._handleWheel,i=this._enabled;return"undefined"===typeof e&&(e=!i),i!==e&&o["event"][e?"bind":"unbind"](t,"wheel",n,!1),this._enabled=e,e},ZoomScroll.prototype._init=function(e){this.toggle(e)};t["a"]={__init__:["zoomScroll"],zoomScroll:["type",ZoomScroll]}},"43c6":function(e,t,n){"use strict";n.d(t,"e",(function(){return getParents})),n.d(t,"a",(function(){return eachElement})),n.d(t,"h",(function(){return selfAndAllChildren})),n.d(t,"c",(function(){return getClosure})),n.d(t,"b",(function(){return getBBox})),n.d(t,"d",(function(){return getEnclosedElements})),n.d(t,"f",(function(){return getType})),n.d(t,"g",(function(){return isFrameElement}));var o=n("87f2");function getParents(e){return Object(o["filter"])(e,(function(t){return!Object(o["find"])(e,(function(e){return e!==t&&getParent(t,e)}))}))}function getParent(e,t){if(t){if(e===t)return t;if(e.parent)return getParent(e.parent,t)}}function add(e,t,n){var o=!n||-1===e.indexOf(t);return o&&e.push(t),o}function eachElement(e,t,n){n=n||0,Object(o["isArray"])(e)||(e=[e]),Object(o["forEach"])(e,(function(e,i){var r=t(e,i,n);Object(o["isArray"])(r)&&r.length&&eachElement(r,t,n+1)}))}function selfAndChildren(e,t,n){var o=[],i=[];return eachElement(e,(function(e,r,a){add(o,e,t);var c=e.children;if((-1===n||a<n)&&c&&add(i,c,t))return c})),o}function selfAndAllChildren(e,t){return selfAndChildren(e,!t,-1)}function getClosure(e,t,n){Object(o["isUndefined"])(t)&&(t=!0),Object(o["isObject"])(t)&&(n=t,t=!0),n=n||{};var i=copyObject(n.allShapes),r=copyObject(n.allConnections),a=copyObject(n.enclosedElements),c=copyObject(n.enclosedConnections),s=copyObject(n.topLevel,t&&Object(o["groupBy"])(e,(function(e){return e.id})));function handleConnection(e){s[e.source.id]&&s[e.target.id]&&(s[e.id]=[e]),i[e.source.id]&&i[e.target.id]&&(c[e.id]=a[e.id]=e),r[e.id]=e}function handleElement(e){if(a[e.id]=e,!e.waypoints)return i[e.id]=e,Object(o["forEach"])(e.incoming,handleConnection),Object(o["forEach"])(e.outgoing,handleConnection),e.children;c[e.id]=r[e.id]=e}return eachElement(e,handleElement),{allShapes:i,allConnections:r,topLevel:s,enclosedConnections:c,enclosedElements:a}}function getBBox(e,t){var n,i,r,a;return t=!!t,Object(o["isArray"])(e)||(e=[e]),Object(o["forEach"])(e,(function(e){var o=e;e.waypoints&&!t&&(o=getBBox(e.waypoints,!0));var c=o.x,s=o.y,u=o.height||0,d=o.width||0;(c<n||void 0===n)&&(n=c),(s<i||void 0===i)&&(i=s),(c+d>r||void 0===r)&&(r=c+d),(s+u>a||void 0===a)&&(a=s+u)})),{x:n,y:i,height:a-i,width:r-n}}function getEnclosedElements(e,t){var n={};return Object(o["forEach"])(e,(function(e){var i=e;i.waypoints&&(i=getBBox(i)),!Object(o["isNumber"])(t.y)&&i.x>t.x&&(n[e.id]=e),!Object(o["isNumber"])(t.x)&&i.y>t.y&&(n[e.id]=e),i.x>t.x&&i.y>t.y&&(Object(o["isNumber"])(t.width)&&Object(o["isNumber"])(t.height)&&i.width+i.x<t.width+t.x&&i.height+i.y<t.height+t.y?n[e.id]=e:Object(o["isNumber"])(t.width)&&Object(o["isNumber"])(t.height)||(n[e.id]=e))})),n}function getType(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function isFrameElement(e){return!(!e||!e.isFrame)}function copyObject(e,t){return Object(o["assign"])({},e||{},t||{})}},"44cc":function(e,t,n){"use strict";n.d(t,"a",(function(){return SnapContext}));var o=n("87f2"),i=n("9f71");function SnapContext(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}function SnapPoints(e){this._snapValues={}}SnapContext.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]},SnapContext.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,-1===this._snapLocations.indexOf(e)&&this._snapLocations.push(e)},SnapContext.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)},SnapContext.prototype.getSnapLocations=function(){return this._snapLocations},SnapContext.prototype.setSnapLocations=function(e){this._snapLocations=e},SnapContext.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new SnapPoints,n.initDefaults(this._defaultSnaps)),n},SnapPoints.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),-1===n.x.indexOf(t.x)&&n.x.push(t.x),-1===n.y.indexOf(t.y)&&n.y.push(t.y)},SnapPoints.prototype.snap=function(e,t,n,o){var r=this._snapValues[t];return r&&Object(i["f"])(e[n],r[n],o)},SnapPoints.prototype.initDefaults=function(e){var t=this;Object(o["forEach"])(e||{},(function(e,n){Object(o["forEach"])(e,(function(e){t.add(n,e)}))}))}},4672:function(e,t,n){"use strict";var o=n("87f2"),i=n("e506"),r=n("43c6"),a=n("1651"),c=new a["a"]("ov"),s=500;function Overlays(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=c,this._overlayDefaults=Object(o["assign"])({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=createRoot(n.getContainer()),this._init()}function createRoot(e){var t=Object(i["domify"])('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');return e.insertBefore(t,e.firstChild),t}function setPosition(e,t,n){Object(o["assign"])(e.style,{left:t+"px",top:n+"px"})}function setVisible(e,t){e.style.display=!1===t?"none":""}function setTransform(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach((function(n){e.style[n+"transform"]=t}))}Overlays.$inject=["config.overlays","eventBus","canvas","elementRegistry"],Overlays.prototype.get=function(e){if(Object(o["isString"])(e)&&(e={id:e}),Object(o["isString"])(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?Object(o["filter"])(t.overlays,Object(o["matchPattern"])({type:e.type})):t.overlays.slice():[]}return e.type?Object(o["filter"])(this._overlays,Object(o["matchPattern"])({type:e.type})):e.id?this._overlays[e.id]:null},Overlays.prototype.add=function(e,t,n){if(Object(o["isObject"])(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=Object(o["assign"])({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i},Overlays.prototype.remove=function(e){var t=this.get(e)||[];Object(o["isArray"])(t)||(t=[t]);var n=this;Object(o["forEach"])(t,(function(e){var t=n._getOverlayContainer(e.element,!0);if(e&&(Object(i["remove"])(e.html),Object(i["remove"])(e.htmlContainer),delete e.htmlContainer,delete e.element,delete n._overlays[e.id]),t){var o=t.overlays.indexOf(e);-1!==o&&t.overlays.splice(o,1)}}))},Overlays.prototype.show=function(){setVisible(this._overlayRoot)},Overlays.prototype.hide=function(){setVisible(this._overlayRoot,!1)},Overlays.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Object(i["clear"])(this._overlayRoot)},Overlays.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,o=t.x,a=t.y;if(t.waypoints){var c=Object(r["b"])(t);o=c.x,a=c.y}setPosition(n,o,a),Object(i["attr"])(e.html,"data-container-id",t.id)},Overlays.prototype._updateOverlay=function(e){var t,n,o=e.position,i=e.htmlContainer,a=e.element,c=o.left,s=o.top;void 0!==o.right&&(t=a.waypoints?Object(r["b"])(a).width:a.width,c=-1*o.right+t);void 0!==o.bottom&&(n=a.waypoints?Object(r["b"])(a).height:a.height,s=-1*o.bottom+n);setPosition(i,c||0,s||0)},Overlays.prototype._createOverlayContainer=function(e){var t=Object(i["domify"])('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},Overlays.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";setTransform(this._overlayRoot,n)},Overlays.prototype._getOverlayContainer=function(e,t){var n=Object(o["find"])(this._overlayContainers,(function(t){return t.element===e}));return n||t?n:this._createOverlayContainer(e)},Overlays.prototype._addOverlay=function(e){var t,n,r=e.id,a=e.element,c=e.html;c.get&&c.constructor.prototype.jquery&&(c=c.get(0)),Object(o["isString"])(c)&&(c=Object(i["domify"])(c)),n=this._getOverlayContainer(a),t=Object(i["domify"])('<div class="djs-overlay" data-overlay-id="'+r+'" style="position: absolute">'),t.appendChild(c),e.type&&Object(i["classes"])(t).add("djs-overlay-"+e.type),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[r]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},Overlays.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=n&&n.minZoom,r=n&&n.maxZoom,a=e.htmlContainer,c=!0;n&&((Object(o["isDefined"])(i)&&i>t.scale||Object(o["isDefined"])(r)&&r<t.scale)&&(c=!1),setVisible(a,c)),this._updateOverlayScale(e,t)},Overlays.prototype._updateOverlayScale=function(e,t){var n,i,r,a=e.scale,c=e.htmlContainer,s="";!0!==a&&(!1===a?(n=1,i=1):(n=a.min,i=a.max),Object(o["isDefined"])(n)&&t.scale<n&&(r=(1/t.scale||1)*n),Object(o["isDefined"])(i)&&t.scale>i&&(r=(1/t.scale||1)*i)),Object(o["isDefined"])(r)&&(s="scale("+r+","+r+")"),setTransform(c,s)},Overlays.prototype._updateOverlaysVisibilty=function(e){var t=this;Object(o["forEach"])(this._overlays,(function(n){t._updateOverlayVisibilty(n,e)}))},Overlays.prototype._init=function(){var e=this._eventBus,t=this;function updateViewbox(e){t._updateRoot(e),t._updateOverlaysVisibilty(e),t.show()}e.on("canvas.viewbox.changing",(function(e){t.hide()})),e.on("canvas.viewbox.changed",(function(e){updateViewbox(e.viewbox)})),e.on(["shape.remove","connection.remove"],(function(e){var n=e.element,r=t.get({element:n});Object(o["forEach"])(r,(function(e){t.remove(e.id)}));var a=t._getOverlayContainer(n);if(a){Object(i["remove"])(a.html);var c=t._overlayContainers.indexOf(a);-1!==c&&t._overlayContainers.splice(c,1)}})),e.on("element.changed",s,(function(e){var n=e.element,i=t._getOverlayContainer(n,!0);i&&(Object(o["forEach"])(i.overlays,(function(e){t._updateOverlay(e)})),t._updateOverlayContainer(i))})),e.on("element.marker.update",(function(e){var n=t._getOverlayContainer(e.element,!0);n&&Object(i["classes"])(n.html)[e.add?"add":"remove"](e.marker)})),e.on("diagram.clear",this.clear,this)};t["a"]={__init__:["overlays"],overlays:["type",Overlays]}},4888:function(e,t,n){"use strict";n.d(t,"a",(function(){return ElementFactory}));var o=n("dd5f"),i=n("87f2");function ElementFactory(){this._uid=12}ElementFactory.prototype.createRoot=function(e){return this.create("root",e)},ElementFactory.prototype.createLabel=function(e){return this.create("label",e)},ElementFactory.prototype.createShape=function(e){return this.create("shape",e)},ElementFactory.prototype.createConnection=function(e){return this.create("connection",e)},ElementFactory.prototype.create=function(e,t){return t=Object(i["assign"])({},t||{}),t.id||(t.id=e+"_"+this._uid++),Object(o["c"])(e,t)}},"4ae2":function(e,t,n){"use strict";n.d(t,"a",(function(){return RuleProvider}));var o=n("3fb5"),i=n.n(o),r=n("3413");function RuleProvider(e){r["a"].call(this,e),this.init()}RuleProvider.$inject=["eventBus"],i()(RuleProvider,r["a"]),RuleProvider.prototype.addRule=function(e,t,n){var o=this;"string"===typeof e&&(e=[e]),e.forEach((function(e){o.canExecute(e,t,(function(e,t,o){return n(e)}),!0)}))},RuleProvider.prototype.init=function(){}},"4bee":function(e,t,n){"use strict";var o=n("87f2"),i=n("e506"),r=".djs-palette-toggle",a=".entry",c=r+", "+a,s="open",u="two-column",d=1e3;function Palette(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",(function(e){var t=e.tool;n.updateToolHighlight(t)})),e.on("i18n.changed",(function(){n._update()})),e.on("diagram.init",(function(){n._diagramInitialized=!0,n._rebuild()}))}function addClasses(e,t){var n=Object(i["classes"])(e),r=Object(o["isArray"])(t)?t:t.split(/\s+/g);r.forEach((function(e){n.add(e)}))}function addPaletteEntries(e,t){var n=t.getPaletteEntries();return Object(o["isFunction"])(n)?n(e):(Object(o["forEach"])(n,(function(t,n){e[n]=t})),e)}Palette.$inject=["eventBus","canvas"],Palette.prototype.registerProvider=function(e,t){t||(t=e,e=d),this._eventBus.on("palette.getProviders",e,(function(e){e.providers.push(t)})),this._rebuild()},Palette.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(addPaletteEntries,{})},Palette.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}},Palette.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),o=this._container=Object(i["domify"])(Palette.HTML_MARKUP);n.appendChild(o),i["delegate"].bind(o,c,"click",(function(t){var n=t.delegateTarget;if(Object(i["matches"])(n,r))return e.toggle();e.trigger("click",t)})),i["event"].bind(o,"mousedown",(function(e){e.stopPropagation()})),i["delegate"].bind(o,a,"dragstart",(function(t){e.trigger("dragstart",t)})),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:o})},Palette.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},Palette.prototype._toggleState=function(e){e=e||{};var t,n=this._getParentContainer(),o=this._container,r=this._eventBus,a=Object(i["classes"])(o);t="twoColumn"in e?e.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),a.toggle(u,t),"open"in e&&a.toggle(s,e.open),r.fire("palette.changed",{twoColumn:t,open:this.isOpen()})},Palette.prototype._update=function(){var e=Object(i["query"])(".djs-palette-entries",this._container),t=this._entries=this.getEntries();Object(i["clear"])(e),Object(o["forEach"])(t,(function(t,n){var o=t.group||"default",r=Object(i["query"])("[data-group="+o+"]",e);r||(r=Object(i["domify"])('<div class="group" data-group="'+o+'"></div>'),e.appendChild(r));var a=t.html||(t.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),c=Object(i["domify"])(a);r.appendChild(c),t.separator||(Object(i["attr"])(c,"data-action",n),t.title&&Object(i["attr"])(c,"title",t.title),t.className&&addClasses(c,t.className),t.imageUrl&&c.appendChild(Object(i["domify"])('<img src="'+t.imageUrl+'">')))})),this.open()},Palette.prototype.trigger=function(e,t,n){var r,a,c,s=this._entries,u=t.delegateTarget||t.target;if(!u)return t.preventDefault();r=s[Object(i["attr"])(u,"data-action")],r&&(a=r.action,c=t.originalEvent||t,Object(o["isFunction"])(a)?"click"===e&&a(c,n):a[e]&&a[e](c,n),t.preventDefault())},Palette.prototype._layoutChanged=function(){this._toggleState({})},Palette.prototype._needsCollapse=function(e,t){var n=50,o=46*Object.keys(t).length;return e<o+n},Palette.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},Palette.prototype.open=function(){this._toggleState({open:!0})},Palette.prototype.toggle=function(e){this.isOpen()?this.close():this.open()},Palette.prototype.isActiveTool=function(e){return e&&this._activeTool===e},Palette.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=Object(i["query"])(".djs-palette-entries",this._container),this._toolsContainer=Object(i["query"])("[data-group=tools]",t)),n=this._toolsContainer,Object(o["forEach"])(n.children,(function(t){var n=t.getAttribute("data-action");if(n){var o=Object(i["classes"])(t);n=n.replace("-tool",""),o.contains("entry")&&n===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}}))},Palette.prototype.isOpen=function(){return Object(i["classes"])(this._container).has(s)},Palette.prototype._getParentContainer=function(){return this._canvas.getContainer()},Palette.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';t["a"]={__init__:["palette"],palette:["type",Palette]}},"4cea":function(e,t,n){"use strict";n.d(t,"a",(function(){return BaseLayouter}));var o=n("2e42");function BaseLayouter(){}BaseLayouter.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||Object(o["e"])(t.source||e.source),t.connectionEnd||Object(o["e"])(t.target||e.target)]}},"4e09":function(e,t,n){"use strict";var o=n("1cff"),i=n("87f2"),r=n("e506"),a=250;function ToolManager(e,t){this._eventBus=e,this._dragging=t,this._tools=[],this._active=null}ToolManager.$inject=["eventBus","dragging"],ToolManager.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error('A tool has to be registered with it\'s "events"');n.push(e),this.bindEvents(e,t)},ToolManager.prototype.isActive=function(e){return e&&this._active===e},ToolManager.prototype.length=function(e){return this._tools.length},ToolManager.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))},ToolManager.prototype.bindEvents=function(e,t){var n=this._eventBus,o=this._dragging,c=[];n.on(t.tool+".init",(function(t){var n=t.context;if(!n.reactivate&&this.isActive(e))return this.setActive(null),void o.cancel();this.setActive(e)}),this),Object(i["forEach"])(t,(function(e){c.push(e+".ended"),c.push(e+".canceled")})),n.on(c,a,(function(e){var t=e.originalEvent;this._active&&(t&&Object(r["closest"])(t.target,'.group[data-group="tools"]')||this.setActive(null))}),this)};t["a"]={__depends__:[o["a"]],__init__:["toolManager"],toolManager:["type",ToolManager]}},"4e3a":function(e,t,n){"use strict";n.d(t,"a",(function(){return getDirection})),n.d(t,"b",(function(){return getWaypointsUpdatingConnections})),n.d(t,"c",(function(){return resizeBounds}));var o=n("87f2");function getDirection(e,t){if("x"===e){if(t>0)return"e";if(t<0)return"w"}if("y"===e){if(t>0)return"s";if(t<0)return"n"}return null}function getWaypointsUpdatingConnections(e,t){var n=[];return Object(o["forEach"])(e.concat(t),(function(i){var r=i.incoming,a=i.outgoing;Object(o["forEach"])(r.concat(a),(function(o){var i=o.source,r=o.target;(includes(e,i)||includes(e,r)||includes(t,i)||includes(t,r))&&(includes(n,o)||n.push(o))}))})),n}function includes(e,t){return-1!==e.indexOf(t)}function resizeBounds(e,t,n){var o=e.x,i=e.y,r=e.width,a=e.height,c=n.x,s=n.y;switch(t){case"n":return{x:o,y:i+s,width:r,height:a-s};case"s":return{x:o,y:i,width:r,height:a+s};case"w":return{x:o+c,y:i,width:r-c,height:a};case"e":return{x:o,y:i,width:r+c,height:a};default:throw new Error("unknown direction: "+t)}}},"55e5":function(e,t,n){"use strict";var o=n("9f71"),i=n("1502"),r=n("87f2"),a=10;function quantize(e,t,n){return n||(n="round"),Math[n](e/t)*t}var c=1200,s=800;function GridSnapping(e,t,n){var a=!n||!1!==n.active;this._eventBus=t;var u=this;t.on("diagram.init",s,(function(){u.setActive(a)})),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],c,(function(t){var n=t.originalEvent;if(!(!u.active||n&&Object(i["b"])(n))){var a=t.context,c=a.gridSnappingContext;c||(c=a.gridSnappingContext={}),["x","y"].forEach((function(n){var i={},a=getSnapOffset(t,n,e);a&&(i.offset=a);var c=getSnapConstraints(t,n);c&&Object(r["assign"])(i,c),Object(o["c"])(t,n)||u.snapEvent(t,n,i)}))}}))}function getSnapConstraints(e,t){var n=e.context,o=n.createConstraints,i=n.resizeConstraints||{},r=n.gridSnappingContext,a=r.snapConstraints;if(a&&a[t])return a[t];a||(a=r.snapConstraints={}),a[t]||(a[t]={});var c=n.direction;o&&(isHorizontal(t)?(a.x.min=o.left,a.x.max=o.right):(a.y.min=o.top,a.y.max=o.bottom));var s=i.min,u=i.max;return s&&(isHorizontal(t)?isWest(c)?a.x.max=s.left:a.x.min=s.right:isNorth(c)?a.y.max=s.top:a.y.min=s.bottom),u&&(isHorizontal(t)?isWest(c)?a.x.min=u.left:a.x.max=u.right:isNorth(c)?a.y.min=u.top:a.y.max=u.bottom),a[t]}function getSnapOffset(e,t,n){var o=e.context,i=e.shape,a=o.gridSnappingContext,c=a.snapLocation,s=a.snapOffset;return s&&Object(r["isNumber"])(s[t])?s[t]:(s||(s=a.snapOffset={}),Object(r["isNumber"])(s[t])||(s[t]=0),i?(n.get(i.id)||(isHorizontal(t)?s[t]+=i[t]+i.width/2:s[t]+=i[t]+i.height/2),c?("x"===t?/left/.test(c)?s[t]-=i.width/2:/right/.test(c)&&(s[t]+=i.width/2):/top/.test(c)?s[t]-=i.height/2:/bottom/.test(c)&&(s[t]+=i.height/2),s[t]):s[t]):s[t])}function isHorizontal(e){return"x"===e}function isNorth(e){return-1!==e.indexOf("n")}function isWest(e){return-1!==e.indexOf("w")}GridSnapping.prototype.snapEvent=function(e,t,n){var i=this.snapValue(e[t],n);Object(o["e"])(e,t,i)},GridSnapping.prototype.getGridSpacing=function(){return a},GridSnapping.prototype.snapValue=function(e,t){var n,o,i=0;return t&&t.offset&&(i=t.offset),e+=i,e=quantize(e,a),t&&t.min&&(n=t.min,Object(r["isNumber"])(n)&&(n=quantize(n+i,a,"ceil"),e=Math.max(e,n))),t&&t.max&&(o=t.max,Object(r["isNumber"])(o)&&(o=quantize(o+i,a,"floor"),e=Math.min(e,o))),e-=i,e},GridSnapping.prototype.isActive=function(){return this.active},GridSnapping.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})},GridSnapping.prototype.toggleActive=function(){this.setActive(!this.active)},GridSnapping.$inject=["elementRegistry","eventBus","config.gridSnapping"];var u=n("3fb5"),d=n.n(u),l=n("3413");function ResizeBehavior(e,t){l["a"].call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",(function(e){var t=e.context,o=t.hints||{},i=o.autoResize;if(i){var a=t.shape,c=t.newBounds;Object(r["isString"])(i)?t.newBounds=n.snapComplex(c,i):t.newBounds=n.snapSimple(a,c)}}))}ResizeBehavior.$inject=["eventBus","gridSnapping","modeling"],d()(ResizeBehavior,l["a"]),ResizeBehavior.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t},ResizeBehavior.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e},ResizeBehavior.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,o=/w/.test(t),i=/e/.test(t),a={};return a.width=n.snapValue(e.width,{min:e.width}),i&&(o?(a.x=n.snapValue(e.x,{max:e.x}),a.width+=n.snapValue(e.x-a.x,{min:e.x-a.x})):e.x=e.x+e.width-a.width),Object(r["assign"])(e,a),e},ResizeBehavior.prototype.snapVertically=function(e,t){var n=this._gridSnapping,o=/n/.test(t),i=/s/.test(t),a={};return a.height=n.snapValue(e.height,{min:e.height}),o&&(i?(a.y=n.snapValue(e.y,{max:e.y}),a.height+=n.snapValue(e.y-a.y,{min:e.y-a.y})):e.y=e.y+e.height-a.height),Object(r["assign"])(e,a),e};var p=2e3;function SpaceToolBehavior(e,t){e.on(["spaceTool.move","spaceTool.end"],p,(function(e){var n=e.context;if(n.initialized){var o,i=n.axis;"x"===i?(o=t.snapValue(e.dx),e.x=e.x+o-e.dx,e.dx=o):(o=t.snapValue(e.dy),e.y=e.y+o-e.dy,e.dy=o)}}))}SpaceToolBehavior.$inject=["eventBus","gridSnapping"];var h={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",ResizeBehavior],gridSnappingSpaceToolBehavior:["type",SpaceToolBehavior]};t["a"]={__depends__:[h],__init__:["gridSnapping"],gridSnapping:["type",GridSnapping]}},5684:function(e,t,n){"use strict";n.d(t,"a",(function(){return OrderingProvider}));var o=n("3fb5"),i=n.n(o),r=n("3413");function OrderingProvider(e){r["a"].call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],(function(e){var n=e.context,o=n.shape||n.connection,i=n.parent,r=t.getOrdering(o,i);r&&(void 0!==r.parent&&(n.parent=r.parent),n.parentIndex=r.index)})),this.preExecute(["shape.move","connection.move"],(function(e){var n=e.context,o=n.shape||n.connection,i=n.newParent||o.parent,r=t.getOrdering(o,i);r&&(void 0!==r.parent&&(n.newParent=r.parent),n.newParentIndex=r.index)}))}OrderingProvider.prototype.getOrdering=function(e,t){return null},i()(OrderingProvider,r["a"])},"5dee":function(e,t,n){"use strict";var o=n("87f2");function CommandStack(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[]},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],(function(){this.clear(!1)}),this)}CommandStack.$inject=["eventBus","injector"],CommandStack.prototype.execute=function(e,t){if(!e)throw new Error("command required");var n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction(n)},CommandStack.prototype.canExecute=function(e,t){var n={command:e,context:t},o=this._getHandler(e),i=this._fire(e,"canExecute",n);if(void 0===i){if(!o)return!1;o.canExecute&&(i=o.canExecute(t))}return i},CommandStack.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,!1!==e&&this._fire("changed")},CommandStack.prototype.undo=function(){var e,t=this._getUndoAction();if(t){this._pushAction(t);while(t){if(this._internalUndo(t),e=this._getUndoAction(),!e||e.id!==t.id)break;t=e}this._popAction()}},CommandStack.prototype.redo=function(){var e,t=this._getRedoAction();if(t){this._pushAction(t);while(t){if(this._internalExecute(t,!0),e=this._getRedoAction(),!e||e.id!==t.id)break;t=e}this._popAction()}},CommandStack.prototype.register=function(e,t){this._setHandler(e,t)},CommandStack.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(t);this.register(e,n)},CommandStack.prototype.canUndo=function(){return!!this._getUndoAction()},CommandStack.prototype.canRedo=function(){return!!this._getRedoAction()},CommandStack.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},CommandStack.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},CommandStack.prototype._internalUndo=function(e){var t=this,n=e.command,o=e.context,i=this._getHandler(n);this._atomicDo((function(){t._fire(n,"revert",e),i.revert&&t._markDirty(i.revert(o)),t._revertedAction(e),t._fire(n,"reverted",e)}))},CommandStack.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);var o,i,r,a=t?[e+"."+t,t]:[e];for(n=this._eventBus.createEvent(n),o=0;i=a[o];o++)if(r=this._eventBus.fire("commandStack."+i,n),n.cancelBubble)break;return r},CommandStack.prototype._createId=function(){return this._uid++},CommandStack.prototype._atomicDo=function(e){var t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},CommandStack.prototype._internalExecute=function(e,t){var n=this,o=e.command,i=e.context,r=this._getHandler(o);if(!r)throw new Error("no command handler registered for <"+o+">");this._pushAction(e),t||(this._fire(o,"preExecute",e),r.preExecute&&r.preExecute(i),this._fire(o,"preExecuted",e)),this._atomicDo((function(){n._fire(o,"execute",e),r.execute&&n._markDirty(r.execute(i)),n._executedAction(e,t),n._fire(o,"executed",e)})),t||(this._fire(o,"postExecute",e),r.postExecute&&r.postExecute(i),this._fire(o,"postExecuted",e)),this._popAction(e)},CommandStack.prototype._pushAction=function(e){var t=this._currentExecution,n=t.actions,o=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=o&&o.id||this._createId()),n.push(e)},CommandStack.prototype._popAction=function(){var e=this._currentExecution,t=e.actions,n=e.dirty;t.pop(),t.length||(this._eventBus.fire("elements.changed",{elements:Object(o["uniqueBy"])("id",n.reverse())}),n.length=0,this._fire("changed"))},CommandStack.prototype._markDirty=function(e){var t=this._currentExecution;e&&(e=Object(o["isArray"])(e)?e:[e],t.dirty=t.dirty.concat(e))},CommandStack.prototype._executedAction=function(e,t){var n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},CommandStack.prototype._revertedAction=function(e){this._stackIdx--},CommandStack.prototype._getHandler=function(e){return this._handlerMap[e]},CommandStack.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};t["a"]={commandStack:["type",CommandStack]}},"5efa":function(e,t,n){"use strict";n.d(t,"a",(function(){return getNewAttachPoint})),n.d(t,"b",(function(){return getNewAttachShapeDelta}));var o=n("2e42"),i=n("acb6");function getNewAttachPoint(e,t,n){var r=Object(i["a"])(t),a=Object(i["a"])(n),c=Object(i["b"])(e,r),s={x:c.x*(n.width/t.width),y:c.y*(n.height/t.height)};return Object(o["h"])({x:a.x+s.x,y:a.y+s.y})}function getNewAttachShapeDelta(e,t,n){var r=Object(i["a"])(e),a=Object(i["a"])(t),c=Object(i["a"])(n),s=Object(i["b"])(e,r),u=Object(i["b"])(r,a),d=getStickyPositionDelta(r,t,n);if(d)return d;var l={x:u.x*(n.width/t.width),y:u.y*(n.height/t.height)},p={x:c.x+l.x,y:c.y+l.y};return Object(o["h"])({x:p.x+s.x-e.x,y:p.y+s.y-e.y})}function getStickyPositionDelta(e,t,n){var i=Object(o["b"])(t),r=Object(o["b"])(n);if(isMoved(i,r))return null;var a,c,s,u=Object(o["f"])(t,e);if("top"===u)a={x:0,y:r.bottom-i.bottom};else if("bottom"===u)a={x:0,y:r.top-i.top};else if("right"===u)a={x:r.left-i.left,y:0};else{if("left"!==u)return null;a={x:r.right-i.right,y:0}}return c={x:e.x+a.x,y:e.y+a.y},s=Object(o["f"])(n,c),s!==u?null:a}function isMoved(e,t){return isHorizontallyMoved(e,t)||isVerticallyMoved(e,t)}function isHorizontallyMoved(e,t){return e.right!==t.right&&e.left!==t.left}function isVerticallyMoved(e,t){return e.top!==t.top&&e.bottom!==t.bottom}},"61f7":function(e,t,n){"use strict";var o=n("4e09"),i=n("87f2"),r=n("43c6"),a=n("78f9"),c=n("6b8b"),s="crosshair";function LassoTool(e,t,n,o,i,r){this._selection=i,this._dragging=n;var s=this,u={create:function(e){var n,o=t.getDefaultLayer();n=e.frame=Object(c["f"])("rect"),Object(c["b"])(n,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),Object(c["a"])(o,n)},update:function(e){var t=e.frame,n=e.bbox;Object(c["b"])(t,{x:n.x,y:n.y,width:n.width,height:n.height})},remove:function(e){e.frame&&Object(c["j"])(e.frame)}};r.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",(function(t){var n=t.originalEvent.target;(t.hover||n instanceof SVGElement)&&e.once("lasso.selection.ended",(function(){s.activateLasso(t.originalEvent,!0)}))})),e.on("lasso.end",(function(e){var t=toBBox(e),n=o.filter((function(e){return e}));s.select(n,t)})),e.on("lasso.start",(function(e){var t=e.context;t.bbox=toBBox(e),u.create(t)})),e.on("lasso.move",(function(e){var t=e.context;t.bbox=toBBox(e),u.update(t)})),e.on("lasso.cleanup",(function(e){var t=e.context;u.remove(t)})),e.on("element.mousedown",1500,(function(e){if(Object(a["b"])(e))return s.activateLasso(e.originalEvent),!0}))}function toBBox(e){var t,n={x:e.x-e.dx,y:e.y-e.dy},o={x:e.x,y:e.y};return t=n.x<=o.x&&n.y<o.y||n.x<o.x&&n.y<=o.y?{x:n.x,y:n.y,width:o.x-n.x,height:o.y-n.y}:n.x>=o.x&&n.y<o.y||n.x>o.x&&n.y<=o.y?{x:o.x,y:n.y,width:n.x-o.x,height:o.y-n.y}:n.x<=o.x&&n.y>o.y||n.x<o.x&&n.y>=o.y?{x:n.x,y:o.y,width:o.x-n.x,height:n.y-o.y}:n.x>=o.x&&n.y>o.y||n.x>o.x&&n.y>=o.y?{x:o.x,y:o.y,width:n.x-o.x,height:n.y-o.y}:{x:o.x,y:o.y,width:0,height:0},t}LassoTool.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager"],LassoTool.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:s,data:{context:{}}})},LassoTool.prototype.activateSelection=function(e){this._dragging.init(e,"lasso.selection",{trapClick:!1,cursor:s,data:{context:{}}})},LassoTool.prototype.select=function(e,t){var n=Object(r["d"])(e,t);this._selection.select(Object(i["values"])(n))},LassoTool.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},LassoTool.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};t["a"]={__depends__:[o["a"]],__init__:["lassoTool"],lassoTool:["type",LassoTool]}},"622c":function(e,t,n){"use strict";n.d(t,"a",(function(){return CroppingConnectionDocking}));var o=n("87f2"),i=n("2e42");function dockingToPoint(e){return Object(o["assign"])({original:e.point.original||e.point},e.actual)}function CroppingConnectionDocking(e,t){this._elementRegistry=e,this._graphicsFactory=t}CroppingConnectionDocking.$inject=["elementRegistry","graphicsFactory"],CroppingConnectionDocking.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var o=this.getDockingPoint(e,t,!0),i=this.getDockingPoint(e,n),r=e.waypoints.slice(o.idx+1,i.idx);return r.unshift(dockingToPoint(o)),r.push(dockingToPoint(i)),r},CroppingConnectionDocking.prototype.getDockingPoint=function(e,t,n){var o,i,r,a=e.waypoints;return o=n?0:a.length-1,i=a[o],r=this._getIntersection(t,e,n),{point:i,actual:r||i,idx:o}},CroppingConnectionDocking.prototype._getIntersection=function(e,t,n){var o=this._getShapePath(e),r=this._getConnectionPath(t);return Object(i["d"])(o,r,n)},CroppingConnectionDocking.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)},CroppingConnectionDocking.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)},CroppingConnectionDocking.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)}},"63c4":function(e,t,n){"use strict";n.d(t,"a",(function(){return Modeling}));var o=n("87f2"),i=n("dd5f");function AlignElements(e,t){this._modeling=e,this._canvas=t}function AppendShapeHandler(e){this._modeling=e}function existsConnection(e,t){return Object(o["some"])(e.outgoing,(function(e){return e.target===t}))}function CreateConnectionHandler(e,t){this._canvas=e,this._layouter=t}AlignElements.$inject=["modeling","canvas"],AlignElements.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;Object(o["forEach"])(n,(function(e){var n={x:0,y:0};i.left?n.x=i.left-e.x:i.right?n.x=i.right-e.width-e.x:i.center?n.x=i.center-Math.round(e.width/2)-e.x:i.top?n.y=i.top-e.y:i.bottom?n.y=i.bottom-e.height-e.y:i.middle&&(n.y=i.middle-Math.round(e.height/2)-e.y),t.moveElements([e],n,e.parent)}))},AlignElements.prototype.postExecute=function(e){},AppendShapeHandler.$inject=["modeling"],AppendShapeHandler.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,o=e.shape,i=e.hints||{};o=e.shape=this._modeling.createShape(o,e.position,n,{attach:i.attach}),e.shape=o},AppendShapeHandler.prototype.postExecute=function(e){var t=e.hints||{};existsConnection(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))},CreateConnectionHandler.$inject=["canvas","layouter"],CreateConnectionHandler.prototype.execute=function(e){var t=e.connection,n=e.source,o=e.target,i=e.parent,r=e.parentIndex,a=e.hints;if(!n||!o)throw new Error("source and target required");if(!i)throw new Error("parent required");return t.source=n,t.target=o,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,i,r),t},CreateConnectionHandler.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var r=n("43c6"),a=Math.round;function CreateElementsHandler(e){this._modeling=e}function isConnection(e){return!!e.waypoints}CreateElementsHandler.$inject=["modeling"],CreateElementsHandler.prototype.preExecute=function(e){var t=e.elements,n=e.parent,i=e.parentIndex,c=e.position,s=e.hints,u=this._modeling;Object(o["forEach"])(t,(function(e){Object(o["isNumber"])(e.x)||(e.x=0),Object(o["isNumber"])(e.y)||(e.y=0)}));var d=Object(r["b"])(t);Object(o["forEach"])(t,(function(e){isConnection(e)&&(e.waypoints=Object(o["map"])(e.waypoints,(function(e){return{x:a(e.x-d.x-d.width/2+c.x),y:a(e.y-d.y-d.height/2+c.y)}}))),Object(o["assign"])(e,{x:a(e.x-d.x-d.width/2+c.x),y:a(e.y-d.y-d.height/2+c.y)})}));var l=Object(r["e"])(t),p={};Object(o["forEach"])(t,(function(e){if(isConnection(e))p[e.id]=Object(o["isNumber"])(i)?u.createConnection(p[e.source.id],p[e.target.id],i,e,e.parent||n,s):u.createConnection(p[e.source.id],p[e.target.id],e,e.parent||n,s);else{var t=Object(o["assign"])({},s);-1===l.indexOf(e)&&(t.autoResize=!1),p[e.id]=Object(o["isNumber"])(i)?u.createShape(e,Object(o["pick"])(e,["x","y","width","height"]),e.parent||n,i,t):u.createShape(e,Object(o["pick"])(e,["x","y","width","height"]),e.parent||n,t)}})),e.elements=Object(o["values"])(p)};var c=n("3fb5"),s=n.n(c),u=Math.round;function CreateShapeHandler(e){this._canvas=e}function CreateLabelHandler(e){CreateShapeHandler.call(this,e)}CreateShapeHandler.$inject=["canvas"],CreateShapeHandler.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,r=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return void 0!==n.width?Object(o["assign"])(t,n):Object(o["assign"])(t,{x:n.x-u(t.width/2),y:n.y-u(t.height/2)}),this._canvas.addShape(t,i,r),t},CreateShapeHandler.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t},s()(CreateLabelHandler,CreateShapeHandler),CreateLabelHandler.$inject=["canvas"];var d=CreateShapeHandler.prototype.execute;CreateLabelHandler.prototype.execute=function(e){var t=e.shape;return ensureValidDimensions(t),t.labelTarget=e.labelTarget,d.call(this,e)};var l=CreateShapeHandler.prototype.revert;function ensureValidDimensions(e){["width","height"].forEach((function(t){"undefined"===typeof e[t]&&(e[t]=0)}))}CreateLabelHandler.prototype.revert=function(e){return e.shape.labelTarget=null,l.call(this,e)};var p=n("ea6d");function DeleteConnectionHandler(e,t){this._canvas=e,this._modeling=t}function DeleteElementsHandler(e,t){this._modeling=e,this._elementRegistry=t}DeleteConnectionHandler.$inject=["canvas","modeling"],DeleteConnectionHandler.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=Object(p["indexOf"])(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t},DeleteConnectionHandler.prototype.revert=function(e){var t=e.connection,n=e.parent,o=e.parentIndex;return t.source=e.source,t.target=e.target,Object(p["add"])(n.children,t,o),this._canvas.addConnection(t,n),t},DeleteElementsHandler.$inject=["modeling","elementRegistry"],DeleteElementsHandler.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,i=e.elements;Object(o["forEach"])(i,(function(e){n.get(e.id)&&(e.waypoints?t.removeConnection(e):t.removeShape(e))}))};var h=n("b2fc");function DeleteShapeHandler(e,t){this._canvas=e,this._modeling=t}function DeleteShapeHandler_isConnection(e){return e.waypoints}function DistributeElements(e){this._modeling=e}DeleteShapeHandler.$inject=["canvas","modeling"],DeleteShapeHandler.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;Object(h["a"])(n.incoming,(function(e){t.removeConnection(e,{nested:!0})})),Object(h["a"])(n.outgoing,(function(e){t.removeConnection(e,{nested:!0})})),Object(h["a"])(n.children,(function(e){DeleteShapeHandler_isConnection(e)?t.removeConnection(e,{nested:!0}):t.removeShape(e,{nested:!0})}))},DeleteShapeHandler.prototype.execute=function(e){var t=this._canvas,n=e.shape,o=n.parent;return e.oldParent=o,e.oldParentIndex=Object(p["indexOf"])(o.children,n),t.removeShape(n),n},DeleteShapeHandler.prototype.revert=function(e){var t=this._canvas,n=e.shape,o=e.oldParent,i=e.oldParentIndex;return Object(p["add"])(o.children,n,i),t.addShape(n,o),n},DistributeElements.$inject=["modeling"];var f={x:"y",y:"x"};function LayoutConnectionHandler(e,t){this._layouter=e,this._canvas=t}function MoveConnectionHandler(){}DistributeElements.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,i=e.axis,r=e.dimension;function updateRange(e,t){e.range.min=Math.min(t[i],e.range.min),e.range.max=Math.max(t[i]+t[r],e.range.max)}function center(e){return e[i]+e[r]/2}function lastIdx(e){return e.length-1}function rangeDiff(e){return e.max-e.min}function centerElement(e,n){var o={y:0};o[i]=e-center(n),o[i]&&(o[f[i]]=0,t.moveElements([n],o,n.parent))}var a,c,s=n[0],u=lastIdx(n),d=n[u],l=0;Object(o["forEach"])(n,(function(e,t){var a,c,s;e.elements.length<2?t&&t!==n.length-1&&(updateRange(e,e.elements[0]),l+=rangeDiff(e.range)):(a=Object(o["sortBy"])(e.elements,i),c=a[0],t===u&&(c=a[lastIdx(a)]),s=center(c),e.range=null,Object(o["forEach"])(a,(function(t){centerElement(s,t),null!==e.range?updateRange(e,t):e.range={min:t[i],max:t[i]+t[r]}})),t&&t!==n.length-1&&(l+=rangeDiff(e.range)))})),c=Math.abs(d.range.min-s.range.max),a=Math.round((c-l)/(n.length-1)),a<n.length-1||Object(o["forEach"])(n,(function(e,c){var u,l={};e!==s&&e!==d&&(u=n[c-1],e.range.max=0,Object(o["forEach"])(e.elements,(function(n,o){l[f[i]]=0,l[i]=u.range.max-n[i]+a,e.range.min!==n[i]&&(l[i]+=n[i]-e.range.min),l[i]&&t.moveElements([n],l,n.parent),e.range.max=Math.max(n[i]+n[r],o?e.range.max:0)})))}))},DistributeElements.prototype.postExecute=function(e){},LayoutConnectionHandler.$inject=["layouter","canvas"],LayoutConnectionHandler.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return Object(o["assign"])(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t},LayoutConnectionHandler.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t},MoveConnectionHandler.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,a=t.parent;return e.oldParent=a,e.oldParentIndex=Object(p["remove"])(a.children,t),Object(p["add"])(i.children,t,r),t.parent=i,Object(o["forEach"])(t.waypoints,(function(e){e.x+=n.x,e.y+=n.y,e.original&&(e.original.x+=n.x,e.original.y+=n.y)})),t},MoveConnectionHandler.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,r=e.oldParentIndex,a=e.delta;return Object(p["remove"])(n.children,t),Object(p["add"])(i.children,t,r),t.parent=i,Object(o["forEach"])(t.waypoints,(function(e){e.x-=a.x,e.y-=a.y,e.original&&(e.original.x-=a.x,e.original.y-=a.y)})),t};var v=n("5efa"),g=n("2e42");function getResizedSourceAnchor(e,t,n){var o=safeGetWaypoints(e),i=getWaypointsInsideBounds(o,t),r=o[0];return i.length?i[i.length-1]:Object(v["a"])(r.original||r,n,t)}function getResizedTargetAnchor(e,t,n){var o=safeGetWaypoints(e),i=getWaypointsInsideBounds(o,t),r=o[o.length-1];return i.length?i[0]:Object(v["a"])(r.original||r,n,t)}function getMovedSourceAnchor(e,t,n){var o=safeGetWaypoints(e),i=subtract(t,n),r=o[0];return Object(v["a"])(r.original||r,i,t)}function getMovedTargetAnchor(e,t,n){var o=safeGetWaypoints(e),i=subtract(t,n),r=o[o.length-1];return Object(v["a"])(r.original||r,i,t)}function subtract(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function safeGetWaypoints(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function getWaypointsInsideBounds(e,t){var n=Object(o["map"])(e,getOriginal);return Object(o["filter"])(n,(function(e){return isInsideBounds(e,t)}))}function isInsideBounds(e,t){return"intersect"===Object(g["f"])(t,e,1)}function getOriginal(e){return e.original||e}function MoveClosure(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function MoveHelper(e){this._modeling=e}function MoveElementsHandler(e){this._helper=new MoveHelper(e)}function MoveShapeHandler(e){this._modeling=e,this._helper=new MoveHelper(e)}function ReconnectConnectionHandler(e){this._modeling=e}function getDocking(e){return e.original||e}function ReplaceShapeHandler(e,t){this._modeling=e,this._rules=t}function ResizeShapeHandler(e){this._modeling=e}MoveClosure.prototype.add=function(e,t){return this.addAll([e],t)},MoveClosure.prototype.addAll=function(e,t){var n=Object(r["c"])(e,!!t,this);return Object(o["assign"])(this,n),this},MoveHelper.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]},MoveHelper.prototype.moveClosure=function(e,t,n,i,r){var a=this._modeling,c=e.allShapes,s=e.allConnections,u=e.enclosedConnections,d=e.topLevel,l=!1;r&&r.parent===n&&(l=!0),Object(o["forEach"])(c,(function(e){a.moveShape(e,t,d[e.id]&&!l&&n,{recurse:!1,layout:!1})})),Object(o["forEach"])(s,(function(e){var o=!!c[e.source.id],i=!!c[e.target.id];u[e.id]&&o&&i?a.moveConnection(e,t,d[e.id]&&!l&&n):a.layoutConnection(e,{connectionStart:o&&getMovedSourceAnchor(e,e.source,t),connectionEnd:i&&getMovedTargetAnchor(e,e.target,t)})}))},MoveHelper.prototype.getClosure=function(e){return(new MoveClosure).addAll(e,!0)},MoveElementsHandler.$inject=["modeling"],MoveElementsHandler.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},MoveElementsHandler.prototype.postExecute=function(e){var t,n=e.hints;n&&n.primaryShape&&(t=n.primaryShape,n.oldParent=t.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,t)},MoveShapeHandler.$inject=["modeling"],MoveShapeHandler.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,a=t.parent;return e.oldBounds=Object(o["pick"])(t,["x","y","width","height"]),e.oldParent=a,e.oldParentIndex=Object(p["remove"])(a.children,t),Object(p["add"])(i.children,t,r),Object(o["assign"])(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t},MoveShapeHandler.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,r=this._modeling;!1!==i.layout&&(Object(o["forEach"])(t.incoming,(function(e){r.layoutConnection(e,{connectionEnd:getMovedTargetAnchor(e,t,n)})})),Object(o["forEach"])(t.outgoing,(function(e){r.layoutConnection(e,{connectionStart:getMovedSourceAnchor(e,t,n)})}))),!1!==i.recurse&&this.moveChildren(e)},MoveShapeHandler.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,r=e.delta;return Object(p["add"])(n.children,t,i),Object(o["assign"])(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t},MoveShapeHandler.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)},MoveShapeHandler.prototype.getNewParent=function(e){return e.newParent||e.shape.parent},ReconnectConnectionHandler.$inject=["modeling"],ReconnectConnectionHandler.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,i=e.connection,r=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return Object(o["isArray"])(r)&&(e.oldWaypoints=i.waypoints,i.waypoints=r),t&&(e.oldSource=i.source,i.source=t),n&&(e.oldTarget=i.target,i.target=n),i},ReconnectConnectionHandler.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,i=e.newTarget,r=e.dockingOrPoints,a=e.hints||{},c={};a.connectionStart&&(c.connectionStart=a.connectionStart),a.connectionEnd&&(c.connectionEnd=a.connectionEnd),!1!==a.layoutConnection&&(!n||i&&"source"!==a.docking||(c.connectionStart=c.connectionStart||getDocking(Object(o["isArray"])(r)?r[0]:r)),!i||n&&"target"!==a.docking||(c.connectionEnd=c.connectionEnd||getDocking(Object(o["isArray"])(r)?r[r.length-1]:r)),a.newWaypoints&&(c.waypoints=a.newWaypoints),this._modeling.layoutConnection(t,c))},ReconnectConnectionHandler.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,o=e.oldWaypoints,i=e.connection;return t&&(i.source=t),n&&(i.target=n),o&&(i.waypoints=o),i},ReplaceShapeHandler.$inject=["modeling","rules"],ReplaceShapeHandler.prototype.preExecute=function(e){var t,n=this,i=this._modeling,r=this._rules,a=e.oldShape,c=e.newData,s=e.hints||{};function canReconnect(e,t,n){return r.allowed("connection.reconnect",{connection:n,source:e,target:t})}var u,d={x:c.x,y:c.y},l={x:a.x,y:a.y,width:a.width,height:a.height};t=e.newShape=e.newShape||n.createShape(c,d,a.parent,s),a.host&&i.updateAttachment(t,a.host),!1!==s.moveChildren&&(u=a.children.slice(),i.moveElements(u,{x:0,y:0},t,s));var p=a.incoming.slice(),h=a.outgoing.slice();Object(o["forEach"])(p,(function(e){var o=e.source,i=canReconnect(o,t,e);i&&n.reconnectEnd(e,t,getResizedTargetAnchor(e,t,l),s)})),Object(o["forEach"])(h,(function(e){var o=e.target,i=canReconnect(t,o,e);i&&n.reconnectStart(e,t,getResizedSourceAnchor(e,t,l),s)}))},ReplaceShapeHandler.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)},ReplaceShapeHandler.prototype.execute=function(e){},ReplaceShapeHandler.prototype.revert=function(e){},ReplaceShapeHandler.prototype.createShape=function(e,t,n,o){return this._modeling.createShape(e,t,n,o)},ReplaceShapeHandler.prototype.reconnectStart=function(e,t,n,o){this._modeling.reconnectStart(e,t,n,o)},ReplaceShapeHandler.prototype.reconnectEnd=function(e,t,n,o){this._modeling.reconnectEnd(e,t,n,o)},ResizeShapeHandler.$inject=["modeling"],ResizeShapeHandler.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},Object(o["assign"])(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},ResizeShapeHandler.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,i=e.oldBounds,r=e.hints||{};!1!==r.layout&&(Object(o["forEach"])(n.incoming,(function(e){t.layoutConnection(e,{connectionEnd:getResizedTargetAnchor(e,n,i)})})),Object(o["forEach"])(n.outgoing,(function(e){t.layoutConnection(e,{connectionStart:getResizedSourceAnchor(e,n,i)})})))},ResizeShapeHandler.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return Object(o["assign"])(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};var y=n("4e3a");function SpaceToolHandler(e){this._modeling=e}function copyWaypoint(e){return Object(o["assign"])({},e)}function copyWaypoints(e){return Object(o["map"])(e.waypoints,(function(e){return e=copyWaypoint(e),e.original&&(e.original=copyWaypoint(e.original)),e}))}function getAxisFromDirection(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function shouldMoveWaypoint(e,t,n){var o=getAxisFromDirection(n);return/e|s/.test(n)?e[o]>t:/n|w/.test(n)?e[o]<t:void 0}function includes(e,t){return-1!==e.indexOf(t)}function getBounds(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function ToggleShapeCollapseHandler(e){this._modeling=e}function getElementsVisibilityRecursive(e){var t={};return Object(o["forEach"])(e,(function(e){t[e.id]=e.hidden,e.children&&(t=Object(o["assign"])({},t,getElementsVisibilityRecursive(e.children)))})),t}function setHiddenRecursive(e,t){var n=[];return Object(o["forEach"])(e,(function(e){e.hidden=t,n=n.concat(e),e.children&&(n=n.concat(setHiddenRecursive(e.children,e.collapsed||t)))})),n}function restoreVisibilityRecursive(e,t){var n=[];return Object(o["forEach"])(e,(function(e){e.hidden=t[e.id],n=n.concat(e),e.children&&(n=n.concat(restoreVisibilityRecursive(e.children,t)))})),n}function UpdateAttachmentHandler(e){this._modeling=e}function removeAttacher(e,t){return Object(p["remove"])(e&&e.attachers,t)}function addAttacher(e,t,n){if(e){var o=e.attachers;o||(e.attachers=o=[]),Object(p["add"])(o,t,n)}}function UpdateWaypointsHandler(){}function Modeling(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var o=this;e.on("diagram.init",(function(){o.registerHandlers(n)}))}SpaceToolHandler.$inject=["modeling"],SpaceToolHandler.prototype.preExecute=function(e){var t=e.delta,n=e.direction,i=e.movingShapes,r=e.resizingShapes,a=e.start,c={};this.moveShapes(i,t),Object(o["forEach"])(r,(function(e){c[e.id]=getBounds(e)})),this.resizeShapes(r,t,n),this.updateConnectionWaypoints(Object(y["b"])(i,r),t,n,a,i,r,c)},SpaceToolHandler.prototype.execute=function(){},SpaceToolHandler.prototype.revert=function(){},SpaceToolHandler.prototype.moveShapes=function(e,t){var n=this;Object(o["forEach"])(e,(function(e){n._modeling.moveShape(e,t,null,{autoResize:!1,layout:!1,recurse:!1})}))},SpaceToolHandler.prototype.resizeShapes=function(e,t,n){var i=this;Object(o["forEach"])(e,(function(e){var o=Object(y["c"])(e,n,t);i._modeling.resizeShape(e,o,null,{attachSupport:!1,autoResize:!1,layout:!1})}))},SpaceToolHandler.prototype.updateConnectionWaypoints=function(e,t,n,i,r,a,c){var s=this,u=r.concat(a);Object(o["forEach"])(e,(function(e){var d=e.source,l=e.target,p=copyWaypoints(e),h=getAxisFromDirection(n),f={labelBehavior:!1};includes(u,d)&&includes(u,l)?(p=Object(o["map"])(p,(function(e){return shouldMoveWaypoint(e,i,n)&&(e[h]=e[h]+t[h]),e.original&&shouldMoveWaypoint(e.original,i,n)&&(e.original[h]=e.original[h]+t[h]),e})),s._modeling.updateWaypoints(e,p,{labelBehavior:!1})):(includes(u,d)||includes(u,l))&&(includes(r,d)?f.connectionStart=getMovedSourceAnchor(e,d,t):includes(r,l)?f.connectionEnd=getMovedTargetAnchor(e,l,t):includes(a,d)?f.connectionStart=getResizedSourceAnchor(e,d,c[d.id]):includes(a,l)&&(f.connectionEnd=getResizedTargetAnchor(e,l,c[l.id])),s._modeling.layoutConnection(e,f))}))},ToggleShapeCollapseHandler.$inject=["modeling"],ToggleShapeCollapseHandler.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=getElementsVisibilityRecursive(n),t.collapsed=!t.collapsed;var o=setHiddenRecursive(n,t.collapsed);return[t].concat(o)},ToggleShapeCollapseHandler.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,o=t.children,i=restoreVisibilityRecursive(o,n);return t.collapsed=!t.collapsed,[t].concat(i)},UpdateAttachmentHandler.$inject=["modeling"],UpdateAttachmentHandler.prototype.execute=function(e){var t=e.shape,n=e.newHost,o=t.host;return e.oldHost=o,e.attacherIdx=removeAttacher(o,t),addAttacher(n,t),t.host=n,t},UpdateAttachmentHandler.prototype.revert=function(e){var t=e.shape,n=e.newHost,o=e.oldHost,i=e.attacherIdx;return t.host=o,removeAttacher(n,t),addAttacher(o,t,i),t},UpdateWaypointsHandler.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t},UpdateWaypointsHandler.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t},Modeling.$inject=["eventBus","elementFactory","commandStack"],Modeling.prototype.getHandlers=function(){return{"shape.append":AppendShapeHandler,"shape.create":CreateShapeHandler,"shape.delete":DeleteShapeHandler,"shape.move":MoveShapeHandler,"shape.resize":ResizeShapeHandler,"shape.replace":ReplaceShapeHandler,"shape.toggleCollapse":ToggleShapeCollapseHandler,spaceTool:SpaceToolHandler,"label.create":CreateLabelHandler,"connection.create":CreateConnectionHandler,"connection.delete":DeleteConnectionHandler,"connection.move":MoveConnectionHandler,"connection.layout":LayoutConnectionHandler,"connection.updateWaypoints":UpdateWaypointsHandler,"connection.reconnect":ReconnectConnectionHandler,"elements.create":CreateElementsHandler,"elements.move":MoveElementsHandler,"elements.delete":DeleteElementsHandler,"elements.distribute":DistributeElements,"elements.align":AlignElements,"element.updateAttachment":UpdateAttachmentHandler}},Modeling.prototype.registerHandlers=function(e){Object(o["forEach"])(this.getHandlers(),(function(t,n){e.registerHandler(n,t)}))},Modeling.prototype.moveShape=function(e,t,n,o,i){"object"===typeof o&&(i=o,o=null);var r={shape:e,delta:t,newParent:n,newParentIndex:o,hints:i||{}};this._commandStack.execute("shape.move",r)},Modeling.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)},Modeling.prototype.moveElements=function(e,t,n,o){o=o||{};var i,r=o.attach,a=n;!0===r?(i=n,a=n.parent):!1===r&&(i=null);var c={shapes:e,delta:t,newParent:a,newHost:i,hints:o};this._commandStack.execute("elements.move",c)},Modeling.prototype.moveConnection=function(e,t,n,o,i){"object"===typeof o&&(i=o,o=void 0);var r={connection:e,delta:t,newParent:n,newParentIndex:o,hints:i||{}};this._commandStack.execute("connection.move",r)},Modeling.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)},Modeling.prototype.createConnection=function(e,t,n,o,i,r){"object"===typeof n&&(r=i,i=o,o=n,n=void 0),o=this._create("connection",o);var a={source:e,target:t,parent:i,parentIndex:n,connection:o,hints:r};return this._commandStack.execute("connection.create",a),a.connection},Modeling.prototype.createShape=function(e,t,n,o,i){"number"!==typeof o&&(i=o,o=void 0),i=i||{};var r,a,c=i.attach;e=this._create("shape",e),c?(r=n.parent,a=n):r=n;var s={position:t,shape:e,parent:r,parentIndex:o,host:a,hints:i};return this._commandStack.execute("shape.create",s),s.shape},Modeling.prototype.createElements=function(e,t,n,i,r){Object(o["isArray"])(e)||(e=[e]),"number"!==typeof i&&(r=i,i=void 0),r=r||{};var a={position:t,elements:e,parent:n,parentIndex:i,hints:r};return this._commandStack.execute("elements.create",a),a.elements},Modeling.prototype.createLabel=function(e,t,n,o){n=this._create("label",n);var i={labelTarget:e,position:t,parent:o||e.parent,shape:n};return this._commandStack.execute("label.create",i),i.shape},Modeling.prototype.appendShape=function(e,t,n,o,i){i=i||{},t=this._create("shape",t);var r={source:e,position:n,target:o,shape:t,connection:i.connection,connectionParent:i.connectionParent,hints:i};return this._commandStack.execute("shape.append",r),r.shape},Modeling.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)},Modeling.prototype.distributeElements=function(e,t,n){var o={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",o)},Modeling.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)},Modeling.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)},Modeling.prototype.replaceShape=function(e,t,n){var o={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",o),o.newShape},Modeling.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)},Modeling.prototype.resizeShape=function(e,t,n,o){var i={shape:e,newBounds:t,minBounds:n,hints:o};this._commandStack.execute("shape.resize",i)},Modeling.prototype.createSpace=function(e,t,n,o,i){var r={delta:n,direction:o,movingShapes:e,resizingShapes:t,start:i};this._commandStack.execute("spaceTool",r)},Modeling.prototype.updateWaypoints=function(e,t,n){var o={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",o)},Modeling.prototype.reconnect=function(e,t,n,o,i){var r={connection:e,newSource:t,newTarget:n,dockingOrPoints:o,hints:i||{}};this._commandStack.execute("connection.reconnect",r)},Modeling.prototype.reconnectStart=function(e,t,n,i){i||(i={}),this.reconnect(e,t,e.target,n,Object(o["assign"])(i,{docking:"source"}))},Modeling.prototype.reconnectEnd=function(e,t,n,i){i||(i={}),this.reconnect(e,e.source,t,n,Object(o["assign"])(i,{docking:"target"}))},Modeling.prototype.connect=function(e,t,n,o){return this.createConnection(e,t,n||{},e.parent,o)},Modeling.prototype._create=function(e,t){return t instanceof i["a"]?t:this._elementFactory.create(e,t)},Modeling.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)}},"665f":function(e,t,n){"use strict";var o=n("e645"),i=n("c5b3"),r=n("1cff"),a=n("4e09"),c="connect-ok",s="connect-not-ok";function GlobalConnect(e,t,n,o,i,r){var a=this;this._dragging=t,this._rules=r,i.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",(function(e){var t=e.context,n=e.hover,i=t.canStartConnect=a.canStartConnect(n);null!==i&&(t.startTarget=n,o.addMarker(n,i?c:s))})),e.on(["global-connect.out","global-connect.cleanup"],(function(e){var t=e.context.startTarget,n=e.context.canStartConnect;t&&o.removeMarker(t,n?c:s)})),e.on(["global-connect.ended"],(function(t){var o=t.context,i=o.startTarget,r={x:t.x,y:t.y},c=a.canStartConnect(i);if(c)return e.once("element.out",(function(){e.once(["connect.ended","connect.canceled"],(function(){e.fire("global-connect.drag.ended")})),n.start(null,i,r)})),!1}))}GlobalConnect.$inject=["eventBus","dragging","connect","canvas","toolManager","rules"],GlobalConnect.prototype.start=function(e){this._dragging.init(e,"global-connect",{trapClick:!1,data:{context:{}}})},GlobalConnect.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.start()},GlobalConnect.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)},GlobalConnect.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};t["a"]={__depends__:[o["a"],i["a"],r["a"],a["a"]],globalConnect:["type",GlobalConnect]}},6730:function(e,t,n){"use strict";n.d(t,"a",(function(){return escapeHTML}));n("e7a5");var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function escapeHTML(e){return e=""+e,e&&e.replace(/[&<>"']/g,(function(e){return o[e]}))}},6845:function(e,t,n){"use strict";n.d(t,"a",(function(){return AutoResize}));var o=n("3fb5"),i=n.n(o),r=n("43c6"),a=n("2e42"),c=n("87f2"),s=n("3413");function AutoResize(e,t,n,o){s["a"].call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=o;var i=this;this.postExecuted(["shape.create"],(function(e){var t=e.context,n=t.hints||{},o=t.shape,r=t.parent||t.newParent;!1!==n.autoResize&&i._expand([o],r)})),this.postExecuted(["elements.move"],(function(e){var t=e.context,n=Object(c["flatten"])(Object(c["values"])(t.closure.topLevel)),o=t.hints,r=!o||o.autoResize;if(!1!==r){var a=Object(c["groupBy"])(n,(function(e){return e.parent.id}));Object(c["forEach"])(a,(function(e,t){Object(c["isArray"])(r)&&(e=e.filter((function(e){return Object(c["find"])(r,Object(c["matchPattern"])({id:e.id}))}))),i._expand(e,t)}))}})),this.postExecuted(["shape.toggleCollapse"],(function(e){var t=e.context,n=t.hints,o=t.shape;n&&!1===n.autoResize||o.collapsed||i._expand(o.children||[],o)})),this.postExecuted(["shape.resize"],(function(e){var t=e.context,n=t.hints,o=t.shape,r=o.parent;n&&!1===n.autoResize||r&&i._expand([o],r)}))}function boundsChanged(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function getResizeDirections(e,t){var n="";return e=Object(a["b"])(e),t=Object(a["b"])(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}AutoResize.$inject=["eventBus","elementRegistry","modeling","rules"],i()(AutoResize,s["a"]),AutoResize.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),o=this.getPadding(t),i=Object(a["b"])(Object(r["b"])(e)),s=Object(a["b"])(t),u={};return i.top-s.top<o.top&&(u.top=i.top-n.top),i.left-s.left<o.left&&(u.left=i.left-n.left),s.right-i.right<o.right&&(u.right=i.right+n.right),s.bottom-i.bottom<o.bottom&&(u.bottom=i.bottom+n.bottom),Object(a["a"])(Object(c["assign"])({},s,u))},AutoResize.prototype._expand=function(e,t){"string"===typeof t&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var o=this._getOptimalBounds(e,t);if(boundsChanged(o,t)){var i=getResizeDirections(Object(c["pick"])(t,["x","y","width","height"]),o);this.resize(t,o,{autoResize:i});var r=t.parent;r&&this._expand([t],r)}}},AutoResize.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}},AutoResize.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}},AutoResize.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)}},"6de3":function(e,t,n){"use strict";n.d(t,"b",(function(){return pointDistance})),n.d(t,"e",(function(){return pointsOnLine})),n.d(t,"d",(function(){return pointsAligned})),n.d(t,"c",(function(){return pointInRect})),n.d(t,"a",(function(){return getMidPoint}));var o=n("87f2");function pointDistance(e,t){return e&&t?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):-1}function pointsOnLine(e,t,n,o){if("undefined"===typeof o&&(o=5),!e||!t||!n)return!1;var i=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),r=pointDistance(e,t);return Math.abs(i/r)<=o}var i=2;function pointsAligned(e,t){var n;return n=Object(o["isArray"])(e)?e:[e,t],pointsAlignedHorizontally(n)?"h":!!pointsAlignedVertically(n)&&"v"}function pointsAlignedHorizontally(e,t){var n;n=Object(o["isArray"])(e)?e:[e,t];var r=n.slice().shift();return Object(o["every"])(n,(function(e){return Math.abs(r.y-e.y)<=i}))}function pointsAlignedVertically(e,t){var n;n=Object(o["isArray"])(e)?e:[e,t];var r=n.slice().shift();return Object(o["every"])(n,(function(e){return Math.abs(r.x-e.x)<=i}))}function pointInRect(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function getMidPoint(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}},"6fd9":function(e,t,n){"use strict";var o=n("c5b3"),i=n("1cff"),r=n("71f4"),a=n("87f2"),c=n("d6ce"),s=n("2e42"),u=10;function Resize(e,t,n,o){this._dragging=o,this._rules=t;var i=this;function handleMove(e,t){var n,o=e.shape,r=e.direction,a=e.resizeConstraints;e.delta=t,n=Object(c["d"])(o,r,t),e.newBounds=Object(c["b"])(n,a),e.canExecute=i.canResize(e)}function handleStart(e){var t=e.resizeConstraints,n=e.minBounds;void 0===t&&(void 0===n&&(n=i.computeMinResizeBox(e)),e.resizeConstraints={min:Object(s["b"])(n)})}function handleEnd(e){var t=e.shape,o=e.canExecute,i=e.newBounds;if(o){if(i=Object(s["g"])(i),!boundsChanged(t,i))return;n.resizeShape(t,i)}}e.on("resize.start",(function(e){handleStart(e.context)})),e.on("resize.move",(function(e){var t={x:e.dx,y:e.dy};handleMove(e.context,t)})),e.on("resize.end",(function(e){handleEnd(e.context)}))}function boundsChanged(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function getReferencePoint(e,t){var n=Object(s["e"])(e),o=Object(s["b"])(e),i={x:n.x,y:n.y};return-1!==t.indexOf("n")?i.y=o.top:-1!==t.indexOf("s")&&(i.y=o.bottom),-1!==t.indexOf("e")?i.x=o.right:-1!==t.indexOf("w")&&(i.x=o.left),i}function getCursor(e){var t="resize-";return"n"===e||"s"===e?t+"ns":"e"===e||"w"===e?t+"ew":"nw"===e||"se"===e?t+"nwse":t+"nesw"}Resize.prototype.canResize=function(e){var t=this._rules,n=Object(a["pick"])(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)},Resize.prototype.activate=function(e,t,n){var o,i,r=this._dragging;if("string"===typeof n&&(n={direction:n}),o=Object(a["assign"])({shape:t},n),i=o.direction,!i)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");r.init(e,getReferencePoint(t,i),"resize",{autoActivate:!0,cursor:getCursor(i),data:{shape:t,context:o}})},Resize.prototype.computeMinResizeBox=function(e){var t,n,o=e.shape,i=e.direction;return t=e.minDimensions||{width:u,height:u},n=Object(c["a"])(o,e.childrenBoxPadding),Object(c["c"])(i,o,t,n)},Resize.$inject=["eventBus","rules","modeling","dragging"];var d=n("6b8b"),l="djs-resizing",p="resize-not-ok",h=500;function ResizePreview(e,t,n){function updateFrame(e){var o=e.shape,i=e.newBounds,r=e.frame;r||(r=e.frame=n.addFrame(o,t.getDefaultLayer()),t.addMarker(o,l)),i.width>5&&Object(d["b"])(r,{x:i.x,width:i.width}),i.height>5&&Object(d["b"])(r,{y:i.y,height:i.height}),e.canExecute?Object(d["c"])(r).remove(p):Object(d["c"])(r).add(p)}function removeFrame(e){var n=e.shape,o=e.frame;o&&Object(d["j"])(e.frame),t.removeMarker(n,l)}e.on("resize.move",h,(function(e){updateFrame(e.context)})),e.on("resize.cleanup",(function(e){removeFrame(e.context)}))}ResizePreview.$inject=["eventBus","canvas","previewSupport"];var f=n("e506"),v=n("78f9"),g=n("e116"),y=-6,m=4,b=20,x="djs-resizer",_=["n","w","s","e","nw","ne","se","sw"];function ResizeHandles(e,t,n,o){this._resize=o,this._canvas=t;var i=this;e.on("selection.changed",(function(e){var t=e.newSelection;i.removeResizers(),1===t.length&&Object(a["forEach"])(t,Object(a["bind"])(i.addResizer,i))})),e.on("shape.changed",(function(e){var t=e.element;n.isSelected(t)&&(i.removeResizers(),i.addResizer(t))}))}function getHandleOffset(e){var t={x:0,y:0};return-1!==e.indexOf("e")?t.x=-y:-1!==e.indexOf("w")&&(t.x=y),-1!==e.indexOf("s")?t.y=-y:-1!==e.indexOf("n")&&(t.y=y),t}ResizeHandles.prototype.makeDraggable=function(e,t,n){var o=this._resize;function startResize(t){Object(v["c"])(t)&&o.activate(t,e,n)}f["event"].bind(t,"mousedown",startResize),f["event"].bind(t,"touchstart",startResize)},ResizeHandles.prototype._createResizer=function(e,t,n,o){var i=this._getResizersParent(),r=getHandleOffset(o),a=Object(d["f"])("g");Object(d["c"])(a).add(x),Object(d["c"])(a).add(x+"-"+e.id),Object(d["c"])(a).add(x+"-"+o),Object(d["a"])(i,a);var c=Object(d["f"])("rect");Object(d["b"])(c,{x:-m/2+r.x,y:-m/2+r.y,width:m,height:m}),Object(d["c"])(c).add(x+"-visual"),Object(d["a"])(a,c);var s=Object(d["f"])("rect");return Object(d["b"])(s,{x:-b/2+r.x,y:-b/2+r.y,width:b,height:b}),Object(d["c"])(s).add(x+"-hit"),Object(d["a"])(a,s),Object(g["b"])(a,t,n),a},ResizeHandles.prototype.createResizer=function(e,t){var n=getReferencePoint(e,t),o=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,o,t)},ResizeHandles.prototype.addResizer=function(e){var t=this,n=this._resize;n.canResize({shape:e})&&Object(a["forEach"])(_,(function(n){t.createResizer(e,n)}))},ResizeHandles.prototype.removeResizers=function(){var e=this._getResizersParent();Object(d["d"])(e)},ResizeHandles.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},ResizeHandles.$inject=["eventBus","canvas","selection","resize"];t["a"]={__depends__:[o["a"],i["a"],r["a"]],__init__:["resize","resizePreview","resizeHandles"],resize:["type",Resize],resizePreview:["type",ResizePreview],resizeHandles:["type",ResizeHandles]}},"71f4":function(e,t,n){"use strict";var o=n("87f2"),i=n("6b8b"),r=n("e506"),a=n("da34"),c=["marker-start","marker-mid","marker-end"],s=["circle","ellipse","line","path","polygon","polyline","rect"];function PreviewSupport(e,t,n,r){this._elementRegistry=e,this._canvas=n,this._styles=r,this._clonedMarkers={};var a=this;t.on("drag.cleanup",(function(){Object(o["forEach"])(a._clonedMarkers,(function(e){Object(i["j"])(e)})),a._clonedMarkers={}}))}function getMarker(e,t,n){var o=referenceToId(Object(i["b"])(e,t));return Object(r["query"])("marker#"+o,n||document)}function referenceToId(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function idToReference(e){return"url(#"+e+")"}function canHaveMarker(e){return-1!==s.indexOf(e.nodeName)}PreviewSupport.$inject=["elementRegistry","eventBus","canvas","styles"],PreviewSupport.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)},PreviewSupport.prototype.addDragger=function(e,t,n){n=n||this.getGfx(e);var o=Object(i["e"])(n),r=n.getBoundingClientRect();return this._cloneMarkers(Object(a["b"])(o)),Object(i["b"])(o,this._styles.cls("djs-dragger",[],{x:r.top,y:r.left})),Object(i["a"])(t,o),o},PreviewSupport.prototype.addFrame=function(e,t){var n=Object(i["f"])("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return Object(i["a"])(t,n),n},PreviewSupport.prototype._cloneMarkers=function(e){var t=this;if(e.childNodes)for(var n=0;n<e.childNodes.length;n++)t._cloneMarkers(e.childNodes[n]);canHaveMarker(e)&&c.forEach((function(n){if(Object(i["b"])(e,n)){var o=getMarker(e,n,t._canvas.getContainer());t._cloneMarker(e,o,n)}}))},PreviewSupport.prototype._cloneMarker=function(e,t,n){var o=t.id,a=this._clonedMarkers[o];if(!a){a=Object(i["e"])(t);var c=o+"-clone";a.id=c,Object(i["c"])(a).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[o]=a;var s=Object(r["query"])("defs",this._canvas._svg);s||(s=Object(i["f"])("defs"),Object(i["a"])(this._canvas._svg,s)),Object(i["a"])(s,a)}var u=idToReference(this._clonedMarkers[o].id);Object(i["b"])(e,n,u)};t["a"]={__init__:["previewSupport"],previewSupport:["type",PreviewSupport]}},"753e":function(e,t,n){"use strict";var o=n("43c6");function ChangeSupport(e,t,n,i){e.on("element.changed",(function(i){var r=i.element;(r.parent||r===t.getRootElement())&&(i.gfx=n.getGraphics(r)),i.gfx&&e.fire(Object(o["f"])(r)+".changed",i)})),e.on("elements.changed",(function(t){var n=t.elements;n.forEach((function(t){e.fire("element.changed",{element:t})})),i.updateContainments(n)})),e.on("shape.changed",(function(e){i.update("shape",e.element,e.gfx)})),e.on("connection.changed",(function(e){i.update("connection",e.element,e.gfx)}))}ChangeSupport.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];t["a"]={__init__:["changeSupport"],changeSupport:["type",ChangeSupport]}},"78f9":function(e,t,n){"use strict";n.d(t,"c",(function(){return isPrimaryButton})),n.d(t,"a",(function(){return hasPrimaryModifier})),n.d(t,"b",(function(){return hasSecondaryModifier}));var o=n("1025");function isMac(){return/mac/i.test(navigator.platform)}function isPrimaryButton(e){return!(Object(o["a"])(e)||e).button}function hasPrimaryModifier(e){var t=Object(o["a"])(e)||e;return!!isPrimaryButton(e)&&(isMac()?t.metaKey:t.ctrlKey)}function hasSecondaryModifier(e){var t=Object(o["a"])(e)||e;return isPrimaryButton(e)&&t.shiftKey}},"7d74":function(e,t,n){"use strict";n.d(t,"a",(function(){return install}));var o=5e3;function install(e,t){function trap(){return!1}return t=t||"element.click",e.once(t,o,trap),function(){e.off(t,trap)}}},"80e0":function(e,t,n){"use strict";var o=n("2f93"),i=n("87f2"),r={moveSpeed:50,moveSpeedAccelerated:200};function KeyboardMove(e,t,n){var o=this;function arrowsListener(e){var n=e.keyEvent,i=o._config;if(t.isCmd(n)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],n)){var r,a=t.isShift(n)?i.moveSpeedAccelerated:i.moveSpeed;switch(n.key){case"ArrowLeft":case"Left":r="left";break;case"ArrowUp":case"Up":r="up";break;case"ArrowRight":case"Right":r="right";break;case"ArrowDown":case"Down":r="down";break}return o.moveCanvas({speed:a,direction:r}),!0}}this._config=Object(i["assign"])({},r,e||{}),t.addListener(arrowsListener),this.moveCanvas=function(e){var t=0,o=0,i=e.speed,r=i/Math.min(Math.sqrt(n.viewbox().scale),1);switch(e.direction){case"left":t=r;break;case"up":o=r;break;case"right":t=-r;break;case"down":o=-r;break}n.scroll({dx:t,dy:o})}}KeyboardMove.$inject=["config.keyboardMove","keyboard","canvas"];t["a"]={__depends__:[o["a"]],__init__:["keyboardMove"],keyboardMove:["type",KeyboardMove]}},"87d2":function(e,t,n){"use strict";var o=n("fe4b"),i=n("44cc"),r=n("9f71"),a=n("1502"),c=n("2e42"),s=n("87f2"),u=1250;function ResizeSnapping(e,t){var n=this;e.on(["resize.start"],(function(e){n.initSnap(e)})),e.on(["resize.move","resize.end"],u,(function(e){var o=e.context,i=o.shape,c=i.parent,s=o.direction,u=o.snapContext;if((!e.originalEvent||!Object(a["b"])(e.originalEvent))&&!Object(r["c"])(e)){var d=u.pointsForTarget(c);d.initialized||(d=n.addSnapTargetPoints(d,i,c,s),d.initialized=!0),isHorizontal(s)&&Object(r["e"])(e,"x",e.x),isVertical(s)&&Object(r["e"])(e,"y",e.y),t.snap(e,d)}})),e.on(["resize.cleanup"],(function(){t.hide()}))}function getSnapOrigin(e,t){var n=Object(c["e"])(e),o=Object(c["b"])(e),i={x:n.x,y:n.y};return-1!==t.indexOf("n")?i.y=o.top:-1!==t.indexOf("s")&&(i.y=o.bottom),-1!==t.indexOf("e")?i.x=o.right:-1!==t.indexOf("w")&&(i.x=o.left),i}function isAttached(e,t){return e.host===t}function isConnection(e){return!!e.waypoints}function isHidden(e){return!!e.hidden}function isLabel(e){return!!e.labelTarget}function isHorizontal(e){return"n"===e||"s"===e}function isVertical(e){return"e"===e||"w"===e}ResizeSnapping.prototype.initSnap=function(e){var t=e.context,n=t.shape,o=t.direction,r=t.snapContext;r||(r=t.snapContext=new i["a"]);var a=getSnapOrigin(n,o);return r.setSnapOrigin("corner",{x:a.x-e.x,y:a.y-e.y}),r},ResizeSnapping.prototype.addSnapTargetPoints=function(e,t,n,o){var i=this.getSnapTargets(t,n);return Object(s["forEach"])(i,(function(t){e.add("corner",Object(r["a"])(t)),e.add("corner",Object(r["g"])(t))})),e.add("corner",getSnapOrigin(t,o)),e},ResizeSnapping.$inject=["eventBus","snapping"],ResizeSnapping.prototype.getSnapTargets=function(e,t){return Object(r["b"])(t).filter((function(t){return!isAttached(t,e)&&!isConnection(t)&&!isHidden(t)&&!isLabel(t)}))};var d=n("6b8b"),l=7,p=1e3;function Snapping(e){this._canvas=e,this._asyncHide=Object(s["debounce"])(Object(s["bind"])(this.hide,this),p)}Snapping.$inject=["canvas"],Snapping.prototype.snap=function(e,t){var n=e.context,o=n.snapContext,i=o.getSnapLocations(),a={x:Object(r["c"])(e,"x"),y:Object(r["c"])(e,"y")};Object(s["forEach"])(i,(function(n){var i=o.getSnapOrigin(n),r={x:e.x+i.x,y:e.y+i.y};if(Object(s["forEach"])(["x","y"],(function(e){var o;a[e]||(o=t.snap(r,n,e,l),void 0!==o&&(a[e]={value:o,originValue:o-i[e]}))})),a.x&&a.y)return!1})),this.showSnapLine("vertical",a.x&&a.x.value),this.showSnapLine("horizontal",a.y&&a.y.value),Object(s["forEach"])(["x","y"],(function(t){var n=a[t];Object(s["isObject"])(n)&&Object(r["e"])(e,t,n.originValue)}))},Snapping.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=Object(d["f"])("path");return Object(d["b"])(n,{d:"M0,0 L0,0"}),Object(d["c"])(n).add("djs-snap-line"),Object(d["a"])(t,n),{update:function(t){Object(s["isNumber"])(t)?"horizontal"===e?Object(d["b"])(n,{d:"M-100000,"+t+" L+100000,"+t,display:""}):Object(d["b"])(n,{d:"M "+t+",-100000 L "+t+", +100000",display:""}):Object(d["b"])(n,{display:"none"})}}},Snapping.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},Snapping.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()},Snapping.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]},Snapping.prototype.hide=function(){Object(s["forEach"])(this._snapLines,(function(e){e.update()}))};t["a"]={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",o["a"]],resizeSnapping:["type",ResizeSnapping],snapping:["type",Snapping]}},9036:function(e,t,n){"use strict";n.d(t,"a",(function(){return BaseRenderer}));var o=1e3;function BaseRenderer(e,t){var n=this;t=t||o,e.on(["render.shape","render.connection"],t,(function(e,t){var o=e.type,i=t.element,r=t.gfx;if(n.canRender(i))return"render.shape"===o?n.drawShape(r,i):n.drawConnection(r,i)})),e.on(["render.getShapePath","render.getConnectionPath"],t,(function(e,t){if(n.canRender(t))return"render.getShapePath"===e.type?n.getShapePath(t):n.getConnectionPath(t)}))}BaseRenderer.prototype.canRender=function(){},BaseRenderer.prototype.drawShape=function(){},BaseRenderer.prototype.drawConnection=function(){},BaseRenderer.prototype.getShapePath=function(){},BaseRenderer.prototype.getConnectionPath=function(){}},"91cd":function(e,t,n){"use strict";function Clipboard(){}Clipboard.prototype.get=function(){return this._data},Clipboard.prototype.set=function(e){this._data=e},Clipboard.prototype.clear=function(){var e=this._data;return delete this._data,e},Clipboard.prototype.isEmpty=function(){return!this._data};var o={clipboard:["type",Clipboard]},i=n("35be");function Mouse(e){var t=this;function setLastMoveEvent(e){t._lastMoveEvent=e}this._lastMoveEvent=null,e.on("canvas.init",(function(e){var n=t._svg=e.svg;n.addEventListener("mousemove",setLastMoveEvent)})),e.on("canvas.destroy",(function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",setLastMoveEvent)}))}function createMoveEvent(e,t){var n=document.createEvent("MouseEvent"),o=e,i=t,r=e,a=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,o,i,r,a,!1,!1,!1,!1,0,null),n}Mouse.$inject=["eventBus"],Mouse.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||createMoveEvent(0,0)};var r={__init__:["mouse"],mouse:["type",Mouse]},a=n("c5b3"),c=n("87f2"),s=n("43c6");function CopyPaste(e,t,n,o,i,r,a,s){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=o,this._eventBus=i,this._modeling=r,this._mouse=a,this._rules=s,i.on("copyPaste.copyElement",(function(e){var t=e.descriptor,n=e.element,o=e.elements;t.priority=1,t.id=n.id;var i=Object(c["find"])(o,(function(e){return e===n.parent}));i&&(t.parent=n.parent.id),isAttacher(n)&&(t.priority=2,t.host=n.host.id),isConnection(n)&&(t.priority=3,t.source=n.source.id,t.target=n.target.id,t.waypoints=copyWaypoints(n)),isLabel(n)&&(t.priority=4,t.labelTarget=n.labelTarget.id),Object(c["forEach"])(["x","y","width","height"],(function(e){Object(c["isNumber"])(n[e])&&(t[e]=n[e])})),t.hidden=n.hidden,t.collapsed=n.collapsed})),i.on("copyPaste.pasteElements",(function(e){var t=e.hints;Object(c["assign"])(t,{createElementsBehavior:!1})}))}function isAttacher(e){return!!e.host}function isConnection(e){return!!e.waypoints}function isLabel(e){return!!e.labelTarget}function copyWaypoints(e){return Object(c["map"])(e.waypoints,(function(e){return e=copyWaypoint(e),e.original&&(e.original=copyWaypoint(e.original)),e}))}function copyWaypoint(e){return Object(c["assign"])({},e)}function removeElement(e,t){var n=t.indexOf(e);return-1===n?t:t.splice(n,1)}CopyPaste.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"],CopyPaste.prototype.copy=function(e){var t,n;return Object(c["isArray"])(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),n=!1===t?{}:this.createTree(Object(c["isArray"])(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n},CopyPaste.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var o=this._createElements(t);if(e&&e.element&&e.point)return this._paste(o,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),o,{hints:n||{}})}},CopyPaste.prototype._paste=function(e,t,n,o){Object(c["forEach"])(e,(function(e){Object(c["isNumber"])(e.x)||(e.x=0),Object(c["isNumber"])(e.y)||(e.y=0)}));var i=Object(s["b"])(e);return Object(c["forEach"])(e,(function(e){isConnection(e)&&(e.waypoints=Object(c["map"])(e.waypoints,(function(e){return{x:e.x-i.x-i.width/2,y:e.y-i.y-i.height/2}}))),Object(c["assign"])(e,{x:e.x-i.x-i.width/2,y:e.y-i.y-i.height/2})})),this._modeling.createElements(e,n,t,Object(c["assign"])({},o))},CopyPaste.prototype._createElements=function(e){var t=this,n=this._eventBus,o={},i=[];return Object(c["forEach"])(e,(function(e,r){r=parseInt(r,10),e=Object(c["sortBy"])(e,"priority"),Object(c["forEach"])(e,(function(e){var r,a=Object(c["assign"])({},Object(c["omit"])(e,["priority"]));return o[e.parent]?a.parent=o[e.parent]:delete a.parent,n.fire("copyPaste.pasteElement",{cache:o,descriptor:a}),isConnection(a)?(a.source=o[e.source],a.target=o[e.target],r=o[e.id]=t.createConnection(a),void i.push(r)):isLabel(a)?(a.labelTarget=o[a.labelTarget],r=o[e.id]=t.createLabel(a),void i.push(r)):(a.host&&(a.host=o[a.host]),r=o[e.id]=t.createShape(a),void i.push(r))}))})),i},CopyPaste.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(Object(c["omit"])(e,["id"]));return t},CopyPaste.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(Object(c["omit"])(e,["id"]));return t},CopyPaste.prototype.createShape=function(e){var t=this._elementFactory.createShape(Object(c["omit"])(e,["id"]));return t},CopyPaste.prototype.hasRelations=function(e,t){var n,o,i;return!(isConnection(e)&&(o=Object(c["find"])(t,Object(c["matchPattern"])({id:e.source.id})),i=Object(c["find"])(t,Object(c["matchPattern"])({id:e.target.id})),!o||!i))&&!(isLabel(e)&&(n=Object(c["find"])(t,Object(c["matchPattern"])({id:e.labelTarget.id})),!n))},CopyPaste.prototype.createTree=function(e){var t=this._rules,n=this,o={},i=[],r=Object(s["e"])(e);function canCopy(e,n){return t.allowed("element.copy",{element:e,elements:n})}function addElementData(e,t){var n=Object(c["find"])(i,(function(t){return e===t.element}));n?n.depth<t&&(i=removeElementData(n,i),i.push({element:n.element,depth:t})):i.push({element:e,depth:t})}function removeElementData(e,t){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t}return Object(s["a"])(r,(function(e,t,n){if(!isLabel(e))return Object(c["forEach"])(e.labels,(function(e){addElementData(e,n)})),Object(c["forEach"])([e.attachers,e.incoming,e.outgoing],addRelatedElements),addElementData(e,n),e.children;function addRelatedElements(e){e&&e.length&&Object(c["forEach"])(e,(function(e){Object(c["forEach"])(e.labels,(function(e){addElementData(e,n)})),addElementData(e,n)}))}})),e=Object(c["map"])(i,(function(e){return e.element})),i=Object(c["map"])(i,(function(t){return t.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:t.descriptor,element:t.element,elements:e}),t})),i=Object(c["sortBy"])(i,(function(e){return e.descriptor.priority})),e=Object(c["map"])(i,(function(e){return e.element})),Object(c["forEach"])(i,(function(t){var i=t.depth;n.hasRelations(t.element,e)&&canCopy(t.element,e)?(o[i]||(o[i]=[]),o[i].push(t.descriptor)):removeElement(t.element,e)})),o};t["a"]={__depends__:[o,i["a"],r,a["a"]],__init__:["copyPaste"],copyPaste:["type",CopyPaste]}},"93ca":function(e,t,n){"use strict";n.d(t,"a",(function(){return AutoResizeProvider}));var o=n("4ae2"),i=n("3fb5"),r=n.n(i);function AutoResizeProvider(e){o["a"].call(this,e);var t=this;this.addRule("element.autoResize",(function(e){return t.canResize(e.elements,e.target)}))}AutoResizeProvider.$inject=["eventBus"],r()(AutoResizeProvider,o["a"]),AutoResizeProvider.prototype.canResize=function(e,t){return!1}},"96a7":function(e,t,n){"use strict";function log10(e){return Math.log(e)/Math.log(10)}n.d(t,"a",(function(){return log10}))},9960:function(e,t,n){"use strict";var o=n("6b8b"),i=n("87f2"),r=n("2e42"),a="djs-connection-preview";function ConnectionPreview(e,t,n,o){this._canvas=t,this._graphicsFactory=n,this._elementFactory=o,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}function cacheReturnValues(e){var t={};return function(n){var o=JSON.stringify(n),i=t[o];return i||(i=t[o]=e.apply(null,arguments)),i}}function ensureConnectionAttrs(e){return Object(i["isObject"])(e)?e:{}}ConnectionPreview.$inject=["injector","canvas","graphicsFactory","elementFactory"],ConnectionPreview.prototype.drawPreview=function(e,t,n){n=n||{};var i,a=e.connectionPreviewGfx,c=e.getConnection,s=n.source,u=n.target,d=n.waypoints,l=n.connectionStart,p=n.connectionEnd,h=n.noLayout,f=n.noCropping,v=n.noNoop,g=this;a||(a=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),Object(o["d"])(a),c||(c=e.getConnection=cacheReturnValues((function(e,t,n){return g.getConnection(e,t,n)}))),t&&(i=c(t,s,u)),i?(i.waypoints=d||[],this._layouter&&!h&&(i.waypoints=this._layouter.layoutConnection(i,{source:s,target:u,connectionStart:l,connectionEnd:p,waypoints:n.waypoints||i.waypoints})),i.waypoints&&i.waypoints.length||(i.waypoints=[s?Object(r["e"])(s):l,u?Object(r["e"])(u):p]),this._connectionDocking&&(s||u)&&!f&&(i.waypoints=this._connectionDocking.getCroppedWaypoints(i,s,u)),this._graphicsFactory.drawConnection(a,i)):!v&&this.drawNoopPreview(a,n)},ConnectionPreview.prototype.drawNoopPreview=function(e,t){var n=t.source,i=t.target,a=t.connectionStart||Object(r["e"])(n),c=t.connectionEnd||Object(r["e"])(i),s=this.cropWaypoints(a,c,n,i),u=this.createNoopConnection(s[0],s[1]);Object(o["a"])(e,u)},ConnectionPreview.prototype.cropWaypoints=function(e,t,n,o){var i=this._graphicsFactory,a=n&&i.getShapePath(n),c=o&&i.getShapePath(o),s=i.getConnectionPath({waypoints:[e,t]});return e=n&&Object(r["d"])(a,s,!0)||e,t=o&&Object(r["d"])(c,s,!1)||t,[e,t]},ConnectionPreview.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&Object(o["j"])(e.connectionPreviewGfx)},ConnectionPreview.prototype.getConnection=function(e){var t=ensureConnectionAttrs(e);return this._elementFactory.createConnection(t)},ConnectionPreview.prototype.createConnectionPreviewGfx=function(){var e=Object(o["f"])("g");return Object(o["b"])(e,{pointerEvents:"none"}),Object(o["c"])(e).add(a),Object(o["a"])(this._canvas.getDefaultLayer(),e),e},ConnectionPreview.prototype.createNoopConnection=function(e,t){var n=Object(o["f"])("polyline");return Object(o["b"])(n,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),Object(o["b"])(n,{points:[e.x,e.y,t.x,t.y]}),n};t["a"]={__init__:["connectionPreview"],connectionPreview:["type",ConnectionPreview]}},"997c":function(e,t,n){"use strict";n.d(t,"a",(function(){return getApproxIntersection}));var o=n("6de3"),i=n("e5ab"),r=n.n(i),a=Math.round,c=Math.max;function circlePath(e,t){var n=e.x,o=e.y;return[["M",n,o],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function linePath(e){var t=[];return e.forEach((function(e,n){t.push([0===n?"M":"L",e.x,e.y])})),t}var s=10;function getBendpointIntersection(e,t){var n,i;for(n=0;i=e[n];n++)if(Object(o["b"])(i,t)<=s)return{point:e[n],bendpoint:!0,index:n};return null}function getPathIntersection(e,t){var n,o=r()(circlePath(t,s),linePath(e)),i=o[0],u=o[o.length-1];return i?i!==u?i.segment2!==u.segment2?(n=c(i.segment2,u.segment2)-1,{point:e[n],bendpoint:!0,index:n}):{point:{x:a(i.x+u.x)/2,y:a(i.y+u.y)/2},index:i.segment2}:{point:{x:a(i.x),y:a(i.y)},index:i.segment2}:null}function getApproxIntersection(e,t){return getBendpointIntersection(e,t)||getPathIntersection(e,t)}},"9d6f":function(e,t,n){"use strict";n.d(t,"a",(function(){return EditorActions}));var o=n("87f2"),i="is not a registered action",r="is already registered";function EditorActions(e,t){this._actions={};var n=this;e.on("diagram.init",(function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})}))}function error(e,t){return new Error(e+" "+t)}EditorActions.$inject=["eventBus","injector"],EditorActions.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),i=e.get("selection",!1),r=e.get("zoomScroll",!1),a=e.get("copyPaste",!1),c=e.get("canvas",!1),s=e.get("rules",!1),u=e.get("keyboardMove",!1),d=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",(function(){t.undo()})),this.register("redo",(function(){t.redo()}))),a&&i&&this.register("copy",(function(){var e=i.get();a.copy(e)})),a&&this.register("paste",(function(){a.paste()})),r&&this.register("stepZoom",(function(e){r.stepZoom(e.value)})),c&&this.register("zoom",(function(e){c.zoom(e.value)})),n&&i&&s&&this.register("removeSelection",(function(){var e=i.get();if(e.length){var t,r=s.allowed("elements.delete",{elements:e});!1!==r&&(t=Object(o["isArray"])(r)?r:e,t.length&&n.removeElements(t.slice()))}})),u&&this.register("moveCanvas",(function(e){u.moveCanvas(e)})),d&&this.register("moveSelection",(function(e){d.moveSelection(e.direction,e.accelerated)}))},EditorActions.prototype.trigger=function(e,t){if(!this._actions[e])throw error(e,i);return this._actions[e](t)},EditorActions.prototype.register=function(e,t){var n=this;if("string"===typeof e)return this._registerAction(e,t);Object(o["forEach"])(e,(function(e,t){n._registerAction(t,e)}))},EditorActions.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw error(e,r);this._actions[e]=t},EditorActions.prototype.unregister=function(e){if(!this.isRegistered(e))throw error(e,i);this._actions[e]=void 0},EditorActions.prototype.getActions=function(){return Object.keys(this._actions)},EditorActions.prototype.isRegistered=function(e){return!!this._actions[e]}},"9f71":function(e,t,n){"use strict";n.d(t,"f",(function(){return snapTo})),n.d(t,"g",(function(){return topLeft})),n.d(t,"a",(function(){return bottomRight})),n.d(t,"d",(function(){return mid})),n.d(t,"c",(function(){return isSnapped})),n.d(t,"e",(function(){return setSnapped})),n.d(t,"b",(function(){return getChildren}));var o=Math.abs,i=Math.round;function snapTo(e,t,n){var i,r;for(n=void 0===n?10:n,i=0;i<t.length;i++)if(r=t[i],o(r-e)<=n)return r}function topLeft(e){return{x:e.x,y:e.y}}function bottomRight(e){return{x:e.x+e.width,y:e.y+e.height}}function mid(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:i(e.x+e.width/2),y:i(e.y+e.height/2)}}function isSnapped(e,t){var n=e.snapped;return!!n&&("string"===typeof t?n[t]:n.x&&n.y)}function setSnapped(e,t,n){if("string"!==typeof t)throw new Error("axis must be in [x, y]");if("number"!==typeof n&&!1!==n)throw new Error("value must be Number or false");var o,i=e[t],r=e.snapped=e.snapped||{};return!1===n?r[t]=!1:(r[t]=!0,o=n-i,e[t]+=o,e["d"+t]+=o),i}function getChildren(e){return e.children||[]}},a39d:function(e,t,n){"use strict";var o=n("c5b3"),i=n("87f2"),r=n("b2fc"),a=n("5efa"),c=n("3fb5"),s=n.n(c),u=n("3413"),d=251,l=1401,p="attach-ok";function AttachSupport(e,t,n,o,c){u["a"].call(this,t);var s=e.get("movePreview",!1);t.on("shape.move.start",l,(function(e){var t=e.context,n=t.shapes,o=t.validatedShapes;t.shapes=addAttached(n),t.validatedShapes=removeAttached(o)})),s&&t.on("shape.move.start",d,(function(e){var t=e.context,n=t.shapes,o=getAttachers(n);Object(i["forEach"])(o,(function(e){s.makeDraggable(t,e,!0),Object(i["forEach"])(e.labels,(function(e){s.makeDraggable(t,e,!0)}))}))})),s&&t.on("shape.move.start",(function(e){var o=e.context,i=o.shapes;if(1===i.length){var r=i[0],a=r.host;a&&(n.addMarker(a,p),t.once(["shape.move.out","shape.move.cleanup"],(function(){n.removeMarker(a,p)})))}})),this.preExecuted("elements.move",l,(function(e){var t=e.context,n=t.closure,o=t.shapes,r=getAttachers(o);Object(i["forEach"])(r,(function(e){n.add(e,n.topLevel[e.host.id])}))})),this.postExecuted("elements.move",(function(e){var t,n=e.context,o=n.shapes,r=n.newHost;r&&1!==o.length||(t=r?o:Object(i["filter"])(o,(function(e){var t=e.host;return isAttacher(e)&&!includes(o,t)})),Object(i["forEach"])(t,(function(e){c.updateAttachment(e,r)})))})),this.postExecuted("elements.move",(function(e){var t=e.context.shapes;Object(i["forEach"])(t,(function(e){Object(i["forEach"])(e.attachers,(function(e){Object(i["forEach"])(e.outgoing.slice(),(function(e){var t=o.allowed("connection.reconnect",{connection:e,source:e.source,target:e.target});t||c.removeConnection(e)})),Object(i["forEach"])(e.incoming.slice(),(function(e){var t=o.allowed("connection.reconnect",{connection:e,source:e.source,target:e.target});t||c.removeConnection(e)}))}))}))})),this.postExecute("shape.create",(function(e){var t=e.context,n=t.shape,o=t.host;o&&c.updateAttachment(n,o)})),this.postExecute("shape.replace",(function(e){var t=e.context,n=t.oldShape,s=t.newShape;Object(r["a"])(n.attachers,(function(e){var t=o.allowed("elements.move",{target:s,shapes:[e]});"attach"===t?c.updateAttachment(e,s):c.removeShape(e)})),s.attachers.length&&Object(i["forEach"])(s.attachers,(function(e){var t=Object(a["b"])(e,n,s);c.moveShape(e,t,e.parent)}))})),this.postExecute("shape.resize",(function(e){var t=e.context,n=t.shape,o=t.oldBounds,r=t.newBounds,s=n.attachers,u=t.hints||{};!1!==u.attachSupport&&Object(i["forEach"])(s,(function(e){var t=Object(a["b"])(e,o,r);c.moveShape(e,t,e.parent),Object(i["forEach"])(e.labels,(function(e){c.moveShape(e,t,e.parent)}))}))})),this.preExecute("shape.delete",(function(e){var t=e.context.shape;Object(r["a"])(t.attachers,(function(e){c.removeShape(e)})),t.host&&c.updateAttachment(t,null)}))}function getAttachers(e){return Object(i["flatten"])(Object(i["map"])(e,(function(e){return e.attachers||[]})))}function addAttached(e){var t=getAttachers(e);return Object(i["unionBy"])("id",e,t)}function removeAttached(e){var t=Object(i["groupBy"])(e,"id");return Object(i["filter"])(e,(function(e){while(e){if(e.host&&t[e.host.id])return!1;e=e.parent}return!0}))}function isAttacher(e){return!!e.host}function includes(e,t){return-1!==e.indexOf(t)}s()(AttachSupport,u["a"]),AttachSupport.$inject=["injector","eventBus","canvas","rules","modeling"];t["a"]={__depends__:[o["a"]],__init__:["attachSupport"],attachSupport:["type",AttachSupport]}},acb6:function(e,t,n){"use strict";function center(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function delta(e,t){return{x:e.x-t.x,y:e.y-t.y}}n.d(t,"a",(function(){return center})),n.d(t,"b",(function(){return delta}))},af52:function(e,t,n){"use strict";var o=n("1cff"),i=n("87f2"),r=n("1025");function AutoScroll(e,t,n){this._canvas=n,this._opts=Object(i["assign"])({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var o=this;t.on("drag.move",(function(e){var t=o._toBorderPoint(e);o.startScroll(t)})),t.on(["drag.cleanup"],(function(){o.stopScroll()}))}function between(e,t,n){return t<e&&e<n}AutoScroll.$inject=["config.autoScroll","eventBus","canvas"],AutoScroll.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,o=this,i=t.getContainer().getBoundingClientRect(),r=[e.x,e.y,i.width-e.x,i.height-e.y];this.stopScroll();for(var a=0,c=0,s=0;s<4;s++)between(r[s],n.scrollThresholdOut[s],n.scrollThresholdIn[s])&&(0===s?a=n.scrollStep:1==s?c=n.scrollStep:2==s?a=-n.scrollStep:3==s&&(c=-n.scrollStep));0===a&&0===c||(t.scroll({dx:a,dy:c}),this._scrolling=setTimeout((function(){o.startScroll(e)}),n.scrollRepeatTimeout))},AutoScroll.prototype.stopScroll=function(){clearTimeout(this._scrolling)},AutoScroll.prototype.setOptions=function(e){this._opts=Object(i["assign"])({},this._opts,e)},AutoScroll.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=Object(r["c"])(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};t["a"]={__depends__:[o["a"]],__init__:["autoScroll"],autoScroll:["type",AutoScroll]}},b2fc:function(e,t,n){"use strict";function saveClear(e,t){if("function"!==typeof t)throw new Error("removeFn iterator must be a function");if(e){var n;while(n=e[0])t(n);return e}}n.d(t,"a",(function(){return saveClear}))},b3a6:function(e,t,n){"use strict";var o=n("43c6"),i=n("6b8b"),r=n("e506"),a=n("87f2"),c=500;function Outline(e,t,n){this.offset=6;var o=t.cls("djs-outline",["no-fill"]),s=this;function createOutline(e,t){var n=Object(i["f"])("rect");return Object(i["b"])(n,Object(a["assign"])({x:10,y:10,width:100,height:100},o)),Object(i["a"])(e,n),n}e.on(["shape.added","shape.changed"],c,(function(e){var t=e.element,n=e.gfx,o=Object(r["query"])(".djs-outline",n);o||(o=createOutline(n,t)),s.updateShapeOutline(o,t)})),e.on(["connection.added","connection.changed"],(function(e){var t=e.element,n=e.gfx,o=Object(r["query"])(".djs-outline",n);o||(o=createOutline(n,t)),s.updateConnectionOutline(o,t)}))}Outline.prototype.updateShapeOutline=function(e,t){Object(i["b"])(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},Outline.prototype.updateConnectionOutline=function(e,t){var n=Object(o["b"])(t);Object(i["b"])(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},Outline.$inject=["eventBus","styles","elementRegistry"];t["a"]={__init__:["outline"],outline:["type",Outline]}},b71e:function(e,t,n){"use strict";function translate(e,t){return t=t||{},e.replace(/{([^}]+)}/g,(function(e,n){return t[n]||"{"+n+"}"}))}n.r(t);t["default"]={translate:["value",translate]}},b87a:function(e,t,n){"use strict";var o=n("87f2"),i=n("3fb5"),r=n.n(i),a=n("ea6d"),c=n("b2fc"),s=n("3413"),u=250,d=1400;function LabelSupport(e,t,n){s["a"].call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",d,(function(e){var t=e.context,n=t.shapes,o=t.validatedShapes;t.shapes=removeLabels(n),t.validatedShapes=removeLabels(o)})),i&&t.on("shape.move.start",u,(function(e){var t=e.context,n=t.shapes,r=[];Object(o["forEach"])(n,(function(e){Object(o["forEach"])(e.labels,(function(n){n.hidden||-1!==t.shapes.indexOf(n)||r.push(n),e.labelTarget&&r.push(e)}))})),Object(o["forEach"])(r,(function(e){i.makeDraggable(t,e,!0)}))})),this.preExecuted("elements.move",d,(function(e){var t=e.context,n=t.closure,i=n.enclosedElements,r=[];Object(o["forEach"])(i,(function(e){Object(o["forEach"])(e.labels,(function(e){i[e.id]||r.push(e)}))})),n.addAll(r)})),this.preExecute(["connection.delete","shape.delete"],(function(e){var t=e.context,o=t.connection||t.shape;Object(c["a"])(o.labels,(function(e){n.removeShape(e,{nested:!0})}))})),this.execute("shape.delete",(function(e){var t=e.context,n=t.shape,o=n.labelTarget;o&&(t.labelTargetIndex=Object(a["indexOf"])(o.labels,n),t.labelTarget=o,n.labelTarget=null)})),this.revert("shape.delete",(function(e){var t=e.context,n=t.shape,o=t.labelTarget,i=t.labelTargetIndex;o&&(Object(a["add"])(o.labels,n,i),n.labelTarget=o)}))}function removeLabels(e){return Object(o["filter"])(e,(function(t){return-1===e.indexOf(t.labelTarget)}))}r()(LabelSupport,s["a"]),LabelSupport.$inject=["injector","eventBus","modeling"];t["a"]={__init__:["labelSupport"],labelSupport:["type",LabelSupport]}},bc2f:function(e,t,n){"use strict";n.d(t,"a",(function(){return componentsToPath})),n.d(t,"b",(function(){return createLine})),n.d(t,"c",(function(){return updateLine}));var o=n("6b8b");function componentsToPath(e){return e.join(",").replace(/,?([A-z]),?/g,"$1")}function toSVGPoints(e){for(var t,n="",o=0;t=e[o];o++)n+=t.x+","+t.y+" ";return n}function createLine(e,t){var n=Object(o["f"])("polyline");return Object(o["b"])(n,{points:toSVGPoints(e)}),t&&Object(o["b"])(n,t),n}function updateLine(e,t){return Object(o["b"])(e,{points:toSVGPoints(t)}),e}},c4ba:function(e,t,n){"use strict";var o=n("4e09"),i=n("78f9"),r=n("1502"),a=1500,c="grab";function HandTool(e,t,n,o,r){this._dragging=n;var c=this,s=o.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",a,(function(e){if(Object(i["a"])(e))return this.activateMove(e.originalEvent),!1}),this),s&&s.addListener(a,(function(e){function activateMove(e){c.activateMove(e),window.removeEventListener("mousemove",activateMove)}function deactivateMove(e){isSpace(e.keyEvent)&&(window.removeEventListener("mousemove",activateMove),s.removeListener(deactivateMove,"keyboard.keyup"),n.cancel())}isSpace(e.keyEvent)&&(c.isActive()||(window.addEventListener("mousemove",activateMove),s.addListener(a,deactivateMove,"keyboard.keyup")))}),"keyboard.keydown"),e.on("hand.end",(function(t){var n=t.originalEvent.target;if(!t.hover&&!(n instanceof SVGElement))return!1;e.once("hand.ended",(function(){this.activateMove(t.originalEvent,{reactivate:!0})}),this)}),this),e.on("hand.move.move",(function(e){var n=t.viewbox().scale;t.scroll({dx:e.dx*n,dy:e.dy*n})})),e.on("hand.move.end",(function(t){var n=t.context,o=n.reactivate;return!Object(i["a"])(t)&&o&&e.once("hand.move.ended",(function(e){this.activateHand(e.originalEvent,!0,!0)}),this),!1}),this)}function isSpace(e){return Object(r["c"])(" ",e)}HandTool.$inject=["eventBus","canvas","dragging","injector","toolManager"],HandTool.prototype.activateMove=function(e,t,n){"object"===typeof t&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:c,data:{context:n||{}}})},HandTool.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:c,data:{context:{reactivate:n}}})},HandTool.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateHand()},HandTool.prototype.isActive=function(){var e=this._dragging.context();return!!e&&/^(hand|hand\.move)$/.test(e.prefix)};t["a"]={__depends__:[o["a"]],__init__:["handTool"],handTool:["type",HandTool]}},c5b3:function(e,t,n){"use strict";function Rules(e){this._commandStack=e.get("commandStack",!1)}Rules.$inject=["injector"],Rules.prototype.allowed=function(e,t){var n=!0,o=this._commandStack;return o&&(n=o.canExecute(e,t)),void 0===n||n};t["a"]={__init__:["rules"],rules:["type",Rules]}},c78f:function(e,t,n){"use strict";var o=n("39c0"),i=n("b3a6"),r=n("87f2");function Selection(e){this._eventBus=e,this._selectedElements=[];var t=this;e.on(["shape.remove","connection.remove"],(function(e){var n=e.element;t.deselect(n)})),e.on(["diagram.clear"],(function(e){t.select(null)}))}Selection.$inject=["eventBus"],Selection.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var o=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:o,newSelection:t})}},Selection.prototype.get=function(){return this._selectedElements},Selection.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},Selection.prototype.select=function(e,t){var n=this._selectedElements,o=n.slice();Object(r["isArray"])(e)||(e=e?[e]:[]),t?Object(r["forEach"])(e,(function(e){-1===n.indexOf(e)&&n.push(e)})):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:o,newSelection:n})};var a="hover",c="selected";function SelectionVisuals(e,t,n,o){function addMarker(e,n){t.addMarker(e,n)}function removeMarker(e,n){t.removeMarker(e,n)}this._multiSelectionBox=null,e.on("element.hover",(function(e){addMarker(e.element,a)})),e.on("element.out",(function(e){removeMarker(e.element,a)})),e.on("selection.changed",(function(e){function deselect(e){removeMarker(e,c)}function select(e){addMarker(e,c)}var t=e.oldSelection,n=e.newSelection;Object(r["forEach"])(t,(function(e){-1===n.indexOf(e)&&deselect(e)})),Object(r["forEach"])(n,(function(e){-1===t.indexOf(e)&&select(e)}))}))}SelectionVisuals.$inject=["eventBus","canvas","selection","styles"];var s=n("78f9");function SelectionBehavior(e,t,n,o){e.on("create.end",500,(function(e){var n=e.context,o=n.canExecute,i=n.elements,a=n.hints||{},c=a.autoSelect;if(o){if(!1===c)return;Object(r["isArray"])(c)?t.select(c):t.select(i.filter(isShown))}})),e.on("connect.end",500,(function(e){var n=e.context,o=n.canExecute,i=n.hover;o&&i&&t.select(i)})),e.on("shape.move.end",500,(function(e){var n=e.previousSelection||[],i=o.get(e.context.shape.id),a=Object(r["find"])(n,(function(e){return i.id===e.id}));a||t.select(i)})),e.on("element.click",(function(e){var o=e.element;o===n.getRootElement()&&(o=null);var i=t.isSelected(o),r=t.get().length>1,a=Object(s["a"])(e)||Object(s["b"])(e);if(i&&r)return a?t.deselect(o):t.select(o);i?t.deselect(o):t.select(o,a)}))}function isShown(e){return!e.hidden}SelectionBehavior.$inject=["eventBus","selection","canvas","elementRegistry"];t["a"]={__init__:["selectionVisuals","selectionBehavior"],__depends__:[o["a"],i["a"]],selection:["type",Selection],selectionVisuals:["type",SelectionVisuals],selectionBehavior:["type",SelectionBehavior]}},ca21:function(e,t,n){"use strict";var o=n("87f2"),i=n("e506"),r="data-id",a=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],c=1e3;function PopupMenu(e,t,n){var i=Object(o["isDefined"])(e&&e.scale)?e.scale:{min:1,max:1.5};this._config={scale:i},this._eventBus=t,this._canvas=n,this._providers={},this._current={}}function setTransform(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach((function(n){e.style[n+"transform"]=t}))}PopupMenu.$inject=["config.popupMenu","eventBus","canvas"],PopupMenu.prototype.registerProvider=function(e,t,n){n||(n=t,t=c),this._eventBus.on("popupMenu.getProviders."+e,t,(function(e){e.providers.push(n)}))},PopupMenu.prototype.isEmpty=function(e,t){if(!e)throw new Error("element parameter is missing");if(!t)throw new Error("providerId parameter is missing");var n=this._getProviders(t);if(!n)return!0;var i=this._getEntries(e,n),r=this._getHeaderEntries(e,n),a=Object(o["size"])(i)>0,c=r&&Object(o["size"])(r)>0;return!a&&!c},PopupMenu.prototype.open=function(e,t,n){var i=this._getProviders(t);if(!e)throw new Error("Element is missing");if(!i||!i.length)throw new Error("No registered providers for: "+t);if(!n)throw new Error("the position argument is missing");this.isOpen()&&this.close(),this._emit("open");var r=this._current={className:t,element:e,position:n},a=this._getEntries(e,i),c=this._getHeaderEntries(e,i);r.entries=Object(o["assign"])({},a,c),r.container=this._createContainer(),Object(o["size"])(c)&&r.container.appendChild(this._createEntries(c,"djs-popup-header")),Object(o["size"])(a)&&r.container.appendChild(this._createEntries(a,"djs-popup-body"));var s=this._canvas,u=s.getContainer();this._attachContainer(r.container,u,n.cursor),this._bindAutoClose()},PopupMenu.prototype.close=function(){this.isOpen()&&(this._emit("close"),this._unbindAutoClose(),Object(i["remove"])(this._current.container),this._current.container=null)},PopupMenu.prototype.isOpen=function(){return!!this._current.container},PopupMenu.prototype.trigger=function(e){e.preventDefault();var t=e.delegateTarget||e.target,n=Object(i["attr"])(t,r),o=this._getEntry(n);if(o.action)return o.action.call(null,e,o)},PopupMenu.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers},PopupMenu.prototype._getEntries=function(e,t){var n={};return Object(o["forEach"])(t,(function(t){if(t.getPopupMenuEntries){var i=t.getPopupMenuEntries(e);Object(o["isFunction"])(i)?n=i(n):Object(o["forEach"])(i,(function(e,t){n[t]=e}))}else Object(o["forEach"])(t.getEntries(e),(function(e){var t=e.id;if(!t)throw new Error("every entry must have the id property set");n[t]=Object(o["omit"])(e,["id"])}))})),n},PopupMenu.prototype._getHeaderEntries=function(e,t){var n={};return Object(o["forEach"])(t,(function(t){if(t.getPopupMenuHeaderEntries){var i=t.getPopupMenuHeaderEntries(e);Object(o["isFunction"])(i)?n=i(n):Object(o["forEach"])(i,(function(e,t){n[t]=e}))}else{if(!t.getHeaderEntries)return;Object(o["forEach"])(t.getHeaderEntries(e),(function(e){var t=e.id;if(!t)throw new Error("every entry must have the id property set");n[t]=Object(o["omit"])(e,["id"])}))}})),n},PopupMenu.prototype._getEntry=function(e){var t=this._current.entries[e];if(!t)throw new Error("entry not found");return t},PopupMenu.prototype._emit=function(e){this._eventBus.fire("popupMenu."+e)},PopupMenu.prototype._createContainer=function(){var e=Object(i["domify"])('<div class="djs-popup">'),t=this._current.position,n=this._current.className;return Object(o["assign"])(e.style,{position:"absolute",left:t.x+"px",top:t.y+"px",visibility:"hidden"}),Object(i["classes"])(e).add(n),e},PopupMenu.prototype._attachContainer=function(e,t,n){var o=this;i["delegate"].bind(e,".entry","click",(function(e){o.trigger(e)})),this._updateScale(e),t.appendChild(e),n&&this._assureIsInbounds(e,n)},PopupMenu.prototype._updateScale=function(e){var t,n,i=this._canvas.zoom(),r=this._config.scale,a=i;!0!==r&&(!1===r?(t=1,n=1):(t=r.min,n=r.max),Object(o["isDefined"])(t)&&i<t&&(a=t),Object(o["isDefined"])(n)&&i>n&&(a=n)),setTransform(e,"scale("+a+")")},PopupMenu.prototype._assureIsInbounds=function(e,t){var n,i,r=this._canvas,a=r._container.getBoundingClientRect(),c=e.offsetLeft,s=e.offsetTop,u=e.scrollWidth,d=e.scrollHeight,l={},p={x:t.x-a.left,y:t.y-a.top};c+u>a.width&&(l.x=!0),s+d>a.height&&(l.y=!0),l.x&&l.y?(n=p.x-u+"px",i=p.y-d+"px"):l.x?(n=p.x-u+"px",i=p.y+"px"):l.y&&p.y<d?(n=p.x+"px",i="10px"):l.y&&(n=p.x+"px",i=p.y-d+"px"),Object(o["assign"])(e.style,{left:n,top:i},{visibility:"visible","z-index":1e3})},PopupMenu.prototype._createEntries=function(e,t){var n=Object(i["domify"])("<div>"),r=this;return Object(i["classes"])(n).add(t),Object(o["forEach"])(e,(function(e,t){var o=r._createEntry(e,t);n.appendChild(o)})),n},PopupMenu.prototype._createEntry=function(e,t){var n=Object(i["domify"])("<div>"),o=Object(i["classes"])(n);if(o.add("entry"),e.className&&e.className.split(" ").forEach((function(e){o.add(e)})),Object(i["attr"])(n,r,t),e.label){var a=Object(i["domify"])("<span>");a.textContent=e.label,n.appendChild(a)}return e.imageUrl&&n.appendChild(Object(i["domify"])('<img src="'+e.imageUrl+'" />')),!0===e.active&&o.add("active"),!0===e.disabled&&o.add("disabled"),e.title&&(n.title=e.title),n},PopupMenu.prototype._bindAutoClose=function(){this._eventBus.once(a,this.close,this)},PopupMenu.prototype._unbindAutoClose=function(){this._eventBus.off(a,this.close,this)};t["a"]={__init__:["popupMenu"],popupMenu:["type",PopupMenu]}},d09c:function(e,t,n){"use strict";var o=n("9d6f");t["a"]={__init__:["editorActions"],editorActions:["type",o["a"]]}},d6ce:function(e,t,n){"use strict";n.d(t,"f",(function(){return substractTRBL})),n.d(t,"d",(function(){return resizeBounds})),n.d(t,"e",(function(){return resizeTRBL})),n.d(t,"b",(function(){return ensureConstraints})),n.d(t,"c",(function(){return getMinResizeBounds})),n.d(t,"a",(function(){return computeChildrenBBox}));var o=n("87f2"),i=n("43c6"),r=n("2e42"),a=Math.max,c=Math.min,s=20;function substractTRBL(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function resizeBounds(e,t,n){var o=n.x,i=n.y,r={x:e.x,y:e.y,width:e.width,height:e.height};return-1!==t.indexOf("n")?(r.y=e.y+i,r.height=e.height-i):-1!==t.indexOf("s")&&(r.height=e.height+i),-1!==t.indexOf("e")?r.width=e.width+o:-1!==t.indexOf("w")&&(r.x=e.x+o,r.width=e.width-o),r}function resizeTRBL(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function applyConstraints(e,t,n){var i=t[e],r=n.min&&n.min[e],s=n.max&&n.max[e];return Object(o["isNumber"])(r)&&(i=(/top|left/.test(e)?c:a)(i,r)),Object(o["isNumber"])(s)&&(i=(/top|left/.test(e)?a:c)(i,s)),i}function ensureConstraints(e,t){if(!t)return e;var n=Object(r["b"])(e);return Object(r["a"])({top:applyConstraints("top",n,t),right:applyConstraints("right",n,t),bottom:applyConstraints("bottom",n,t),left:applyConstraints("left",n,t)})}function getMinResizeBounds(e,t,n,o){var i=Object(r["b"])(t),s={top:/n/.test(e)?i.bottom-n.height:i.top,left:/w/.test(e)?i.right-n.width:i.left,bottom:/s/.test(e)?i.top+n.height:i.bottom,right:/e/.test(e)?i.left+n.width:i.right},u=o?Object(r["b"])(o):s,d={top:c(s.top,u.top),left:c(s.left,u.left),bottom:a(s.bottom,u.bottom),right:a(s.right,u.right)};return Object(r["a"])(d)}function asPadding(e,t){return"undefined"!==typeof e?e:s}function addPadding(e,t){var n,o,i,r;return"object"===typeof t?(n=asPadding(t.left),o=asPadding(t.right),i=asPadding(t.top),r=asPadding(t.bottom)):n=o=i=r=asPadding(t),{x:e.x-n,y:e.y-i,width:e.width+n+o,height:e.height+i+r}}function isBBoxChild(e){return!e.waypoints&&"label"!==e.type}function computeChildrenBBox(e,t){var n;if(n=void 0===e.length?Object(o["filter"])(e.children,isBBoxChild):e,n.length)return addPadding(Object(i["b"])(n),t)}},d864:function(e,t,n){"use strict";n.d(t,"a",(function(){return repairConnection})),n.d(t,"b",(function(){return withoutRedundantPoints}));var o=n("87f2"),i=n("2e42"),r=n("6de3"),a=20,c=5,s=Math.round,u=20,d={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function needsTurn(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function canLayoutStraight(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function getSegmentBendpoints(e,t,n){var o,r,u=Object(i["f"])(t,e,c),d=n.split(":")[0],l=s((t.x-e.x)/2+e.x),p=s((t.y-e.y)/2+e.y),h=canLayoutStraight(d,u),f=/h|r|l/.test(d),v=!1,g=!1;return h?(o=f?{x:l,y:e.y}:{x:e.x,y:p},r=f?"h:h":"v:v"):(v=needsTurn(u,d),r=f?"h:v":"v:h",v?f?(g=p===e.y,o={x:e.x+a*(/l/.test(d)?-1:1),y:g?p+a:p}):(g=l===e.x,o={x:g?l+a:l,y:e.y+a*(/t/.test(d)?-1:1)}):o={x:l,y:p}),{waypoints:getBendpoints(e,o,r).concat(o),directions:r,turnNextDirections:g}}function getStartSegment(e,t,n){return getSegmentBendpoints(e,t,n)}function getEndSegment(e,t,n){var o=getSegmentBendpoints(t,e,invertDirections(n));return{waypoints:o.waypoints.slice().reverse(),directions:invertDirections(o.directions),turnNextDirections:o.turnNextDirections}}function getMidSegment(e,t){var n=e.directions.split(":")[1],o=t.directions.split(":")[0];e.turnNextDirections&&(n="h"==n?"v":"h"),t.turnNextDirections&&(o="h"==o?"v":"h");var i=n+":"+o,r=getBendpoints(e.waypoints[e.waypoints.length-1],t.waypoints[0],i);return{waypoints:r,directions:i}}function invertDirections(e){return e.split(":").reverse().join(":")}function getSimpleBendpoints(e,t,n){var o=s((t.x-e.x)/2+e.x),i=s((t.y-e.y)/2+e.y);if("h:v"===n)return[{x:t.x,y:e.y}];if("v:h"===n)return[{x:e.x,y:t.y}];if("h:h"===n)return[{x:o,y:e.y},{x:o,y:t.y}];if("v:v"===n)return[{x:e.x,y:i},{x:t.x,y:i}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function getBendpoints(e,t,n){if(n=n||"h:h",!isValidDirections(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(isExplicitDirections(n)){var o=getStartSegment(e,t,n),i=getEndSegment(e,t,n),r=getMidSegment(o,i);return[].concat(o.waypoints,r.waypoints,i.waypoints)}return getSimpleBendpoints(e,t,n)}function connectPoints(e,t,n){var o=getBendpoints(e,t,n);return o.unshift(e),o.push(t),withoutRedundantPoints(o)}function connectRectangles(e,t,n,r,a){var c=a&&a.preferredLayouts||[],s=Object(o["without"])(c,"straight")[0]||"h:h",u=d[s]||0,l=Object(i["f"])(e,t,u),p=getDirections(l,s);n=n||Object(i["e"])(e),r=r||Object(i["e"])(t);var h=p.split(":"),f=getDockingPoint(n,e,h[0],invertOrientation(l)),v=getDockingPoint(r,t,h[1],l);return connectPoints(f,v,p)}function repairConnection(e,t,n,r,a,c){Object(o["isArray"])(n)&&(a=n,c=r,n=Object(i["e"])(e),r=Object(i["e"])(t)),c=Object(o["assign"])({preferredLayouts:[]},c),a=a||[];var s,u=c.preferredLayouts,d=-1!==u.indexOf("straight");return s=d&&tryLayoutStraight(e,t,n,r,c),s||(s=c.connectionEnd&&tryRepairConnectionEnd(t,e,r,a),s||(s=c.connectionStart&&tryRepairConnectionStart(e,t,n,a),s||(!c.connectionStart&&!c.connectionEnd&&a&&a.length?a:connectRectangles(e,t,n,r,c))))}function inRange(e,t,n){return e>=t&&e<=n}function isInRange(e,t,n){var o={x:"width",y:"height"};return inRange(t[e],n[e],n[e]+n[o[e]])}function tryLayoutStraight(e,t,n,o,r){var a,c,s={};return c=Object(i["f"])(e,t),/^(top|bottom|left|right)$/.test(c)?(/top|bottom/.test(c)&&(a="x"),/left|right/.test(c)&&(a="y"),"target"===r.preserveDocking?isInRange(a,o,e)?(s[a]=o[a],[{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y,original:{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y}},{x:o.x,y:o.y}]):null:isInRange(a,n,t)?(s[a]=n[a],[{x:n.x,y:n.y},{x:void 0!==s.x?s.x:o.x,y:void 0!==s.y?s.y:o.y,original:{x:void 0!==s.x?s.x:o.x,y:void 0!==s.y?s.y:o.y}}]):null):null}function tryRepairConnectionStart(e,t,n,o){return _tryRepairConnectionSide(e,t,n,o)}function tryRepairConnectionEnd(e,t,n,o){var i=o.slice().reverse();return i=_tryRepairConnectionSide(e,t,n,i),i?i.reverse():null}function _tryRepairConnectionSide(e,t,n,i){function needsRelayout(e){return e.length<3||!(e.length>4)&&!!Object(o["find"])(e,(function(t,n){var o=e[n-1];return o&&Object(r["b"])(t,o)<3}))}function repairBendpoint(e,t,n){var o=Object(r["d"])(t,e);switch(o){case"v":return{x:n.x,y:e.y};case"h":return{x:e.x,y:n.y}}return{x:e.x,y:e.y}}function removeOverlapping(e,t,n){var o;for(o=e.length-2;0!==o;o--)if(Object(r["c"])(e[o],t,u)||Object(r["c"])(e[o],n,u))return e.slice(o);return e}if(needsRelayout(i))return null;var a,c=i[0],s=i.slice();return s[0]=n,s[1]=repairBendpoint(s[1],c,n),a=removeOverlapping(s,e,t),a!==s&&(s=_tryRepairConnectionSide(e,t,n,a)),s&&Object(r["d"])(s)?null:s}function getDirections(e,t){if(isExplicitDirections(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function isValidDirections(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function isExplicitDirections(e){return e&&/t|r|b|l/.test(e)}function invertOrientation(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function getDockingPoint(e,t,n,o){if("h"===n&&(n=/left/.test(o)?"l":"r"),"v"===n&&(n=/top/.test(o)?"t":"b"),"t"===n)return{original:e,x:e.x,y:t.y};if("r"===n)return{original:e,x:t.x+t.width,y:e.y};if("b"===n)return{original:e,x:e.x,y:t.y+t.height};if("l"===n)return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function withoutRedundantPoints(e){return e.reduce((function(t,n,o){var i=t[t.length-1],a=e[o+1];return Object(r["e"])(i,a,n,0)||t.push(n),t}),[])}},da34:function(e,t,n){"use strict";function getVisual(e){return e.childNodes[0]}function getChildren(e){return e.parentNode.childNodes[1]}n.d(t,"b",(function(){return getVisual})),n.d(t,"a",(function(){return getChildren}))},dbec:function(e,t,n){"use strict";var o=n("39c0"),i=n("87f2"),r=n("e506"),a=n("c8b5"),c=n.n(a),s=n("1025"),u=.2,d=4,l=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function log(){}function get(e,t){return t.get(e,!1)}function stopEvent(e){e.preventDefault(),"function"===typeof e.stopPropagation?e.stopPropagation():e.srcEvent&&"function"===typeof e.srcEvent.stopPropagation&&e.srcEvent.stopPropagation(),"function"===typeof e.stopImmediatePropagation&&e.stopImmediatePropagation()}function createTouchRecognizer(e){function stopMouse(t){Object(i["forEach"])(l,(function(t){r["event"].bind(e,t,stopEvent,!0)}))}function allowMouse(t){setTimeout((function(){Object(i["forEach"])(l,(function(t){r["event"].unbind(e,t,stopEvent,!0)}))}),500)}r["event"].bind(e,"touchstart",stopMouse,!0),r["event"].bind(e,"touchend",allowMouse,!0),r["event"].bind(e,"touchcancel",allowMouse,!0);var t=new c.a.Manager(e,{inputClass:c.a.TouchInput,recognizers:[],domEvents:!0}),n=new c.a.Tap,o=new c.a.Pan({threshold:10}),a=new c.a.Press,s=new c.a.Pinch,u=new c.a.Tap({event:"doubletap",taps:2});return s.requireFailure(o),s.requireFailure(a),t.add([o,a,s,u,n]),t.reset=function(e){var n=this.recognizers,o=this.session;o.stopped||(log("recognizer","stop"),t.stop(e),setTimeout((function(){var e,t;for(log("recognizer","reset"),e=0;t=n[e];e++)t.reset(),t.state=8;o.curRecognizer=null}),0))},t.on("hammer.input",(function(e){e.srcEvent.defaultPrevented&&t.reset(!0)})),t}function TouchInteractionEvents(e,t,n,o,i){var a,c=get("dragging",e),l=get("move",e),p=get("contextPad",e),h=get("palette",e);function handler(e){return function(t){log("element",e,t),i.fire(e,t)}}function getGfx(e){var t=Object(r["closest"])(e,"svg, .djs-element",!0);return t}function initEvents(e){function startGrabCanvas(e){log("canvas","grab start");var n=0,o=0;function update(e){var i=e.deltaX-n,r=e.deltaY-o;t.scroll({dx:i,dy:r}),n=e.deltaX,o=e.deltaY}function end(e){a.off("panmove",update),a.off("panend",end),a.off("pancancel",end),log("canvas","grab end")}a.on("panmove",update),a.on("panend",end),a.on("pancancel",end)}function startGrab(e){var n=getGfx(e.target),i=n&&o.get(n);if(l&&t.getRootElement()!==i)return log("element","move start",i,e,!0),l.start(e,i,!0);startGrabCanvas(e)}function startZoom(e){log("canvas","zoom start");var n=t.zoom(),o=e.center;function update(e){var i=1-(1-e.scale)/1.5,r=Math.max(u,Math.min(d,i*n));t.zoom(r,o),stopEvent(e)}function end(e){a.off("pinchmove",update),a.off("pinchend",end),a.off("pinchcancel",end),a.reset(!0),log("canvas","zoom end")}a.on("pinchmove",update),a.on("pinchend",end),a.on("pinchcancel",end)}a=createTouchRecognizer(e),a.on("doubletap",handler("element.dblclick")),a.on("tap",handler("element.click")),a.on("panstart",startGrab),a.on("press",startGrab),a.on("pinchstart",startZoom)}c&&n.on("drag.move",(function(e){var t=e.originalEvent;if(t&&!(t instanceof MouseEvent)){var n=Object(s["c"])(t),i=document.elementFromPoint(n.x,n.y),r=getGfx(i),a=r&&o.get(r);a!==e.hover&&(e.hover&&c.out(e),a&&(c.hover({element:a,gfx:r}),e.hover=a,e.hoverGfx=r))}})),p&&n.on("contextPad.create",(function(e){var t=e.pad.html,n=createTouchRecognizer(t);n.on("panstart",(function(e){log("context-pad","panstart",e),p.trigger("dragstart",e,!0)})),n.on("press",(function(e){log("context-pad","press",e),p.trigger("dragstart",e,!0)})),n.on("tap",(function(e){log("context-pad","tap",e),p.trigger("click",e)}))})),h&&n.on("palette.create",(function(e){var t=e.container,n=createTouchRecognizer(t);n.on("panstart",(function(e){log("palette","panstart",e),h.trigger("dragstart",e,!0)})),n.on("press",(function(e){log("palette","press",e),h.trigger("dragstart",e,!0)})),n.on("tap",(function(e){log("palette","tap",e),h.trigger("click",e)}))})),n.on("canvas.init",(function(e){initEvents(e.svg)}))}TouchInteractionEvents.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"];var p=n("6b8b");function TouchFix(e,t){var n=this;t.on("canvas.init",(function(e){n.addBBoxMarker(e.svg)}))}TouchFix.$inject=["canvas","eventBus"],TouchFix.prototype.addBBoxMarker=function(e){var t={fill:"none",class:"outer-bound-marker"},n=Object(p["f"])("rect");Object(p["b"])(n,{x:-1e4,y:1e4,width:10,height:10}),Object(p["b"])(n,t),Object(p["a"])(e,n);var o=Object(p["f"])("rect");Object(p["b"])(o,{x:1e4,y:1e4,width:10,height:10}),Object(p["b"])(o,t),Object(p["a"])(e,o)};var h={__depends__:[o["a"]],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",TouchInteractionEvents],touchFix:["type",TouchFix]};t["a"]={__depends__:[h]}},dd5f:function(e,t,n){"use strict";n.d(t,"a",(function(){return Base})),n.d(t,"b",(function(){return Label})),n.d(t,"c",(function(){return create}));var o=n("87f2"),i=n("3fb5"),r=n.n(i),a=n("8fcf"),c=n.n(a),s=new c.a({name:"children",enumerable:!0,collection:!0},{name:"parent"}),u=new c.a({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),d=new c.a({name:"attachers",collection:!0},{name:"host"}),l=new c.a({name:"outgoing",collection:!0},{name:"source"}),p=new c.a({name:"incoming",collection:!0},{name:"target"});function Base(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),s.bind(this,"parent"),u.bind(this,"labels"),l.bind(this,"outgoing"),p.bind(this,"incoming")}function Shape(){Base.call(this),s.bind(this,"children"),d.bind(this,"host"),d.bind(this,"attachers")}function Root(){Shape.call(this)}function Label(){Shape.call(this),u.bind(this,"labelTarget")}function Connection(){Base.call(this),l.bind(this,"source"),p.bind(this,"target")}r()(Shape,Base),r()(Root,Shape),r()(Label,Shape),r()(Connection,Base);var h={connection:Connection,shape:Shape,label:Label,root:Root};function create(e,t){var n=h[e];if(!n)throw new Error("unknown type: <"+e+">");return Object(o["assign"])(new n,t)}},dda7:function(e,t,n){"use strict";n.d(t,"a",(function(){return set})),n.d(t,"b",(function(){return unset}));var o=n("e506"),i=/^djs-cursor-.*$/;function set(e){var t=Object(o["classes"])(document.body);t.removeMatching(i),e&&t.add("djs-cursor-"+e)}function unset(){set(null)}},dfac:function(e,t,n){"use strict";var o=n("87f2"),i=Math.round;function Replace(e){this._modeling=e}Replace.$inject=["modeling"],Replace.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var r=this._modeling,a=t.width||e.width,c=t.height||e.height,s=t.x||e.x,u=t.y||e.y,d=i(s+a/2),l=i(u+c/2);return r.replaceShape(e,Object(o["assign"])({},t,{x:d,y:l,width:a,height:c}),n)};t["a"]={__init__:["replace"],replace:["type",Replace]}},e116:function(e,t,n){"use strict";n.d(t,"b",(function(){return transform})),n.d(t,"c",(function(){return translate})),n.d(t,"a",(function(){return rotate}));var o=n("6b8b");function transform(e,t,n,i,r){var a=Object(o["h"])();a.setTranslate(t,n);var c=Object(o["h"])();c.setRotate(i||0,0,0);var s=Object(o["h"])();s.setScale(r||1,r||1),Object(o["k"])(e,[a,c,s])}function translate(e,t,n){var i=Object(o["h"])();i.setTranslate(t,n),Object(o["k"])(e,i)}function rotate(e,t){var n=Object(o["h"])();n.setRotate(t,0,0),Object(o["k"])(e,n)}},e645:function(e,t,n){"use strict";var o=n("c78f"),i=n("c5b3"),r=n("1cff"),a=n("2e42"),c=n("87f2");function Connect(e,t,n,o){function canConnect(e,t){return o.allowed("connection.create",{source:e,target:t})}function canConnectReverse(e,t){return canConnect(t,e)}e.on("connect.hover",(function(e){var t,n=e.context,o=n.start,i=e.hover;if(n.hover=i,t=n.canExecute=canConnect(o,i),!Object(c["isNil"])(t)){if(!1!==t)return n.source=o,void(n.target=i);t=n.canExecute=canConnectReverse(o,i),Object(c["isNil"])(t)||!1!==t&&(n.source=i,n.target=o)}})),e.on(["connect.out","connect.cleanup"],(function(e){var t=e.context;t.hover=null,t.source=null,t.target=null,t.canExecute=!1})),e.on("connect.end",(function(e){var t=e.context,o=t.canExecute,i=t.connectionStart,r={x:e.x,y:e.y},a=t.source,s=t.target;if(!o)return!1;var u=null,d={connectionStart:isReverse(t)?r:i,connectionEnd:isReverse(t)?i:r};Object(c["isObject"])(o)&&(u=o),n.connect(a,s,u,d)})),this.start=function(e,n,o,i){Object(c["isObject"])(o)||(i=o,o=Object(a["e"])(n)),t.init(e,"connect",{autoActivate:i,data:{shape:n,context:{start:n,connectionStart:o}}})}}function isReverse(e){var t=e.hover,n=e.source,o=e.target;return t&&n&&t===n&&n!==o}Connect.$inject=["eventBus","dragging","modeling","rules"];var s=1100,u=900,d="connect-ok",l="connect-not-ok";function ConnectPreview(e,t,n){var o=e.get("connectionPreview",!1);o&&t.on("connect.move",(function(e){var t=e.context,n=t.canExecute,i=t.hover,r=t.source,a=t.start,c=t.startPosition,s=t.connectionStart,u=t.connectionEnd,d=t.target;s||(s=isReverse(t)?{x:e.x,y:e.y}:c),u||(u=isReverse(t)?c:{x:e.x,y:e.y}),o.drawPreview(t,n,{source:r||a,target:d||i,connectionStart:s,connectionEnd:u})})),t.on("connect.hover",u,(function(e){var t=e.context,o=e.hover,i=t.canExecute;null!==i&&n.addMarker(o,i?d:l)})),t.on(["connect.out","connect.cleanup"],s,(function(e){var t=e.hover;t&&(n.removeMarker(t,d),n.removeMarker(t,l))})),o&&t.on("connect.cleanup",(function(e){o.cleanUp(e.context)}))}ConnectPreview.$inject=["injector","eventBus","canvas"];t["a"]={__depends__:[o["a"],i["a"],r["a"]],__init__:["connectPreview"],connect:["type",Connect],connectPreview:["type",ConnectPreview]}},e82a:function(e,t,n){"use strict";var o=n("2f93"),i=n("c78f"),r=n("87f2"),a={moveSpeed:1,moveSpeedAccelerated:10},c=1500,s="left",u="up",d="right",l="down",p={ArrowLeft:s,Left:s,ArrowUp:u,Up:u,ArrowRight:d,Right:d,ArrowDown:l,Down:l},h={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function KeyboardMoveSelection(e,t,n,o,i){var s=this;this._config=Object(r["assign"])({},a,e||{}),t.addListener(c,(function(e){var n=e.keyEvent,o=p[n.key];if(o&&!t.isCmd(n)){var i=t.isShift(n);return s.moveSelection(o,i),!0}})),this.moveSelection=function(e,t){var r=i.get();if(r.length){var a=this._config[t?"moveSpeedAccelerated":"moveSpeed"],c=h[e](a),s=o.allowed("elements.move",{shapes:r});s&&n.moveElements(r,c)}}}KeyboardMoveSelection.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];t["a"]={__depends__:[o["a"],i["a"]],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",KeyboardMoveSelection]}},ea6d:function(e,t,n){"use strict";function remove(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return-1!==n&&e.splice(n,1),n}function add(e,t,n){if(e&&t){"number"!==typeof n&&(n=-1);var o=e.indexOf(t);if(-1!==o){if(o===n)return;if(-1===n)return;e.splice(o,1)}-1!==n?e.splice(n,0,t):e.push(t)}}function indexOf(e,t){return e&&t?e.indexOf(t):-1}n.r(t),n.d(t,"remove",(function(){return remove})),n.d(t,"add",(function(){return add})),n.d(t,"indexOf",(function(){return indexOf}))},f217:function(e,t,n){"use strict";var o=n("87f2"),i=n("e506"),r=n("1651"),a=new r["a"]("tt");function createRoot(e){var t=Object(i["domify"])('<div class="djs-tooltip-container" style="position: absolute; width: 0; height: 0;" />');return e.insertBefore(t,e.firstChild),t}function setPosition(e,t,n){Object(o["assign"])(e.style,{left:t+"px",top:n+"px"})}function setVisible(e,t){e.style.display=!1===t?"none":""}var c="djs-tooltip",s="."+c;function Tooltips(e,t){this._eventBus=e,this._canvas=t,this._ids=a,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=createRoot(t.getContainer());var n=this;i["delegate"].bind(this._tooltipRoot,s,"mousedown",(function(e){e.stopPropagation()})),i["delegate"].bind(this._tooltipRoot,s,"mouseover",(function(e){n.trigger("mouseover",e)})),i["delegate"].bind(this._tooltipRoot,s,"mouseout",(function(e){n.trigger("mouseout",e)})),this._init()}Tooltips.$inject=["eventBus","canvas"],Tooltips.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=Object(o["assign"])({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t},Tooltips.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,o=this.get(Object(i["attr"])(n,"data-tooltip-id"));o&&("mouseover"===e&&o.timeout&&this.clearTimeout(o),"mouseout"===e&&o.timeout&&(o.timeout=1e3,this.setTimeout(o)))},Tooltips.prototype.get=function(e){return"string"!==typeof e&&(e=e.id),this._tooltips[e]},Tooltips.prototype.clearTimeout=function(e){if(e=this.get(e),e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}},Tooltips.prototype.setTimeout=function(e){if(e=this.get(e),e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout((function(){t.remove(e)}),e.timeout)}},Tooltips.prototype.remove=function(e){var t=this.get(e);t&&(Object(i["remove"])(t.html),Object(i["remove"])(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])},Tooltips.prototype.show=function(){setVisible(this._tooltipRoot)},Tooltips.prototype.hide=function(){setVisible(this._tooltipRoot,!1)},Tooltips.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,o="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=o,this._tooltipRoot.style["-ms-transform"]=o},Tooltips.prototype._addTooltip=function(e){var t,n=e.id,r=e.html,a=this._tooltipRoot;r.get&&r.constructor.prototype.jquery&&(r=r.get(0)),Object(o["isString"])(r)&&(r=Object(i["domify"])(r)),t=Object(i["domify"])('<div data-tooltip-id="'+n+'" class="'+c+'" style="position: absolute">'),t.appendChild(r),e.type&&Object(i["classes"])(t).add("djs-tooltip-"+e.type),e.className&&Object(i["classes"])(t).add(e.className),e.htmlContainer=t,a.appendChild(t),this._tooltips[n]=e,this._updateTooltip(e)},Tooltips.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;setPosition(n,t.x,t.y)},Tooltips.prototype._updateTooltipVisibilty=function(e){Object(o["forEach"])(this._tooltips,(function(t){var n=t.show,o=t.htmlContainer,i=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(i=!1),setVisible(o,i))}))},Tooltips.prototype._init=function(){var e=this;function updateViewbox(t){e._updateRoot(t),e._updateTooltipVisibilty(t),e.show()}this._eventBus.on("canvas.viewbox.changing",(function(t){e.hide()})),this._eventBus.on("canvas.viewbox.changed",(function(e){updateViewbox(e.viewbox)}))};t["a"]={__init__:["tooltips"],tooltips:["type",Tooltips]}},f384:function(e,t,n){"use strict";n.d(t,"a",(function(){return Diagram}));var o=n("b6a0"),i=n("3fb5"),r=n.n(i),a=n("9036"),c=n("bc2f"),s=n("6b8b"),u=n("43c6"),d=1;function DefaultRenderer(e,t){a["a"].call(this,e,d),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}r()(DefaultRenderer,a["a"]),DefaultRenderer.prototype.canRender=function(){return!0},DefaultRenderer.prototype.drawShape=function drawShape(e,t){var n=Object(s["f"])("rect");return Object(s["b"])(n,{x:0,y:0,width:t.width||0,height:t.height||0}),Object(u["g"])(t)?Object(s["b"])(n,this.FRAME_STYLE):Object(s["b"])(n,this.SHAPE_STYLE),Object(s["a"])(e,n),n},DefaultRenderer.prototype.drawConnection=function drawConnection(e,t){var n=Object(c["b"])(t.waypoints,this.CONNECTION_STYLE);return Object(s["a"])(e,n),n},DefaultRenderer.prototype.getShapePath=function getShapePath(e){var t=e.x,n=e.y,o=e.width,i=e.height,r=[["M",t,n],["l",o,0],["l",0,i],["l",-o,0],["z"]];return Object(c["a"])(r)},DefaultRenderer.prototype.getConnectionPath=function getConnectionPath(e){var t,n,o=e.waypoints,i=[];for(t=0;n=o[t];t++)n=n.original||n,i.push([0===t?"M":"L",n.x,n.y]);return Object(c["a"])(i)},DefaultRenderer.$inject=["eventBus","styles"];var l=n("87f2");function Styles(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(e,t,n){var o=this.style(t,n);return Object(l["assign"])(o,{class:e})},this.style=function(t,n){Object(l["isArray"])(t)||n||(n=t,t=[]);var o=Object(l["reduce"])(t,(function(t,n){return Object(l["assign"])(t,e[n]||{})}),{});return n?Object(l["assign"])(o,n):o},this.computeStyle=function(e,n,o){return Object(l["isArray"])(n)||(o=n,n=[]),t.style(n||[],Object(l["assign"])({},o,e||{}))}}var p={__init__:["defaultRenderer"],defaultRenderer:["type",DefaultRenderer],styles:["type",Styles]},h=n("ea6d");function round(e,t){return Math.round(e*t)/t}function ensurePx(e){return Object(l["isNumber"])(e)?e+"px":e}function createContainer(e){e=Object(l["assign"])({},{width:"100%",height:"100%"},e);var t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container"),Object(l["assign"])(n.style,{position:"relative",overflow:"hidden",width:ensurePx(e.width),height:ensurePx(e.height)}),t.appendChild(n),n}function createGroup(e,t,n){var o=Object(s["f"])("g");Object(s["c"])(o).add(t);var i=void 0!==n?n:e.childNodes.length-1;return e.insertBefore(o,e.childNodes[i]||null),o}var f="base",v={shape:["x","y","width","height"],connection:["waypoints"]};function Canvas(e,t,n,o){this._eventBus=t,this._elementRegistry=o,this._graphicsFactory=n,this._init(e||{})}function setCTM(e,t){var n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}Canvas.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],Canvas.prototype._init=function(e){var t=this._eventBus,n=this._container=createContainer(e),o=this._svg=Object(s["f"])("svg");Object(s["b"])(o,{width:"100%",height:"100%"}),Object(s["a"])(n,o);var i=this._viewport=createGroup(o,"viewport");this._layers={},!1!==e.deferUpdate&&(this._viewboxChanged=Object(l["debounce"])(Object(l["bind"])(this._viewboxChanged,this),300)),t.on("diagram.init",(function(){t.fire("canvas.init",{svg:o,viewport:i})}),this),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed"],(function(){delete this._cachedViewbox}),this),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)},Canvas.prototype._destroy=function(e){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var t=this._container.parentNode;t&&t.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},Canvas.prototype._clear=function(){var e=this,t=this._elementRegistry.getAll();t.forEach((function(t){var n=Object(u["f"])(t);"root"===n?e.setRootElement(null,!0):e._removeElement(t,n)})),delete this._cachedViewbox},Canvas.prototype.getDefaultLayer=function(){return this.getLayer(f,0)},Canvas.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");var n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),"undefined"!==typeof t&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group},Canvas.prototype._createLayer=function(e,t){t||(t=0);var n=Object(l["reduce"])(this._layers,(function(e,n){return t>=n.index&&e++,e}),0);return{group:createGroup(this._viewport,"layer-"+e,n),index:t}},Canvas.prototype.getContainer=function(){return this._container},Canvas.prototype._updateMarker=function(e,t,n){var o;e.id||(e=this._elementRegistry.get(e)),o=this._elementRegistry._elements[e.id],o&&(Object(l["forEach"])([o.gfx,o.secondaryGfx],(function(e){e&&(n?Object(s["c"])(e).add(t):Object(s["c"])(e).remove(t))})),this._eventBus.fire("element.marker.update",{element:e,gfx:o.gfx,marker:t,add:!!n}))},Canvas.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},Canvas.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},Canvas.prototype.hasMarker=function(e,t){e.id||(e=this._elementRegistry.get(e));var n=this.getGraphics(e);return Object(s["c"])(n).has(t)},Canvas.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},Canvas.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement},Canvas.prototype.setRootElement=function(e,t){e&&this._ensureValid("root",e);var n=this._rootElement,o=this._elementRegistry,i=this._eventBus;if(n){if(!t)throw new Error("rootElement already set, need to specify override");i.fire("root.remove",{element:n}),i.fire("root.removed",{element:n}),o.remove(n)}if(e){var r=this.getDefaultLayer();i.fire("root.add",{element:e}),o.add(e,r,this._svg),i.fire("root.added",{element:e,gfx:r})}return this._rootElement=e,e},Canvas.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element with id "+t.id+" already exists");var n=v[e],o=Object(l["every"])(n,(function(e){return"undefined"!==typeof t[e]}));if(!o)throw new Error("must supply { "+n.join(", ")+" } with "+e)},Canvas.prototype._setParent=function(e,t,n){Object(h["add"])(t.children,e,n),e.parent=t},Canvas.prototype._addElement=function(e,t,n,o){n=n||this.getRootElement();var i=this._eventBus,r=this._graphicsFactory;this._ensureValid(e,t),i.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,o);var a=r.create(e,t,o);return this._elementRegistry.add(t,a),r.update(e,t,a),i.fire(e+".added",{element:t,gfx:a}),t},Canvas.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},Canvas.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},Canvas.prototype._removeElement=function(e,t){var n=this._elementRegistry,o=this._graphicsFactory,i=this._eventBus;if(e=n.get(e.id||e),e)return i.fire(t+".remove",{element:e}),o.remove(e),Object(h["remove"])(e.parent&&e.parent.children,e),e.parent=null,i.fire(t+".removed",{element:e}),n.remove(e),e},Canvas.prototype.removeShape=function(e){return this._removeElement(e,"shape")},Canvas.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},Canvas.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},Canvas.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},Canvas.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},Canvas.prototype.viewbox=function(e){if(void 0===e&&this._cachedViewbox)return this._cachedViewbox;var t,n,o,i,r,a,c=this._viewport,u=this.getSize();return e?(this._changeViewbox((function(){i=Math.min(u.width/e.width,u.height/e.height);var t=this._svg.createSVGMatrix().scale(i).translate(-e.x,-e.y);Object(s["k"])(c,t)})),e):(t=this.getDefaultLayer().getBBox(),o=Object(s["k"])(c),n=o?o.matrix:Object(s["g"])(),i=round(n.a,1e3),r=round(-n.e||0,1e3),a=round(-n.f||0,1e3),e=this._cachedViewbox={x:r?r/i:0,y:a?a/i:0,width:u.width/i,height:u.height/i,scale:i,inner:{width:t.width,height:t.height,x:t.x,y:t.y},outer:u},e)},Canvas.prototype.scroll=function(e){var t=this._viewport,n=t.getCTM();return e&&this._changeViewbox((function(){e=Object(l["assign"])({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),setCTM(t,n)})),{x:n.e,y:n.f}},Canvas.prototype.zoom=function(e,t){return e?"fit-viewport"===e?this._fitViewport(t):(this._changeViewbox((function(){"object"!==typeof t&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),o=this._setZoom(e,t)})),round(o.a,1e3)):this.viewbox(e).scale;var n,o},Canvas.prototype._fitViewport=function(e){var t,n,o=this.viewbox(),i=o.outer,r=o.inner;return r.x>=0&&r.y>=0&&r.x+r.width<=i.width&&r.y+r.height<=i.height&&!e?n={x:0,y:0,width:Math.max(r.width+r.x,i.width),height:Math.max(r.height+r.y,i.height)}:(t=Math.min(1,i.width/r.width,i.height/r.height),n={x:r.x+(e?r.width/2-i.width/t/2:0),y:r.y+(e?r.height/2-i.height/t/2:0),width:i.width/t,height:i.height/t}),this.viewbox(n),this.viewbox(!1).scale},Canvas.prototype._setZoom=function(e,t){var n,o,i,r,a,c=this._svg,s=this._viewport,u=c.createSVGMatrix(),d=c.createSVGPoint();i=s.getCTM();var p=i.a;return t?(n=Object(l["assign"])(d,t),o=n.matrixTransform(i.inverse()),r=u.translate(o.x,o.y).scale(1/p*e).translate(-o.x,-o.y),a=i.multiply(r)):a=u.scale(e),setCTM(this._viewport,a),a},Canvas.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},Canvas.prototype.getAbsoluteBBox=function(e){var t,n=this.viewbox();if(e.waypoints){var o=this.getGraphics(e);t=o.getBBox()}else t=e;var i=t.x*n.scale-n.x*n.scale,r=t.y*n.scale-n.y*n.scale,a=t.width*n.scale,c=t.height*n.scale;return{x:i,y:r,width:a,height:c}},Canvas.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var g="data-element-id";function ElementRegistry(e){this._elements={},this._eventBus=e}ElementRegistry.$inject=["eventBus"],ElementRegistry.prototype.add=function(e,t,n){var o=e.id;this._validateId(o),Object(s["b"])(t,g,o),n&&Object(s["b"])(n,g,o),this._elements[o]={element:e,gfx:t,secondaryGfx:n}},ElementRegistry.prototype.remove=function(e){var t=this._elements,n=e.id||e,o=n&&t[n];o&&(Object(s["b"])(o.gfx,g,""),o.secondaryGfx&&Object(s["b"])(o.secondaryGfx,g,""),delete t[n])},ElementRegistry.prototype.updateId=function(e,t){this._validateId(t),"string"===typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),o=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,o)},ElementRegistry.prototype.get=function(e){var t;t="string"===typeof e?e:e&&Object(s["b"])(e,g);var n=this._elements[t];return n&&n.element},ElementRegistry.prototype.filter=function(e){var t=[];return this.forEach((function(n,o){e(n,o)&&t.push(n)})),t},ElementRegistry.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),o=0;o<n.length;o++){var i=n[o],r=t[i],a=r.element,c=r.gfx;if(e(a,c))return a}},ElementRegistry.prototype.getAll=function(){return this.filter((function(e){return e}))},ElementRegistry.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach((function(n){var o=t[n],i=o.element,r=o.gfx;return e(i,r)}))},ElementRegistry.prototype.getGraphics=function(e,t){var n=e.id||e,o=this._elements[n];return o&&(t?o.secondaryGfx:o.gfx)},ElementRegistry.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};var y=n("4888"),m="__fn",b=1e3,x=Array.prototype.slice;function EventBus(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function InternalEvent(){}function invokeFunction(e,t){return e.apply(null,t)}EventBus.prototype.on=function(e,t,n,o){if(e=Object(l["isArray"])(e)?e:[e],Object(l["isFunction"])(t)&&(o=n,n=t,t=b),!Object(l["isNumber"])(t))throw new Error("priority must be a number");var i=n;o&&(i=Object(l["bind"])(n,o),i[m]=n[m]||n);var r=this;e.forEach((function(e){r._addListener(e,{priority:t,callback:i,next:null})}))},EventBus.prototype.once=function(e,t,n,o){var i=this;if(Object(l["isFunction"])(t)&&(o=n,n=t,t=b),!Object(l["isNumber"])(t))throw new Error("priority must be a number");function wrappedCallback(){var t=n.apply(o,arguments);return i.off(e,wrappedCallback),t}wrappedCallback[m]=n,this.on(e,t,wrappedCallback)},EventBus.prototype.off=function(e,t){e=Object(l["isArray"])(e)?e:[e];var n=this;e.forEach((function(e){n._removeListener(e,t)}))},EventBus.prototype.createEvent=function(e){var t=new InternalEvent;return t.init(e),t},EventBus.prototype.fire=function(e,t){var n,o,i,r;if(r=x.call(arguments),"object"===typeof e&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(o=this._listeners[e],o){n=t instanceof InternalEvent?t:this.createEvent(t),r[0]=n;var a=n.type;e!==a&&(n.type=e);try{i=this._invokeListeners(n,r,o)}finally{e!==a&&(n.type=a)}return void 0===i&&n.defaultPrevented&&(i=!1),i}},EventBus.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},EventBus.prototype._destroy=function(){this._listeners={}},EventBus.prototype._invokeListeners=function(e,t,n){var o;while(n){if(e.cancelBubble)break;o=this._invokeListener(e,t,n),n=n.next}return o},EventBus.prototype._invokeListener=function(e,t,n){var o;try{o=invokeFunction(n.callback,t),void 0!==o&&(e.returnValue=o,e.stopPropagation()),!1===o&&e.preventDefault()}catch(i){if(!this.handleError(i))throw console.error("unhandled error in event listener"),console.error(i.stack),i}return o},EventBus.prototype._addListener=function(e,t){var n,o=this._getListeners(e);if(o){while(o){if(o.priority<t.priority)return t.next=o,void(n?n.next=t:this._setListeners(e,t));n=o,o=o.next}n.next=t}else this._setListeners(e,t)},EventBus.prototype._getListeners=function(e){return this._listeners[e]},EventBus.prototype._setListeners=function(e,t){this._listeners[e]=t},EventBus.prototype._removeListener=function(e,t){var n,o,i,r=this._getListeners(e);if(t)while(r)n=r.next,i=r.callback,i!==t&&i[m]!==t||(o?o.next=n:this._setListeners(e,n)),o=r,r=n;else this._setListeners(e,null)},InternalEvent.prototype.stopPropagation=function(){this.cancelBubble=!0},InternalEvent.prototype.preventDefault=function(){this.defaultPrevented=!0},InternalEvent.prototype.init=function(e){Object(l["assign"])(this,e||{})};var _=n("da34"),j=n("e116"),O=n("e506");function GraphicsFactory(e,t){this._eventBus=e,this._elementRegistry=t}function prependTo(e,t,n){var o=n||t.firstChild;e!==o&&t.insertBefore(e,o)}GraphicsFactory.$inject=["eventBus","elementRegistry"],GraphicsFactory.prototype._getChildrenContainer=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=Object(_["a"])(n),t||(t=Object(s["f"])("g"),Object(s["c"])(t).add("djs-children"),Object(s["a"])(n.parentNode,t))):t=n,t},GraphicsFactory.prototype._clear=function(e){var t=Object(_["b"])(e);return Object(O["clear"])(t),t},GraphicsFactory.prototype._createContainer=function(e,t,n,o){var i=Object(s["f"])("g");Object(s["c"])(i).add("djs-group"),"undefined"!==typeof n?prependTo(i,t,t.childNodes[n]):Object(s["a"])(t,i);var r=Object(s["f"])("g");Object(s["c"])(r).add("djs-element"),Object(s["c"])(r).add("djs-"+e),o&&Object(s["c"])(r).add("djs-frame"),Object(s["a"])(i,r);var a=Object(s["f"])("g");return Object(s["c"])(a).add("djs-visual"),Object(s["a"])(r,a),r},GraphicsFactory.prototype.create=function(e,t,n){var o=this._getChildrenContainer(t.parent);return this._createContainer(e,o,n,Object(u["g"])(t))},GraphicsFactory.prototype.updateContainments=function(e){var t,n=this,o=this._elementRegistry;t=Object(l["reduce"])(e,(function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e}),{}),Object(l["forEach"])(t,(function(e){var t=e.children;if(t){var i=n._getChildrenContainer(e);Object(l["forEach"])(t.slice().reverse(),(function(e){var t=o.getGraphics(e);prependTo(t.parentNode,i)}))}}))},GraphicsFactory.prototype.drawShape=function(e,t){var n=this._eventBus;return n.fire("render.shape",{gfx:e,element:t})},GraphicsFactory.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)},GraphicsFactory.prototype.drawConnection=function(e,t){var n=this._eventBus;return n.fire("render.connection",{gfx:e,element:t})},GraphicsFactory.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)},GraphicsFactory.prototype.update=function(e,t,n){if(t.parent){var o=this._clear(n);if("shape"===e)this.drawShape(o,t),Object(j["c"])(n,t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(o,t)}t.hidden?Object(s["b"])(n,"display","none"):Object(s["b"])(n,"display","block")}},GraphicsFactory.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);Object(s["j"])(t.parentNode)};var w={__depends__:[p],__init__:["canvas"],canvas:["type",Canvas],elementRegistry:["type",ElementRegistry],elementFactory:["type",y["a"]],eventBus:["type",EventBus],graphicsFactory:["type",GraphicsFactory]};function bootstrap(e){var t=[],n=[];function hasModule(e){return t.indexOf(e)>=0}function addModule(e){t.push(e)}function visit(e){hasModule(e)||((e.__depends__||[]).forEach(visit),hasModule(e)||(addModule(e),(e.__init__||[]).forEach((function(e){n.push(e)}))))}e.forEach(visit);var i=new o["a"](t);return n.forEach((function(e){try{i["string"===typeof e?"get":"invoke"](e)}catch(t){throw console.error("Failed to instantiate component"),console.error(t.stack),t}})),i}function createInjector(e){e=e||{};var t={config:["value",e]},n=[t,w].concat(e.modules||[]);return bootstrap(n)}function Diagram(e,t){this.injector=t=t||createInjector(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}Diagram.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Diagram.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")}},fa7e:function(e,t,n){"use strict";var o=n("87f2"),i={horizontal:["x","width"],vertical:["y","height"]},r=5;function DistributeElements(e){this._modeling=e,this._filters=[],this.registerFilter((function(e,t,n){var i,r=0,a=0;return Object(o["forEach"])(e,(function(e){e.waypoints||e.labelTarget||(r+=e[n],a+=1)})),i=Math.round(r/a),Object(o["filter"])(e,(function(e){return e[n]<i+50}))}))}DistributeElements.$inject=["modeling"],DistributeElements.prototype.registerFilter=function(e){if("function"!==typeof e)throw new Error("the filter has to be a function");this._filters.push(e)},DistributeElements.prototype.trigger=function(e,t){var n,o,i=this._modeling;if(!(e.length<3)&&(this._setOrientation(t),o=this._filterElements(e),n=this._createGroups(o),!(n.length<=2)))return i.distributeElements(n,this._axis,this._dimension),n},DistributeElements.prototype._filterElements=function(e){var t=this._filters,n=this._axis,i=this._dimension,r=[].concat(e);return t.length?(Object(o["forEach"])(t,(function(e){r=e(r,n,i)})),r):e},DistributeElements.prototype._createGroups=function(e){var t=[],n=this,i=this._axis,r=this._dimension;if(!i)throw new Error('must have a defined "axis" and "dimension"');var a=Object(o["sortBy"])(e,i);return Object(o["forEach"])(a,(function(e,o){var a,c=n._findRange(e,i,r),s=t[t.length-1];s&&n._hasIntersection(s.range,c)?t[t.length-1].elements.push(e):(a={range:c,elements:[e]},t.push(a))})),t},DistributeElements.prototype._setOrientation=function(e){var t=i[e];this._axis=t[0],this._dimension=t[1]},DistributeElements.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)},DistributeElements.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+r,max:t+n-r}};t["a"]={__init__:["distributeElements"],distributeElements:["type",DistributeElements]}},fe4b:function(e,t,n){"use strict";n.d(t,"a",(function(){return CreateMoveSnapping}));var o=n("44cc"),i=n("9f71"),r=n("1502"),a=n("87f2"),c=1250;function CreateMoveSnapping(e,t,n){var o=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],(function(e){o.initSnap(e)})),t.on(["create.move","create.end","shape.move.move","shape.move.end"],c,(function(e){var t=e.context,a=t.shape,c=t.snapContext,s=t.target;if((!e.originalEvent||!Object(r["b"])(e.originalEvent))&&!Object(i["c"])(e)&&s){var u=c.pointsForTarget(s);u.initialized||(u=o.addSnapTargetPoints(u,a,s),u.initialized=!0),n.snap(e,u)}})),t.on(["create.cleanup","shape.move.cleanup"],(function(){n.hide()}))}function isConnection(e){return!!e.waypoints}function isHidden(e){return!!e.hidden}function isLabel(e){return!!e.labelTarget}CreateMoveSnapping.$inject=["elementRegistry","eventBus","snapping"],CreateMoveSnapping.prototype.initSnap=function(e){var t,n=this._elementRegistry,r=e.context,a=r.shape,c=r.snapContext;c||(c=r.snapContext=new o["a"]),t=n.get(a.id)?Object(i["d"])(a,e):{x:e.x+Object(i["d"])(a).x,y:e.y+Object(i["d"])(a).y};var s={x:t.x-a.width/2,y:t.y-a.height/2},u={x:t.x+a.width/2,y:t.y+a.height/2};return c.setSnapOrigin("mid",{x:t.x-e.x,y:t.y-e.y}),isLabel(a)||(c.setSnapOrigin("top-left",{x:s.x-e.x,y:s.y-e.y}),c.setSnapOrigin("bottom-right",{x:u.x-e.x,y:u.y-e.y})),c},CreateMoveSnapping.prototype.addSnapTargetPoints=function(e,t,n){var o=this.getSnapTargets(t,n);return Object(a["forEach"])(o,(function(n){if(isLabel(n))isLabel(t)&&e.add("mid",Object(i["d"])(n));else if(isConnection(n)){if(n.waypoints.length<3)return;var o=n.waypoints.slice(1,-1);Object(a["forEach"])(o,(function(t){e.add("mid",t)}))}else e.add("mid",Object(i["d"])(n))})),Object(a["isNumber"])(t.x)&&Object(a["isNumber"])(t.y)?(this._elementRegistry.get(t.id)&&e.add("mid",Object(i["d"])(t)),e):e},CreateMoveSnapping.prototype.getSnapTargets=function(e,t){return Object(i["b"])(t).filter((function(e){return!isHidden(e)}))}}}]);