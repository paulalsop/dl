(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bpmn-js"],{"145d":function(e,t,n){"use strict";n.r(t),n.d(t,"isAny",(function(){return isAny})),n.d(t,"getParent",(function(){return getParent}));var i=n("87f2"),a=n("7a6b");function isAny(e,t){return Object(i["some"])(t,(function(t){return Object(a["is"])(e,t)}))}function getParent(e,t){"string"===typeof t&&(t=[t]);while(e=e.parent)if(isAny(e,t))return e;return null}},7024:function(e,t,n){"use strict";n.d(t,"a",(function(){return Modeler}));var i=n("3fb5"),a=n.n(i),o=n("e6a4"),r=n("87f2"),c=n("e506"),s=n("6b8b"),l=n("f384"),p=n("1ef9"),d=n("8fcf"),u=n.n(d);function elementToString(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var m=new u.a({name:"bpmnElement",enumerable:!0},{name:"di",configurable:!0});function is(e,t){return e.$instanceOf(t)}function findDisplayCandidate(e){return Object(r["find"])(e.rootElements,(function(e){return is(e,"bpmn:Process")||is(e,"bpmn:Collaboration")}))}function BpmnTreeWalker(e,t){var n={},i=[];function contextual(e,t){return function(n){e(n,t)}}function handled(e){n[e.id]=e}function isHandled(e){return n[e.id]}function visit(n,i){var a=n.gfx;if(a)throw new Error(t("already rendered {element}",{element:elementToString(n)}));return e.element(n,i)}function visitRoot(t,n){return e.root(t,n)}function visitIfDi(e,n){try{var i=e.di&&visit(e,n);return handled(e),i}catch(a){logError(a.message,{element:e,error:a}),console.error(t("failed to import {element}",{element:elementToString(e)})),console.error(a)}}function logError(t,n){e.error(t,n)}function registerDi(e){var n=e.bpmnElement;n?n.di?logError(t("multiple DI elements defined for {element}",{element:elementToString(n)}),{element:n}):(m.bind(n,"di"),n.di=e):logError(t("no bpmnElement referenced in {element}",{element:elementToString(e)}),{element:e})}function handleDiagram(e){handlePlane(e.plane)}function handlePlane(e){registerDi(e),Object(r["forEach"])(e.planeElement,handlePlaneElement)}function handlePlaneElement(e){registerDi(e)}function handleDefinitions(e,n){var a=e.diagrams;if(n&&-1===a.indexOf(n))throw new Error(t("diagram not part of bpmn:Definitions"));if(!n&&a&&a.length&&(n=a[0]),!n)throw new Error(t("no diagram to display"));handleDiagram(n);var o=n.plane;if(!o)throw new Error(t("no plane for {element}",{element:elementToString(n)}));var r=o.bpmnElement;if(!r){if(r=findDisplayCandidate(e),!r)throw new Error(t("no process or collaboration to display"));logError(t("correcting missing bpmnElement on {plane} to {rootElement}",{plane:elementToString(o),rootElement:elementToString(r)})),o.bpmnElement=r,registerDi(o)}var c=visitRoot(r,o);if(is(r,"bpmn:Process"))handleProcess(r,c);else{if(!is(r,"bpmn:Collaboration"))throw new Error(t("unsupported bpmnElement for {plane}: {rootElement}",{plane:elementToString(o),rootElement:elementToString(r)}));handleCollaboration(r,c),handleUnhandledProcesses(e.rootElements,c)}handleDeferred(i)}function handleDeferred(){var e;while(i.length)e=i.shift(),e()}function handleProcess(e,t){handleFlowElementsContainer(e,t),handleIoSpecification(e.ioSpecification,t),handleArtifacts(e.artifacts,t),handled(e)}function handleUnhandledProcesses(e,t){var n=Object(r["filter"])(e,(function(e){return!isHandled(e)&&is(e,"bpmn:Process")&&e.laneSets}));n.forEach(contextual(handleProcess,t))}function handleMessageFlow(e,t){visitIfDi(e,t)}function handleMessageFlows(e,t){Object(r["forEach"])(e,contextual(handleMessageFlow,t))}function handleDataAssociation(e,t){visitIfDi(e,t)}function handleDataInput(e,t){visitIfDi(e,t)}function handleDataOutput(e,t){visitIfDi(e,t)}function handleArtifact(e,t){visitIfDi(e,t)}function handleArtifacts(e,t){Object(r["forEach"])(e,(function(e){is(e,"bpmn:Association")?i.push((function(){handleArtifact(e,t)})):handleArtifact(e,t)}))}function handleIoSpecification(e,t){e&&(Object(r["forEach"])(e.dataInputs,contextual(handleDataInput,t)),Object(r["forEach"])(e.dataOutputs,contextual(handleDataOutput,t)))}function handleSubProcess(e,t){handleFlowElementsContainer(e,t),handleArtifacts(e.artifacts,t)}function handleFlowNode(e,t){var n=visitIfDi(e,t);is(e,"bpmn:SubProcess")&&handleSubProcess(e,n||t),is(e,"bpmn:Activity")&&handleIoSpecification(e.ioSpecification,t),i.push((function(){Object(r["forEach"])(e.dataInputAssociations,contextual(handleDataAssociation,t)),Object(r["forEach"])(e.dataOutputAssociations,contextual(handleDataAssociation,t))}))}function handleSequenceFlow(e,t){visitIfDi(e,t)}function handleDataElement(e,t){visitIfDi(e,t)}function handleLane(e,t){i.push((function(){var n=visitIfDi(e,t);e.childLaneSet&&handleLaneSet(e.childLaneSet,n||t),wireFlowNodeRefs(e)}))}function handleLaneSet(e,t){Object(r["forEach"])(e.lanes,contextual(handleLane,t))}function handleLaneSets(e,t){Object(r["forEach"])(e,contextual(handleLaneSet,t))}function handleFlowElementsContainer(e,t){handleFlowElements(e.flowElements,t),e.laneSets&&handleLaneSets(e.laneSets,t)}function handleFlowElements(e,n){Object(r["forEach"])(e,(function(e){is(e,"bpmn:SequenceFlow")?i.push((function(){handleSequenceFlow(e,n)})):is(e,"bpmn:BoundaryEvent")?i.unshift((function(){handleFlowNode(e,n)})):is(e,"bpmn:FlowNode")?handleFlowNode(e,n):is(e,"bpmn:DataObject")||(is(e,"bpmn:DataStoreReference")||is(e,"bpmn:DataObjectReference")?handleDataElement(e,n):logError(t("unrecognized flowElement {element} in context {context}",{element:elementToString(e),context:n?elementToString(n.businessObject):"null"}),{element:e,context:n}))}))}function handleParticipant(e,t){var n=visitIfDi(e,t),i=e.processRef;i&&handleProcess(i,n||t)}function handleCollaboration(e){Object(r["forEach"])(e.participants,contextual(handleParticipant)),handleArtifacts(e.artifacts),i.push((function(){handleMessageFlows(e.messageFlows)}))}function wireFlowNodeRefs(e){Object(r["forEach"])(e.flowNodeRef,(function(t){var n=t.get("lanes");n&&n.push(e)}))}return{handleDeferred:handleDeferred,handleDefinitions:handleDefinitions,handleSubProcess:handleSubProcess,registerDi:registerDi}}function importBpmnDiagram(e,t,n,i){var a,o,c;Object(r["isFunction"])(n)&&(i=n,n=null);var s,l=[];function render(e,t){var n={root:function(e){return a.add(e)},element:function(e,t){return a.add(e,t)},error:function(e,t){l.push({message:e,context:t})}},i=new BpmnTreeWalker(n,c);i.handleDefinitions(e,t)}try{a=e.get("bpmnImporter"),o=e.get("eventBus"),c=e.get("translate"),o.fire("import.render.start",{definitions:t}),render(t,n),o.fire("import.render.complete",{error:s,warnings:l})}catch(p){s=p}i(s,l)}var h='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 960"><path fill="#fff" d="M960 60v839c0 33-27 61-60 61H60c-33 0-60-27-60-60V60C0 27 27 0 60 0h839c34 0 61 27 61 60z"/><path fill="#52b415" d="M217 548a205 205 0 0 0-144 58 202 202 0 0 0-4 286 202 202 0 0 0 285 3 200 200 0 0 0 48-219 203 203 0 0 0-185-128zM752 6a206 206 0 0 0-192 285 206 206 0 0 0 269 111 207 207 0 0 0 111-260A204 204 0 0 0 752 6zM62 0A62 62 0 0 0 0 62v398l60 46a259 259 0 0 1 89-36c5-28 10-57 14-85l99 2 12 85a246 246 0 0 1 88 38l70-52 69 71-52 68c17 30 29 58 35 90l86 14-2 100-86 12a240 240 0 0 1-38 89l43 58h413c37 0 60-27 60-61V407a220 220 0 0 1-44 40l21 85-93 39-45-76a258 258 0 0 1-98 1l-45 76-94-39 22-85a298 298 0 0 1-70-69l-86 22-38-94 76-45a258 258 0 0 1-1-98l-76-45 40-94 85 22a271 271 0 0 1 41-47z"/></svg>',b="data:image/svg+xml,"+encodeURIComponent(h),g='<img width="52" height="52" src="'+b+'" />';function css(e){return e.join(";")}var f,v=css(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"]),y=css(["width: 100%","height: 100%","background: rgba(0,0,0,0.2)"]),E=css(["position: absolute","left: 50%","top: 40%","margin: 0 -130px","width: 260px","padding: 10px","background: white","border: solid 1px #AAA","border-radius: 3px","font-family: Helvetica, Arial, sans-serif","font-size: 14px","line-height: 1.2em"]),O='<div class="bjs-powered-by-lightbox" style="'+v+'"><div class="backdrop" style="'+y+'"></div><div class="notice" style="'+E+'"><a href="http://bpmn.io" target="_blank" style="float: left; margin-right: 10px">'+g+'</a>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="http://bpmn.io" target="_blank">bpmn.io</a>.</div></div>';function PoweredByUtil_open(){f||(f=Object(c["domify"])(O),c["delegate"].bind(f,".backdrop","click",(function(e){document.body.removeChild(f)}))),document.body.appendChild(f)}function BaseViewer(e){e=Object(r["assign"])({},j,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),addProjectLogo(this._container),this._init(this._container,this._moddle,e)}function checkValidationError(e){var t=/unparsable content <([^>]+)> detected([\s\S]*)$/,n=t.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}a()(BaseViewer,l["a"]),BaseViewer.prototype.importXML=function(e,t,n){Object(r["isFunction"])(t)&&(n=t,t=null),n=n||function(){};var i=this;e=this._emit("import.parse.start",{xml:e})||e,this._moddle.fromXML(e,"bpmn:Definitions",(function(e,a,o){a=i._emit("import.parse.complete",{error:e,definitions:a,context:o})||a;var r=o.warnings;if(e)return e=checkValidationError(e),i._emit("import.done",{error:e,warnings:r}),n(e,r);i.importDefinitions(a,t,(function(e,t){var a=[].concat(r,t||[]);i._emit("import.done",{error:e,warnings:a}),n(e,a)}))}))},BaseViewer.prototype.importDefinitions=function(e,t,n){return Object(r["isFunction"])(t)&&(n=t,t=null),n=n||function(){},this._setDefinitions(e),this.open(t,n)},BaseViewer.prototype.open=function(e,t){Object(r["isFunction"])(e)&&(t=e,e=null);var n=this._definitions,i=e;if(t=t||function(){},!n)return t(new Error("no XML imported"));if("string"===typeof e&&(i=findBPMNDiagram(n,e),!i))return t(new Error("BPMNDiagram <"+e+"> not found"));try{this.clear()}catch(a){return t(a)}return importBpmnDiagram(this,n,i,t)},BaseViewer.prototype.saveXML=function(e,t){t||(t=e,e={});var n=this,i=this._definitions;if(!i)return t(new Error("no definitions loaded"));i=this._emit("saveXML.start",{definitions:i})||i,this._moddle.toXML(i,e,(function(e,i){try{i=n._emit("saveXML.serialized",{error:e,xml:i})||i,n._emit("saveXML.done",{error:e,xml:i})}catch(a){console.error("error in saveXML life-cycle listener",a)}t(e,i)}))},BaseViewer.prototype.saveSVG=function(e,t){var n,i;t||(t=e,e={}),this._emit("saveSVG.start");try{var a=this.get("canvas"),o=a.getDefaultLayer(),r=Object(c["query"])("defs",a._svg),l=Object(s["i"])(o),p=r?"<defs>"+Object(s["i"])(r)+"</defs>":"",d=o.getBBox();n='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with bpmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+d.width+'" height="'+d.height+'" viewBox="'+d.x+" "+d.y+" "+d.width+" "+d.height+'" version="1.1">'+p+l+"</svg>"}catch(u){i=u}this._emit("saveSVG.done",{error:i,svg:n}),t(i,n)},BaseViewer.prototype._setDefinitions=function(e){this._definitions=e},BaseViewer.prototype.getModules=function(){return this._modules},BaseViewer.prototype.clear=function(){this.getDefinitions()&&(this.get("elementRegistry").forEach((function(e){var t=e.businessObject;t&&t.di&&delete t.di})),l["a"].prototype.clear.call(this))},BaseViewer.prototype.destroy=function(){l["a"].prototype.destroy.call(this),Object(c["remove"])(this._container)},BaseViewer.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)},BaseViewer.prototype.off=function(e,t){this.get("eventBus").off(e,t)},BaseViewer.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),"string"===typeof e&&(e=Object(c["query"])(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},BaseViewer.prototype.getDefinitions=function(){return this._definitions},BaseViewer.prototype.detach=function(){var e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))},BaseViewer.prototype._init=function(e,t,n){var i=n.modules||this.getModules(),a=n.additionalModules||[],o=[{bpmnjs:["value",this],moddle:["value",t]}],c=[].concat(o,i,a),s=Object(r["assign"])(Object(r["omit"])(n,["additionalModules"]),{canvas:Object(r["assign"])({},n.canvas,{container:e}),modules:c});l["a"].call(this,s),n&&n.container&&this.attachTo(n.container)},BaseViewer.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},BaseViewer.prototype._createContainer=function(e){var t=Object(c["domify"])('<div class="bjs-container"></div>');return Object(r["assign"])(t.style,{width:ensureUnit(e.width),height:ensureUnit(e.height),position:e.position}),t},BaseViewer.prototype._createModdle=function(e){var t=Object(r["assign"])({},this._moddleExtensions,e.moddleExtensions);return new p["a"](t)},BaseViewer.prototype._modules=[];var j={width:"100%",height:"100%",position:"relative"};function ensureUnit(e){return e+(Object(r["isNumber"])(e)?"px":"")}function findBPMNDiagram(e,t){return t&&Object(r["find"])(e.diagrams,(function(e){return e.id===t}))||null}function addProjectLogo(e){var t=g,n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100">'+t+"</a>",i=Object(c["domify"])(n);e.appendChild(i),c["event"].bind(i,"click",(function(e){PoweredByUtil_open(),e.preventDefault()}))}function BaseModeler(e){BaseViewer.call(this,e),this.on("import.parse.complete",(function(e){e.error||this._collectIds(e.definitions,e.context)}),this),this.on("diagram.destroy",(function(){this.get("moddle").ids.clear()}),this)}a()(BaseModeler,BaseViewer),BaseModeler.prototype._createModdle=function(e){var t=BaseViewer.prototype._createModdle.call(this,e);return t.ids=new o["default"]([32,36,1]),t},BaseModeler.prototype._collectIds=function(e,t){var n,i=e.$model,a=i.ids;for(n in a.clear(),t.elementsById)a.claim(n,t.elementsById[n])};var x=n("9036"),w=n("dbc8"),S=n("7a6b");function getLabelAttr(e){return Object(S["is"])(e,"bpmn:FlowElement")||Object(S["is"])(e,"bpmn:Participant")||Object(S["is"])(e,"bpmn:Lane")||Object(S["is"])(e,"bpmn:SequenceFlow")||Object(S["is"])(e,"bpmn:MessageFlow")||Object(S["is"])(e,"bpmn:DataInput")||Object(S["is"])(e,"bpmn:DataOutput")?"name":Object(S["is"])(e,"bpmn:TextAnnotation")?"text":Object(S["is"])(e,"bpmn:Group")?"categoryValueRef":void 0}function getCategoryValue(e){var t=e["categoryValueRef"];return t&&t.value||""}function getLabel(e){var t=e.businessObject,n=getLabelAttr(t);if(n)return"categoryValueRef"===n?getCategoryValue(t):t[n]||""}function setLabel(e,t,n){var i=e.businessObject,a=getLabelAttr(i);return a&&("categoryValueRef"===a?i["categoryValueRef"].value=t:i[a]=t),e}var B=n("bc2f");function isTypedEvent(e,t,n){function matches(e,t){return Object(r["every"])(t,(function(t,n){return e[n]==t}))}return Object(r["some"])(e.eventDefinitions,(function(i){return i.$type===t&&matches(e,n)}))}function isThrowEvent(e){return"bpmn:IntermediateThrowEvent"===e.$type||"bpmn:EndEvent"===e.$type}function isCollection(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function getDi(e){return e.businessObject.di}function getSemantic(e){return e.businessObject}function getFillColor(e,t){return getDi(e).get("bioc:fill")||t||"white"}function getStrokeColor(e,t){return getDi(e).get("bioc:stroke")||t||"black"}function getCirclePath(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,a=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return Object(B["a"])(a)}function getRoundRectPath(e,t){var n=e.x,i=e.y,a=e.width,o=e.height,r=[["M",n+t,i],["l",a-2*t,0],["a",t,t,0,0,1,t,t],["l",0,o-2*t],["a",t,t,0,0,1,-t,t],["l",2*t-a,0],["a",t,t,0,0,1,-t,-t],["l",0,2*t-o],["a",t,t,0,0,1,t,-t],["z"]];return Object(B["a"])(r)}function getDiamondPath(e){var t=e.width,n=e.height,i=e.x,a=e.y,o=t/2,r=n/2,c=[["M",i+o,a],["l",o,r],["l",-o,r],["l",-o,-r],["z"]];return Object(B["a"])(c)}function getRectPath(e){var t=e.x,n=e.y,i=e.width,a=e.height,o=[["M",t,n],["l",i,0],["l",0,a],["l",-i,0],["z"]];return Object(B["a"])(o)}var P=n("e116"),_=new o["default"],C=10,D=3,R=.95,T=.35;function BpmnRenderer(e,t,n,i,a,o,l){x["a"].call(this,t,l);var p=e&&e.defaultFillColor,d=e&&e.defaultStrokeColor,u=_.next(),m={},h=n.computeStyle;function addMarker(e,t){var n=Object(r["assign"])({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),i=t.ref||{x:0,y:0},o=t.scale||1;"none"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]);var l=Object(s["f"])("marker");Object(s["b"])(t.element,n),Object(s["a"])(l,t.element),Object(s["b"])(l,{id:e,viewBox:"0 0 20 20",refX:i.x,refY:i.y,markerWidth:20*o,markerHeight:20*o,orient:"auto"});var p=Object(c["query"])("defs",a._svg);p||(p=Object(s["f"])("defs"),Object(s["a"])(a._svg,p)),Object(s["a"])(p,l),m[e]=l}function colorEscape(e){return e.replace(/[^0-9a-zA-z]+/g,"_")}function marker(e,t,n){var i=e+"-"+colorEscape(t)+"-"+colorEscape(n)+"-"+u;return m[i]||createMarker(i,e,t,n),"url(#"+i+")"}function createMarker(e,t,n,i){if("sequenceflow-end"===t){var a=Object(s["f"])("path");Object(s["b"])(a,{d:"M 1 5 L 11 10 L 1 15 Z"}),addMarker(e,{element:a,ref:{x:11,y:10},scale:.5,attrs:{fill:i,stroke:i}})}if("messageflow-start"===t){var o=Object(s["f"])("circle");Object(s["b"])(o,{cx:6,cy:6,r:3.5}),addMarker(e,{element:o,attrs:{fill:n,stroke:i},ref:{x:6,y:6}})}if("messageflow-end"===t){var r=Object(s["f"])("path");Object(s["b"])(r,{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"}),addMarker(e,{element:r,attrs:{fill:n,stroke:i,strokeLinecap:"butt"},ref:{x:8.5,y:5}})}if("association-start"===t){var c=Object(s["f"])("path");Object(s["b"])(c,{d:"M 11 5 L 1 10 L 11 15"}),addMarker(e,{element:c,attrs:{fill:"none",stroke:i,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}if("association-end"===t){var l=Object(s["f"])("path");Object(s["b"])(l,{d:"M 1 5 L 11 10 L 1 15"}),addMarker(e,{element:l,attrs:{fill:"none",stroke:i,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}if("conditional-flow-marker"===t){var p=Object(s["f"])("path");Object(s["b"])(p,{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"}),addMarker(e,{element:p,attrs:{fill:n,stroke:i},ref:{x:-1,y:10},scale:.5})}if("conditional-default-flow-marker"===t){var d=Object(s["f"])("path");Object(s["b"])(d,{d:"M 6 4 L 10 16"}),addMarker(e,{element:d,attrs:{stroke:i},ref:{x:0,y:10},scale:.5})}}function drawCircle(e,t,n,i,a){Object(r["isObject"])(i)&&(a=i,i=0),i=i||0,a=h(a,{stroke:"black",strokeWidth:2,fill:"white"}),"none"===a.fill&&delete a.fillOpacity;var o=t/2,c=n/2,l=Object(s["f"])("circle");return Object(s["b"])(l,{cx:o,cy:c,r:Math.round((t+n)/4-i)}),Object(s["b"])(l,a),Object(s["a"])(e,l),l}function drawRect(e,t,n,i,a,o){Object(r["isObject"])(a)&&(o=a,a=0),a=a||0,o=h(o,{stroke:"black",strokeWidth:2,fill:"white"});var c=Object(s["f"])("rect");return Object(s["b"])(c,{x:a,y:a,width:t-2*a,height:n-2*a,rx:i,ry:i}),Object(s["b"])(c,o),Object(s["a"])(e,c),c}function drawDiamond(e,t,n,i){var a=t/2,o=n/2,r=[{x:a,y:0},{x:t,y:o},{x:a,y:n},{x:0,y:o}],c=r.map((function(e){return e.x+","+e.y})).join(" ");i=h(i,{stroke:"black",strokeWidth:2,fill:"white"});var l=Object(s["f"])("polygon");return Object(s["b"])(l,{points:c}),Object(s["b"])(l,i),Object(s["a"])(e,l),l}function drawLine(e,t,n){n=h(n,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"});var i=Object(B["b"])(t,n);return Object(s["a"])(e,i),i}function drawPath(e,t,n){n=h(n,["no-fill"],{strokeWidth:2,stroke:"black"});var i=Object(s["f"])("path");return Object(s["b"])(i,{d:t}),Object(s["b"])(i,n),Object(s["a"])(e,i),i}function drawMarker(e,t,n,i){return drawPath(t,n,Object(r["assign"])({"data-marker":e},i))}function as(e){return function(t,n){return b[e](t,n)}}function renderer(e){return b[e]}function renderEventContent(e,t){var n=getSemantic(e),i=isThrowEvent(n);return n.eventDefinitions&&n.eventDefinitions.length>1?n.parallelMultiple?renderer("bpmn:ParallelMultipleEventDefinition")(t,e,i):renderer("bpmn:MultipleEventDefinition")(t,e,i):isTypedEvent(n,"bpmn:MessageEventDefinition")?renderer("bpmn:MessageEventDefinition")(t,e,i):isTypedEvent(n,"bpmn:TimerEventDefinition")?renderer("bpmn:TimerEventDefinition")(t,e,i):isTypedEvent(n,"bpmn:ConditionalEventDefinition")?renderer("bpmn:ConditionalEventDefinition")(t,e):isTypedEvent(n,"bpmn:SignalEventDefinition")?renderer("bpmn:SignalEventDefinition")(t,e,i):isTypedEvent(n,"bpmn:EscalationEventDefinition")?renderer("bpmn:EscalationEventDefinition")(t,e,i):isTypedEvent(n,"bpmn:LinkEventDefinition")?renderer("bpmn:LinkEventDefinition")(t,e,i):isTypedEvent(n,"bpmn:ErrorEventDefinition")?renderer("bpmn:ErrorEventDefinition")(t,e,i):isTypedEvent(n,"bpmn:CancelEventDefinition")?renderer("bpmn:CancelEventDefinition")(t,e,i):isTypedEvent(n,"bpmn:CompensateEventDefinition")?renderer("bpmn:CompensateEventDefinition")(t,e,i):isTypedEvent(n,"bpmn:TerminateEventDefinition")?renderer("bpmn:TerminateEventDefinition")(t,e,i):null}function renderLabel(e,t,n){n=Object(r["assign"])({size:{width:100}},n);var i=o.createText(t||"",n);return Object(s["c"])(i).add("djs-label"),Object(s["a"])(e,i),i}function renderEmbeddedLabel(e,t,n){var i=getSemantic(t);return renderLabel(e,i.name,{box:t,align:n,padding:5,style:{fill:getStrokeColor(t,d)}})}function renderExternalLabel(e,t){var n={width:90,height:30,x:t.width/2+t.x,y:t.height/2+t.y};return renderLabel(e,getLabel(t),{box:n,fitBox:!0,style:Object(r["assign"])({},o.getExternalStyle(),{fill:getStrokeColor(t,d)})})}function renderLaneLabel(e,t,n){var i=renderLabel(e,t,{box:{height:30,width:n.height},align:"center-middle",style:{fill:getStrokeColor(n,d)}}),a=-1*n.height;Object(P["b"])(i,0,-a,270)}function createPathFromConnection(e){for(var t=e.waypoints,n="m  "+t[0].x+","+t[0].y,i=1;i<t.length;i++)n+="L"+t[i].x+","+t[i].y+" ";return n}var b=this.handlers={"bpmn:Event":function(e,t,n){return"fillOpacity"in n||(n.fillOpacity=R),drawCircle(e,t.width,t.height,n)},"bpmn:StartEvent":function(e,t){var n={fill:getFillColor(t,p),stroke:getStrokeColor(t,d)},i=getSemantic(t);i.isInterrupting||(n={strokeDasharray:"6",strokeLinecap:"round",fill:getFillColor(t,p),stroke:getStrokeColor(t,d)});var a=renderer("bpmn:Event")(e,t,n);return renderEventContent(t,e),a},"bpmn:MessageEventDefinition":function(e,t,n){var a=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.235,my:.315}}),o=n?getStrokeColor(t,d):getFillColor(t,p),r=n?getFillColor(t,p):getStrokeColor(t,d),c=drawPath(e,a,{strokeWidth:1,fill:o,stroke:r});return c},"bpmn:TimerEventDefinition":function(e,t){var n=drawCircle(e,t.width,t.height,.2*t.height,{strokeWidth:2,fill:getFillColor(t,p),stroke:getStrokeColor(t,d)}),a=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}});drawPath(e,a,{strokeWidth:2,strokeLinecap:"square",stroke:getStrokeColor(t,d)});for(var o=0;o<12;o++){var r=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),c=t.width/2,s=t.height/2;drawPath(e,r,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+30*o+","+s+","+c+")",stroke:getStrokeColor(t,d)})}return n},"bpmn:EscalationEventDefinition":function(e,t,n){var a=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),o=n?getStrokeColor(t,d):"none";return drawPath(e,a,{strokeWidth:1,fill:o,stroke:getStrokeColor(t,d)})},"bpmn:ConditionalEventDefinition":function(e,t){var n=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.222}});return drawPath(e,n,{strokeWidth:1,stroke:getStrokeColor(t,d)})},"bpmn:LinkEventDefinition":function(e,t,n){var a=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.57,my:.263}}),o=n?getStrokeColor(t,d):"none";return drawPath(e,a,{strokeWidth:1,fill:o,stroke:getStrokeColor(t,d)})},"bpmn:ErrorEventDefinition":function(e,t,n){var a=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.2,my:.722}}),o=n?getStrokeColor(t,d):"none";return drawPath(e,a,{strokeWidth:1,fill:o,stroke:getStrokeColor(t,d)})},"bpmn:CancelEventDefinition":function(e,t,n){var a=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.638,my:-.055}}),o=n?getStrokeColor(t,d):"none",r=drawPath(e,a,{strokeWidth:1,fill:o,stroke:getStrokeColor(t,d)});return Object(P["a"])(r,45),r},"bpmn:CompensateEventDefinition":function(e,t,n){var a=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.22,my:.5}}),o=n?getStrokeColor(t,d):"none";return drawPath(e,a,{strokeWidth:1,fill:o,stroke:getStrokeColor(t,d)})},"bpmn:SignalEventDefinition":function(e,t,n){var a=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),o=n?getStrokeColor(t,d):"none";return drawPath(e,a,{strokeWidth:1,fill:o,stroke:getStrokeColor(t,d)})},"bpmn:MultipleEventDefinition":function(e,t,n){var a=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.222,my:.36}}),o=n?getStrokeColor(t,d):"none";return drawPath(e,a,{strokeWidth:1,fill:o})},"bpmn:ParallelMultipleEventDefinition":function(e,t){var n=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:t.width,containerHeight:t.height,position:{mx:.458,my:.194}});return drawPath(e,n,{strokeWidth:1,fill:getStrokeColor(t,d),stroke:getStrokeColor(t,d)})},"bpmn:EndEvent":function(e,t){var n=renderer("bpmn:Event")(e,t,{strokeWidth:4,fill:getFillColor(t,p),stroke:getStrokeColor(t,d)});return renderEventContent(t,e,!0),n},"bpmn:TerminateEventDefinition":function(e,t){var n=drawCircle(e,t.width,t.height,8,{strokeWidth:4,fill:getStrokeColor(t,d),stroke:getStrokeColor(t,d)});return n},"bpmn:IntermediateEvent":function(e,t){var n=renderer("bpmn:Event")(e,t,{strokeWidth:1,fill:getFillColor(t,p),stroke:getStrokeColor(t,d)});return drawCircle(e,t.width,t.height,D,{strokeWidth:1,fill:getFillColor(t,"none"),stroke:getStrokeColor(t,d)}),renderEventContent(t,e),n},"bpmn:IntermediateCatchEvent":as("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":as("bpmn:IntermediateEvent"),"bpmn:Activity":function(e,t,n){return n=n||{},"fillOpacity"in n||(n.fillOpacity=R),drawRect(e,t.width,t.height,C,n)},"bpmn:Task":function(e,t){var n={fill:getFillColor(t,p),stroke:getStrokeColor(t,d)},i=renderer("bpmn:Activity")(e,t,n);return renderEmbeddedLabel(e,t,"center-middle"),attachTaskMarkers(e,t),i},"bpmn:ServiceTask":function(e,t){var n=renderer("bpmn:Task")(e,t),a=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});drawPath(e,a,{strokeWidth:1,fill:getFillColor(t,p),stroke:getStrokeColor(t,d)});var o=i.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}});drawPath(e,o,{strokeWidth:0,fill:getFillColor(t,p)});var r=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return drawPath(e,r,{strokeWidth:1,fill:getFillColor(t,p),stroke:getStrokeColor(t,d)}),n},"bpmn:UserTask":function(e,t){var n=renderer("bpmn:Task")(e,t),a=15,o=12,r=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:a,y:o}});drawPath(e,r,{strokeWidth:.5,fill:getFillColor(t,p),stroke:getStrokeColor(t,d)});var c=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:a,y:o}});drawPath(e,c,{strokeWidth:.5,fill:getFillColor(t,p),stroke:getStrokeColor(t,d)});var s=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:a,y:o}});return drawPath(e,s,{strokeWidth:.5,fill:getStrokeColor(t,d),stroke:getStrokeColor(t,d)}),n},"bpmn:ManualTask":function(e,t){var n=renderer("bpmn:Task")(e,t),a=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return drawPath(e,a,{strokeWidth:.5,fill:getFillColor(t,p),stroke:getStrokeColor(t,d)}),n},"bpmn:SendTask":function(e,t){var n=renderer("bpmn:Task")(e,t),a=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return drawPath(e,a,{strokeWidth:1,fill:getStrokeColor(t,d),stroke:getFillColor(t,p)}),n},"bpmn:ReceiveTask":function(e,t){var n,a=getSemantic(t),o=renderer("bpmn:Task")(e,t);return a.instantiate?(drawCircle(e,28,28,4.4,{strokeWidth:1}),n=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):n=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),drawPath(e,n,{strokeWidth:1,fill:getFillColor(t,p),stroke:getStrokeColor(t,d)}),o},"bpmn:ScriptTask":function(e,t){var n=renderer("bpmn:Task")(e,t),a=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return drawPath(e,a,{strokeWidth:1,stroke:getStrokeColor(t,d)}),n},"bpmn:BusinessRuleTask":function(e,t){var n=renderer("bpmn:Task")(e,t),a=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),o=drawPath(e,a);Object(s["b"])(o,{strokeWidth:1,fill:getFillColor(t,"#aaaaaa"),stroke:getStrokeColor(t,d)});var r=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),c=drawPath(e,r);return Object(s["b"])(c,{strokeWidth:1,stroke:getStrokeColor(t,d)}),n},"bpmn:SubProcess":function(e,t,n){n=Object(r["assign"])({fill:getFillColor(t,p),stroke:getStrokeColor(t,d)},n);var i=renderer("bpmn:Activity")(e,t,n),a=Object(w["isExpanded"])(t);return Object(w["isEventSubProcess"])(t)&&Object(s["b"])(i,{strokeDasharray:"1,2"}),renderEmbeddedLabel(e,t,a?"center-top":"center-middle"),a?attachTaskMarkers(e,t):attachTaskMarkers(e,t,["SubProcessMarker"]),i},"bpmn:AdHocSubProcess":function(e,t){return renderer("bpmn:SubProcess")(e,t)},"bpmn:Transaction":function(e,t){var i=renderer("bpmn:SubProcess")(e,t),a=n.style(["no-fill","no-events"],{stroke:getStrokeColor(t,d)});return drawRect(e,t.width,t.height,C-2,D,a),i},"bpmn:CallActivity":function(e,t){return renderer("bpmn:SubProcess")(e,t,{strokeWidth:5})},"bpmn:Participant":function(e,t){var n={fillOpacity:R,fill:getFillColor(t,p),stroke:getStrokeColor(t,d)},i=renderer("bpmn:Lane")(e,t,n),a=Object(w["isExpanded"])(t);if(a){drawLine(e,[{x:30,y:0},{x:30,y:t.height}],{stroke:getStrokeColor(t,d)});var o=getSemantic(t).name;renderLaneLabel(e,o,t)}else{var r=getSemantic(t).name;renderLabel(e,r,{box:t,align:"center-middle",style:{fill:getStrokeColor(t,d)}})}var c=!!getSemantic(t).participantMultiplicity;return c&&renderer("ParticipantMultiplicityMarker")(e,t),i},"bpmn:Lane":function(e,t,n){var i=drawRect(e,t.width,t.height,0,Object(r["assign"])({fill:getFillColor(t,p),fillOpacity:T,stroke:getStrokeColor(t,d)},n)),a=getSemantic(t);if("bpmn:Lane"===a.$type){var o=a.name;renderLaneLabel(e,o,t)}return i},"bpmn:InclusiveGateway":function(e,t){var n=renderer("bpmn:Gateway")(e,t);return drawCircle(e,t.width,t.height,.24*t.height,{strokeWidth:2.5,fill:getFillColor(t,p),stroke:getStrokeColor(t,d)}),n},"bpmn:ExclusiveGateway":function(e,t){var n=renderer("bpmn:Gateway")(e,t),a=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.32,my:.3}});return getDi(t).isMarkerVisible&&drawPath(e,a,{strokeWidth:1,fill:getStrokeColor(t,d),stroke:getStrokeColor(t,d)}),n},"bpmn:ComplexGateway":function(e,t){var n=renderer("bpmn:Gateway")(e,t),a=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.26}});return drawPath(e,a,{strokeWidth:1,fill:getStrokeColor(t,d),stroke:getStrokeColor(t,d)}),n},"bpmn:ParallelGateway":function(e,t){var n=renderer("bpmn:Gateway")(e,t),a=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.2}});return drawPath(e,a,{strokeWidth:1,fill:getStrokeColor(t,d),stroke:getStrokeColor(t,d)}),n},"bpmn:EventBasedGateway":function(e,t){var n=getSemantic(t),a=renderer("bpmn:Gateway")(e,t);drawCircle(e,t.width,t.height,.2*t.height,{strokeWidth:1,fill:"none",stroke:getStrokeColor(t,d)});var o=n.eventGatewayType,r=!!n.instantiate;function drawEvent(){var n=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:t.width,containerHeight:t.height,position:{mx:.36,my:.44}}),a={strokeWidth:2,fill:getFillColor(t,"none"),stroke:getStrokeColor(t,d)};drawPath(e,n,a)}if("Parallel"===o){var c=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),l=drawPath(e,c);Object(s["b"])(l,{strokeWidth:1,fill:"none"})}else if("Exclusive"===o){if(!r){var p=drawCircle(e,t.width,t.height,.26*t.height);Object(s["b"])(p,{strokeWidth:1,fill:"none",stroke:getStrokeColor(t,d)})}drawEvent()}return a},"bpmn:Gateway":function(e,t){var n={fill:getFillColor(t,p),fillOpacity:R,stroke:getStrokeColor(t,d)};return drawDiamond(e,t.width,t.height,n)},"bpmn:SequenceFlow":function(e,t){var n,i=createPathFromConnection(t),a=getFillColor(t,p),o=getStrokeColor(t,d),r={strokeLinejoin:"round",markerEnd:marker("sequenceflow-end",a,o),stroke:getStrokeColor(t,d)},c=drawPath(e,i,r),l=getSemantic(t);return t.source&&(n=t.source.businessObject,l.conditionExpression&&n.$instanceOf("bpmn:Activity")&&Object(s["b"])(c,{markerStart:marker("conditional-flow-marker",a,o)}),n.default&&(n.$instanceOf("bpmn:Gateway")||n.$instanceOf("bpmn:Activity"))&&n.default===l&&Object(s["b"])(c,{markerStart:marker("conditional-default-flow-marker",a,o)})),c},"bpmn:Association":function(e,t,n){var i=getSemantic(t),a=getFillColor(t,p),o=getStrokeColor(t,d);return n=Object(r["assign"])({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",stroke:getStrokeColor(t,d)},n||{}),"One"!==i.associationDirection&&"Both"!==i.associationDirection||(n.markerEnd=marker("association-end",a,o)),"Both"===i.associationDirection&&(n.markerStart=marker("association-start",a,o)),drawLine(e,t.waypoints,n)},"bpmn:DataInputAssociation":function(e,t){var n=getFillColor(t,p),i=getStrokeColor(t,d);return renderer("bpmn:Association")(e,t,{markerEnd:marker("association-end",n,i)})},"bpmn:DataOutputAssociation":function(e,t){var n=getFillColor(t,p),i=getStrokeColor(t,d);return renderer("bpmn:Association")(e,t,{markerEnd:marker("association-end",n,i)})},"bpmn:MessageFlow":function(e,t){var n=getSemantic(t),a=getDi(t),o=getFillColor(t,p),r=getStrokeColor(t,d),c=createPathFromConnection(t),s={markerEnd:marker("messageflow-end",o,r),markerStart:marker("messageflow-start",o,r),strokeDasharray:"10, 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5px",stroke:getStrokeColor(t,d)},l=drawPath(e,c,s);if(n.messageRef){var u=l.getPointAtLength(l.getTotalLength()/2),m=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:u.x,y:u.y}}),h={strokeWidth:1};"initiating"===a.messageVisibleKind?(h.fill="white",h.stroke="black"):(h.fill="#888",h.stroke="white"),drawPath(e,m,h)}return l},"bpmn:DataObject":function(e,t){var n=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),a=drawPath(e,n,{fill:getFillColor(t,p),fillOpacity:R,stroke:getStrokeColor(t,d)}),o=getSemantic(t);return isCollection(o)&&renderDataItemCollection(e,t),a},"bpmn:DataObjectReference":as("bpmn:DataObject"),"bpmn:DataInput":function(e,t){var n=i.getRawPath("DATA_ARROW"),a=renderer("bpmn:DataObject")(e,t);return drawPath(e,n,{strokeWidth:1}),a},"bpmn:DataOutput":function(e,t){var n=i.getRawPath("DATA_ARROW"),a=renderer("bpmn:DataObject")(e,t);return drawPath(e,n,{strokeWidth:1,fill:"black"}),a},"bpmn:DataStoreReference":function(e,t){var n=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.133}}),a=drawPath(e,n,{strokeWidth:2,fill:getFillColor(t,p),fillOpacity:R,stroke:getStrokeColor(t,d)});return a},"bpmn:BoundaryEvent":function(e,t){var n=getSemantic(t),i=n.cancelActivity,a={strokeWidth:1,fill:getFillColor(t,p),stroke:getStrokeColor(t,d)};i||(a.strokeDasharray="6",a.strokeLinecap="round");var o=Object(r["assign"])({},a,{fillOpacity:1}),c=Object(r["assign"])({},a,{fill:"none"}),s=renderer("bpmn:Event")(e,t,o);return drawCircle(e,t.width,t.height,D,c),renderEventContent(t,e),s},"bpmn:Group":function(e,t){var n=drawRect(e,t.width,t.height,C,{stroke:getStrokeColor(t,d),strokeWidth:1,strokeDasharray:"8,3,1,3",fill:"none",pointerEvents:"none"});return n},label:function(e,t){return renderExternalLabel(e,t)},"bpmn:TextAnnotation":function(e,t){var n={fill:"none",stroke:"none"},a=drawRect(e,t.width,t.height,0,0,n),o=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}});drawPath(e,o,{stroke:getStrokeColor(t,d)});var r=getSemantic(t).text||"";return renderLabel(e,r,{box:t,align:"left-top",padding:5,style:{fill:getStrokeColor(t,d)}}),a},ParticipantMultiplicityMarker:function(e,t){var n=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:t.width/2/t.width,my:(t.height-15)/t.height}});drawMarker("participant-multiplicity",e,n,{strokeWidth:1,fill:getFillColor(t,p),stroke:getStrokeColor(t,d)})},SubProcessMarker:function(e,t){var n=drawRect(e,14,14,0,{strokeWidth:1,fill:getFillColor(t,p),stroke:getStrokeColor(t,d)});Object(P["c"])(n,t.width/2-7.5,t.height-20);var a=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-7.5)/t.width,my:(t.height-20)/t.height}});drawMarker("sub-process",e,a,{fill:getFillColor(t,p),stroke:getStrokeColor(t,d)})},ParallelMarker:function(e,t,n){var a=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.parallel)/t.width,my:(t.height-20)/t.height}});drawMarker("parallel",e,a,{fill:getFillColor(t,p),stroke:getStrokeColor(t,d)})},SequentialMarker:function(e,t,n){var a=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.seq)/t.width,my:(t.height-19)/t.height}});drawMarker("sequential",e,a,{fill:getFillColor(t,p),stroke:getStrokeColor(t,d)})},CompensationMarker:function(e,t,n){var a=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.compensation)/t.width,my:(t.height-13)/t.height}});drawMarker("compensation",e,a,{strokeWidth:1,fill:getFillColor(t,p),stroke:getStrokeColor(t,d)})},LoopMarker:function(e,t,n){var a=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.loop)/t.width,my:(t.height-7)/t.height}});drawMarker("loop",e,a,{strokeWidth:1,fill:getFillColor(t,p),stroke:getStrokeColor(t,d),strokeLinecap:"round",strokeMiterlimit:.5})},AdhocMarker:function(e,t,n){var a=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.adhoc)/t.width,my:(t.height-15)/t.height}});drawMarker("adhoc",e,a,{strokeWidth:1,fill:getStrokeColor(t,d),stroke:getStrokeColor(t,d)})}};function attachTaskMarkers(e,t,n){var i,a=getSemantic(t),o=n&&-1!==n.indexOf("SubProcessMarker");i=o?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},Object(r["forEach"])(n,(function(n){renderer(n)(e,t,i)})),a.isForCompensation&&renderer("CompensationMarker")(e,t,i),"bpmn:AdHocSubProcess"===a.$type&&renderer("AdhocMarker")(e,t,i);var c=a.loopCharacteristics,s=c&&c.isSequential;c&&(void 0===s&&renderer("LoopMarker")(e,t,i),!1===s&&renderer("ParallelMarker")(e,t,i),!0===s&&renderer("SequentialMarker")(e,t,i))}function renderDataItemCollection(e,t){var n=(t.height-16)/t.height,a=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.451,my:n}});drawPath(e,a,{strokeWidth:2})}this._drawPath=drawPath}a()(BpmnRenderer,x["a"]),BpmnRenderer.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],BpmnRenderer.prototype.canRender=function(e){return Object(S["is"])(e,"bpmn:BaseElement")},BpmnRenderer.prototype.drawShape=function(e,t){var n=t.type,i=this.handlers[n];return i(e,t)},BpmnRenderer.prototype.drawConnection=function(e,t){var n=t.type,i=this.handlers[n];return i(e,t)},BpmnRenderer.prototype.getShapePath=function(e){return Object(S["is"])(e,"bpmn:Event")?getCirclePath(e):Object(S["is"])(e,"bpmn:Activity")?getRoundRectPath(e,C):Object(S["is"])(e,"bpmn:Gateway")?getDiamondPath(e):getRectPath(e)};var k=n("0363"),A=12,L=1.2,M=30;function TextRenderer(e){var t=Object(r["assign"])({fontFamily:"Arial, sans-serif",fontSize:A,fontWeight:"normal",lineHeight:L},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=Object(r["assign"])({},t,{fontSize:n},e&&e.externalStyle||{}),a=new k["a"]({style:t});this.getExternalLabelBounds=function(e,t){var n=a.getDimensions(t,{box:{width:90,height:30,x:e.width/2+e.x,y:e.height/2+e.y},style:i});return{x:Math.round(e.x+e.width/2-n.width/2),y:Math.round(e.y),width:Math.ceil(n.width),height:Math.ceil(n.height)}},this.getTextAnnotationBounds=function(e,n){var i=a.getDimensions(n,{box:e,style:t,align:"left-top",padding:5});return{x:e.x,y:e.y,width:e.width,height:Math.max(M,Math.round(i.height))}},this.createText=function(e,t){return a.createText(e,t||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}function PathMap(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m {mx}, {my} m  0 15  l 0 -15 m  4 15  l 0 -15 m  4 15  l 0 -15 ",height:61,width:51,heightElements:[12],widthElements:[1,6,12,15]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function getRawPath(e){return this.pathMap[e].d},this.getScaledPath=function getScaledPath(e,t){var n,i,a=this.pathMap[e];t.abspos?(n=t.abspos.x,i=t.abspos.y):(n=t.containerWidth*t.position.mx,i=t.containerHeight*t.position.my);var o={};if(t.position){for(var r=t.containerHeight/a.height*t.yScaleFactor,c=t.containerWidth/a.width*t.xScaleFactor,s=0;s<a.heightElements.length;s++)o["y"+s]=a.heightElements[s]*r;for(var l=0;l<a.widthElements.length;l++)o["x"+l]=a.widthElements[l]*c}var p=format(a.d,{mx:n,my:i,e:o});return p}}TextRenderer.$inject=["config.textRenderer"];var F=/\{([^}]+)\}/g,N=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function replacer(e,t,n){var i=n;return t.replace(N,(function(e,t,n,a,o){t=t||a,i&&(t in i&&(i=i[t]),"function"==typeof i&&o&&(i=i()))})),i=(null==i||i==n?e:i)+"",i}function format(e,t){return String(e).replace(F,(function(e,n){return replacer(e,n,t)}))}var I={__init__:["bpmnRenderer"],bpmnRenderer:["type",BpmnRenderer],textRenderer:["type",TextRenderer],pathMap:["type",PathMap]},H=n("b71e"),z={width:90,height:20},$=15;function isLabelExternal(e){return Object(S["is"])(e,"bpmn:Event")||Object(S["is"])(e,"bpmn:Gateway")||Object(S["is"])(e,"bpmn:DataStoreReference")||Object(S["is"])(e,"bpmn:DataObjectReference")||Object(S["is"])(e,"bpmn:DataInput")||Object(S["is"])(e,"bpmn:DataOutput")||Object(S["is"])(e,"bpmn:SequenceFlow")||Object(S["is"])(e,"bpmn:MessageFlow")||Object(S["is"])(e,"bpmn:Group")}function hasExternalLabel(e){return isLabel(e.label)}function getFlowLabelPosition(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],a=getWaypointsMid(e),o=Math.atan((i.y-n.y)/(i.x-n.x)),r=a.x,c=a.y;return Math.abs(o)<Math.PI/2?c-=$:r+=$,{x:r,y:c}}function getWaypointsMid(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function getExternalLabelMid(e){return e.waypoints?getFlowLabelPosition(e.waypoints):Object(S["is"])(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+z.height/2}:{x:e.x+e.width/2,y:e.y+e.height+z.height/2}}function getExternalLabelBounds(e,t){var n,i,a,o=e.di,c=o.label;return c&&c.bounds?(a=c.bounds,i={width:Math.max(z.width,a.width),height:a.height},n={x:a.x+a.width/2,y:a.y+a.height/2}):(n=getExternalLabelMid(t),i=z),Object(r["assign"])({x:n.x-i.width/2,y:n.y-i.height/2},i)}function isLabel(e){return e&&!!e.labelTarget}var W=n("2e42");function elementData(e,t){return Object(r["assign"])({id:e.id,type:e.$type,businessObject:e},t)}function getWaypoints(e,t,n){var i=e.di.waypoint;return!i||i.length<2?[Object(W["e"])(t),Object(W["e"])(n)]:i.map((function(e){return{x:e.x,y:e.y}}))}function notYetDrawn(e,t,n,i){return new Error(e("element {element} referenced by {referenced}#{property} not yet drawn",{element:elementToString(n),referenced:elementToString(t),property:i}))}function BpmnImporter(e,t,n,i,a,o){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._translate=a,this._textRenderer=o}function isPointInsideBBox(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function isFrameElement(e){return Object(S["is"])(e,"bpmn:Group")}BpmnImporter.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"],BpmnImporter.prototype.add=function(e,t){var n,i,a,o=e.di,r=this._translate;if(Object(S["is"])(o,"bpmndi:BPMNPlane"))n=this._elementFactory.createRoot(elementData(e)),this._canvas.setRootElement(n);else if(Object(S["is"])(o,"bpmndi:BPMNShape")){var c=!Object(w["isExpanded"])(e),s=isFrameElement(e);i=t&&(t.hidden||t.collapsed);var l=e.di.bounds;n=this._elementFactory.createShape(elementData(e,{collapsed:c,hidden:i,x:Math.round(l.x),y:Math.round(l.y),width:Math.round(l.width),height:Math.round(l.height),isFrame:s})),Object(S["is"])(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,n),Object(S["is"])(e,"bpmn:Lane")&&(a=0),Object(S["is"])(e,"bpmn:DataStoreReference")&&(isPointInsideBBox(t,Object(W["e"])(l))||(t=this._canvas.getRootElement())),this._canvas.addShape(n,t,a)}else{if(!Object(S["is"])(o,"bpmndi:BPMNEdge"))throw new Error(r("unknown di {di} for element {semantic}",{di:elementToString(o),semantic:elementToString(e)}));var p=this._getSource(e),d=this._getTarget(e);i=t&&(t.hidden||t.collapsed),n=this._elementFactory.createConnection(elementData(e,{hidden:i,source:p,target:d,waypoints:getWaypoints(e,p,d)})),Object(S["is"])(e,"bpmn:DataAssociation")&&(t=null),Object(S["is"])(e,"bpmn:SequenceFlow")&&(a=0),this._canvas.addConnection(n,t,a)}return isLabelExternal(e)&&getLabel(n)&&this.addLabel(e,n),this._eventBus.fire("bpmnElement.added",{element:n}),n},BpmnImporter.prototype._attachBoundary=function(e,t){var n=this._translate,i=e.attachedToRef;if(!i)throw new Error(n("missing {semantic}#attachedToRef",{semantic:elementToString(e)}));var a=this._elementRegistry.get(i.id),o=a&&a.attachers;if(!a)throw notYetDrawn(n,e,i,"attachedToRef");t.host=a,o||(a.attachers=o=[]),-1===o.indexOf(t)&&o.push(t)},BpmnImporter.prototype.addLabel=function(e,t){var n,i,a;return n=getExternalLabelBounds(e,t),i=getLabel(t),i&&(n=this._textRenderer.getExternalLabelBounds(n,i)),a=this._elementFactory.createLabel(elementData(e,{id:e.id+"_label",labelTarget:t,type:"label",hidden:t.hidden||!getLabel(t),x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)})),this._canvas.addShape(a,t.parent)},BpmnImporter.prototype._getEnd=function(e,t){var n,i,a=e.$type,o=this._translate;if(i=e[t+"Ref"],"source"===t&&"bpmn:DataInputAssociation"===a&&(i=i&&i[0]),("source"===t&&"bpmn:DataOutputAssociation"===a||"target"===t&&"bpmn:DataInputAssociation"===a)&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?notYetDrawn(o,e,i,t+"Ref"):new Error(o("{semantic}#{side} Ref not specified",{semantic:elementToString(e),side:t}))},BpmnImporter.prototype._getSource=function(e){return this._getEnd(e,"source")},BpmnImporter.prototype._getTarget=function(e){return this._getEnd(e,"target")},BpmnImporter.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};var V={__depends__:[H["default"]],bpmnImporter:["type",BpmnImporter]},G={__depends__:[I,V]},U=n("c78f"),q=n("4672");function Viewer(e){BaseViewer.call(this,e)}a()(Viewer,BaseViewer),Viewer.prototype._modules=[G,H["default"],U["a"],q["a"]],Viewer.prototype._moddleExtensions={};var K=n("80e0"),Y=n("041f"),X=n("4010");function NavigatedViewer(e){Viewer.call(this,e)}a()(NavigatedViewer,Viewer),NavigatedViewer.prototype._navigationModules=[K["a"],Y["a"],X["a"]],NavigatedViewer.prototype._modules=[].concat(Viewer.prototype._modules,NavigatedViewer.prototype._navigationModules);var J=n("dbec"),Z=n("1867"),Q=n("145d"),ee=50,te=250,ne=10;function getNewShapePosition(e,t){return Object(S["is"])(t,"bpmn:TextAnnotation")?getTextAnnotationPosition(e,t):Object(Q["isAny"])(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])?getDataElementPosition(e,t):Object(S["is"])(t,"bpmn:FlowNode")?getFlowNodePosition(e,t):getDefaultPosition(e,t)}function getFlowNodePosition(e,t){var n=Object(W["b"])(e),i=Object(W["e"])(e),a=getFlowNodeDistance(e,t),o="left",r=80,c=30;function getVerticalDistance(e){return-1!=e.indexOf("top")?-1*r:-1!=e.indexOf("bottom")?r:0}Object(S["is"])(e,"bpmn:BoundaryEvent")&&(o=Object(W["f"])(e,e.host,-25),-1!==o.indexOf("top")&&(c*=-1));var s={x:n.right+a+t.width/2,y:i.y+getVerticalDistance(o)},l={y:{margin:c,rowSize:r}};return deconflictPosition(e,t,s,l)}function getFlowNodeDistance(e,t){var n=Object(W["b"])(e);function isReference(e){return Object(S["is"])(e,"bpmn:SequenceFlow")}function toTargetNode(e){return function(t){return{shape:t,weight:e,distanceTo:function(e){var t=Object(W["b"])(e);return t.left-n.right}}}}function toSourceNode(e){return function(t){return{shape:t,weight:e,distanceTo:function(e){var t=Object(W["b"])(e);return n.left-t.right}}}}var i=Object(r["reduce"])([].concat(getTargets(e,isReference).map(toTargetNode(5)),getSources(e,isReference).map(toSourceNode(1))),(function(e,t){return e[t.shape.id+"__weight_"+t.weight]=t,e}),{}),a=Object(r["reduce"])(i,(function(e,t){var n,i,a,o=t.shape,r=t.weight,c=t.distanceTo,s=e.fav;return n=c(o),n<0||n>te||(a=e[String(n)]=e[String(n)]||{value:n,count:0},i=a.count+=1*r,(!s||s.count<i)&&(e.fav=a)),e}),{});return a.fav?a.fav.value:ee}function getTextAnnotationPosition(e,t){var n=Object(W["b"])(e),i={x:n.right+t.width/2,y:n.top-50-t.height/2},a={y:{margin:-30,rowSize:20}};return deconflictPosition(e,t,i,a)}function getDataElementPosition(e,t){var n=Object(W["b"])(e),i={x:n.right-10+t.width/2,y:n.bottom+40+t.width/2},a={x:{margin:30,rowSize:30}};return deconflictPosition(e,t,i,a)}function getDefaultPosition(e,t){var n=Object(W["b"])(e),i=Object(W["e"])(e);return{x:n.right+ee+t.width/2,y:i.y}}function getAutoPlaceClosure(e,t){var n=getConnected(e);return e.host&&(n=n.concat(getConnected(e.host))),e.attachers&&(n=n.concat(e.attachers.reduce((function(e,t){return e.concat(getConnected(t))}),[]))),n}function getConnectedAtPosition(e,t,n){var i={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},a=getAutoPlaceClosure(e,n);return Object(r["find"])(a,(function(e){if(e===n)return!1;var t=Object(W["f"])(e,i,ne);return"intersect"===t}))}function deconflictPosition(e,t,n,i){function nextPosition(e){var o={x:n.x,y:n.y};return["x","y"].forEach((function(r){var c=i[r];if(c){var s="x"===r?"width":"height",l=c.margin,p=c.rowSize;o[r]=l<0?Math.min(e[r]+l-t[s]/2,n[r]-p+l):Math.max(a[r]+a[s]+l+t[s]/2,n[r]+p+l)}})),o}var a;while(a=getConnectedAtPosition(e,n,t))n=nextPosition(a);return n}function noneFilter(){return!0}function getConnected(e,t){return[].concat(getTargets(e,t),getSources(e,t))}function getSources(e,t){return t||(t=noneFilter),e.incoming.filter(t).map((function(e){return e.source}))}function getTargets(e,t){return t||(t=noneFilter),e.outgoing.filter(t).map((function(e){return e.target}))}function AutoPlace(e,t){function emit(t,n){return e.fire(t,n)}this.append=function(e,n){emit("autoPlace.start",{source:e,shape:n});var i=emit("autoPlace",{source:e,shape:n});i||(i=getNewShapePosition(e,n));var a=t.appendShape(e,n,i,e.parent);return emit("autoPlace.end",{source:e,shape:a}),a}}function AutoPlaceSelectionBehavior(e,t){e.on("autoPlace.end",500,(function(e){t.select(e.shape)}))}AutoPlace.$inject=["eventBus","modeling"],AutoPlaceSelectionBehavior.$inject=["eventBus","selection"];var ie={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",AutoPlace],autoPlaceSelectionBehavior:["type",AutoPlaceSelectionBehavior]},ae=n("6845");function BpmnAutoResize(e){e.invoke(ae["a"],this)}BpmnAutoResize.$inject=["injector"],a()(BpmnAutoResize,ae["a"]),BpmnAutoResize.prototype.resize=function(e,t,n){Object(S["is"])(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};var oe=n("93ca");function BpmnAutoResizeProvider(e,t){oe["a"].call(this,e),this._modeling=t}a()(BpmnAutoResizeProvider,oe["a"]),BpmnAutoResizeProvider.$inject=["eventBus","modeling"],BpmnAutoResizeProvider.prototype.canResize=function(e,t){if(!Object(S["is"])(t,"bpmn:Participant")&&!Object(S["is"])(t,"bpmn:Lane")&&!Object(S["is"])(t,"bpmn:SubProcess"))return!1;var n=!0;return Object(r["forEach"])(e,(function(e){(Object(S["is"])(e,"bpmn:Lane")||e.labelTarget)&&(n=!1)})),n};var re={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",BpmnAutoResize],bpmnAutoResizeProvider:["type",BpmnAutoResizeProvider]},ce=n("af52"),se=n("0ae4"),le=n("e645"),pe=n("9960"),de=n("cd2a"),ue=n("224b"),me=n("35be"),he=n("ca21"),be=n("91cd");function copyProperties(e,t,n){Object(r["isArray"])(n)||(n=[n]),Object(r["forEach"])(n,(function(n){Object(r["isUndefined"])(e[n])||(t[n]=e[n])}))}function removeProperties(e,t){Object(r["isArray"])(t)||(t=[t]),Object(r["forEach"])(t,(function(t){e[t]&&delete e[t]}))}var ge=750;function BpmnCopyPaste(e,t,n){var i;function resolveReferences(e,t){var n=Object(S["getBusinessObject"])(e);e.default&&(i[e.default]={element:n,property:"default"}),e.host&&(Object(S["getBusinessObject"])(e).attachedToRef=Object(S["getBusinessObject"])(t[e.host])),i=Object(r["omit"])(i,Object(r["reduce"])(i,(function(t,i,a){var o=i.element,r=i.property;return a===e.id&&(o[r]=n,t.push(e.id)),t}),[]))}t.on("copyPaste.copyElement",ge,(function(e){var t=e.descriptor,n=e.element,i=t.oldBusinessObject=Object(S["getBusinessObject"])(n);if(t.type=n.type,copyProperties(i,t,"name"),t.di={},copyProperties(i.di,t.di,["fill","stroke"]),copyProperties(i.di,t,"isExpanded"),BpmnCopyPaste_isLabel(t))return t;i.default&&(t.default=i.default.id)})),t.on("moddleCopy.canCopyProperty",(function(t){var i,a=t.parent,o=t.property,r=t.propertyName;if("processRef"===r&&Object(S["is"])(a,"bpmn:Participant")&&Object(S["is"])(o,"bpmn:Process"))return i=e.create("bpmn:Process"),n.copyElement(o,i)})),t.on("copyPaste.pasteElements",(function(){i={}})),t.on("copyPaste.pasteElement",(function(t){var i,a=t.cache,o=t.descriptor,r=o.oldBusinessObject;BpmnCopyPaste_isLabel(o)?o.businessObject=Object(S["getBusinessObject"])(a[o.labelTarget]):(i=e.create(r.$type),o.businessObject=n.copyElement(r,i),resolveReferences(o,a),copyProperties(o,i,["isExpanded","name"]),removeProperties(o,"oldBusinessObject"))}))}function BpmnCopyPaste_isLabel(e){return!!e.labelTarget}BpmnCopyPaste.$inject=["bpmnFactory","eventBus","moddleCopy"];var fe=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing"];function ModdleCopy(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",(function(e){var t=e.propertyNames;if(t&&t.length)return Object(r["sortBy"])(t,(function(e){return"extensionElements"===e}))})),e.on("moddleCopy.canCopyProperty",(function(e){var t=e.parent,n=Object(r["isObject"])(t)&&t.$descriptor,i=e.propertyName;return(!i||-1===fe.indexOf(i))&&(!(i&&n&&!Object(r["find"])(n.properties,Object(r["matchPattern"])({name:i})))&&void 0)})),e.on("moddleCopy.canSetCopiedProperty",(function(e){var t=e.property;if(ModdleCopy_is(t,"bpmn:ExtensionElements")&&(!t.values||!t.values.length))return!1}))}function getPropertyNames(e,t){return Object(r["reduce"])(e.properties,(function(e,n){return t&&n.default?e:e.concat(n.name)}),[])}function ModdleCopy_is(e,t){return e&&"function"===typeof e.$instanceOf&&e.$instanceOf(t)}ModdleCopy.$inject=["eventBus","bpmnFactory","moddle"],ModdleCopy.prototype.copyElement=function(e,t,n){var i=this;n&&!Object(r["isArray"])(n)&&(n=[n]),n=n||getPropertyNames(e.$descriptor);var a=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t});return!1===a||(Object(r["isArray"])(a)&&(n=a),Object(r["forEach"])(n,(function(n){var a;Object(r["has"])(e,n)&&(a=e.get(n));var o=i.copyProperty(a,t,n),c=i._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:o,propertyName:n});!1!==c&&Object(r["isDefined"])(o)&&t.set(n,o)}))),t},ModdleCopy.prototype.copyProperty=function(e,t,n){var i=this,a=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n});if(!1!==a){if(a)return Object(r["isObject"])(a)&&a.$type&&!a.$parent&&(a.$parent=t),a;var o=this._moddle.getPropertyDescriptor(t,n);if(!o.isId&&!o.isReference){if(Object(r["isArray"])(e))return Object(r["reduce"])(e,(function(e,o){return a=i.copyProperty(o,t,n),a?(a.$parent=t,e.concat(a)):e}),[]);if(Object(r["isObject"])(e)&&e.$type){if(this._moddle.getElementDescriptor(e).isGeneric)return;return a=i._bpmnFactory.create(e.$type),a.$parent=t,a=i.copyElement(e,a),a}return e}}};var ve={__depends__:[be["a"]],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",BpmnCopyPaste],moddleCopy:["type",ModdleCopy]},ye=n("dfac");function BpmnReplace_copyProperties(e,t,n){Object(r["isArray"])(n)||(n=[n]),Object(r["forEach"])(n,(function(n){Object(r["isUndefined"])(e[n])||(t[n]=e[n])}))}var Ee=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function toggeling(e,t){var n,i=e&&Object(r["has"])(e,"collapsed")?e.collapsed:!Object(w["isExpanded"])(e);return n=t&&(Object(r["has"])(t,"collapsed")||Object(r["has"])(t,"isExpanded"))?Object(r["has"])(t,"collapsed")?t.collapsed:!t.isExpanded:i,i!==n&&(e.collapsed=i,!0)}function BpmnReplace(e,t,n,i,a,o){function replaceElement(c,s,l){l=l||{};var p=s.type,d=c.businessObject;if(isSubProcess(d)&&"bpmn:SubProcess"===p&&toggeling(c,s))return i.toggleCollapse(c),c;var u=e.create(p),m={type:p,businessObject:u},h=getPropertyNames(d.$descriptor),b=getPropertyNames(u.$descriptor,!0),g=BpmnReplace_intersection(h,b);Object(r["assign"])(u,Object(r["pick"])(s,Ee));var f=Object(r["filter"])(g,(function(e){return"eventDefinitions"===e?hasEventDefinition(c,s.eventDefinitionType):"loopCharacteristics"===e?!Object(w["isEventSubProcess"])(u):!u.hasOwnProperty(e)&&(("processRef"!==e||!1!==s.isExpanded)&&"triggeredByEvent"!==e)}));return u=n.copyElement(d,u,f),s.eventDefinitionType&&(hasEventDefinition(u,s.eventDefinitionType)||(m.eventDefinitionType=s.eventDefinitionType)),Object(S["is"])(d,"bpmn:Activity")&&(isSubProcess(d)?m.isExpanded=Object(w["isExpanded"])(d):s&&Object(r["has"])(s,"isExpanded")&&(m.isExpanded=s.isExpanded),Object(w["isExpanded"])(d)&&!Object(S["is"])(d,"bpmn:Task")&&m.isExpanded&&(m.width=c.width,m.height=c.height)),isSubProcess(d)&&!isSubProcess(u)&&(l.moveChildren=!1),Object(S["is"])(d,"bpmn:Participant")&&(!0===s.isExpanded?u.processRef=e.create("bpmn:Process"):l.moveChildren=!1,m.width=c.width,m.height=t._getDefaultSize(u).height),u.name=d.name,Object(Q["isAny"])(d,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&Object(Q["isAny"])(u,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(u.default=d.default),s.host&&!Object(S["is"])(d,"bpmn:BoundaryEvent")&&Object(S["is"])(u,"bpmn:BoundaryEvent")&&(m.host=s.host),m.di={},BpmnReplace_copyProperties(d.di,m.di,["fill","stroke"]),m=a.replaceElement(c,m,l),!1!==l.select&&o.select(m),m}this.replaceElement=replaceElement}function isSubProcess(e){return Object(S["is"])(e,"bpmn:SubProcess")}function hasEventDefinition(e,t){var n=Object(S["getBusinessObject"])(e);return t&&n.get("eventDefinitions").some((function(e){return Object(S["is"])(e,t)}))}function BpmnReplace_intersection(e,t){return e.filter((function(e){return-1!==t.indexOf(e)}))}BpmnReplace.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","selection"];var Oe={__depends__:[ve,ye["a"],U["a"]],bpmnReplace:["type",BpmnReplace]};function isDifferentType(e){return function(t){var n=t.target,i=Object(S["getBusinessObject"])(e),a=i.eventDefinitions&&i.eventDefinitions[0],o=i.$type===n.type,r=(a&&a.$type)===n.eventDefinitionType,c=i.triggeredByEvent===n.triggeredByEvent,s=void 0===n.isExpanded||n.isExpanded===Object(w["isExpanded"])(i);return!o||!r||!c||!s}}var je=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],xe=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Intermediate Catch Event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition"}},{label:"Link Intermediate Throw Event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition"}},{label:"Compensation Intermediate Throw Event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],we=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message End Event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],Se=[{label:"Exclusive Gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex Gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event based Gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],Be=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],Pe=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],_e=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}}],Ce=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"Send Task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive Task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"User Task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Manual Task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business Rule Task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Service Task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Script Task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],De=[{label:"Message Boundary Event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],Re=[{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Error Start Event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Escalation Start Event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Compensation Start Event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],Te=[{label:"Sequence Flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default Flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional Flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],ke=[{label:"Expanded Pool",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:"Collapsed Pool",actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];function ReplaceMenuProvider(e,t,n,i,a,o){this._popupMenu=e,this._modeling=t,this._moddle=n,this._bpmnReplace=i,this._rules=a,this._translate=o,this.register()}ReplaceMenuProvider.$inject=["popupMenu","modeling","moddle","bpmnReplace","rules","translate"],ReplaceMenuProvider.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},ReplaceMenuProvider.prototype.getEntries=function(e){var t,n=e.businessObject,i=this._rules;if(!i.allowed("shape.replace",{element:e}))return[];var a=isDifferentType(e);return Object(S["is"])(n,"bpmn:StartEvent")&&!Object(w["isEventSubProcess"])(n.$parent)?(t=Object(r["filter"])(je,a),this._createEntries(e,t)):Object(S["is"])(n,"bpmn:Participant")?(t=Object(r["filter"])(ke,(function(e){return Object(w["isExpanded"])(n)!==e.target.isExpanded})),this._createEntries(e,t)):Object(S["is"])(n,"bpmn:StartEvent")&&Object(w["isEventSubProcess"])(n.$parent)?(t=Object(r["filter"])(Re,(function(t){var n=t.target,i=!1!==n.isInterrupting,o=Object(S["getBusinessObject"])(e).isInterrupting===i;return a(t)||!a(t)&&!o})),this._createEntries(e,t)):Object(S["is"])(n,"bpmn:EndEvent")?(t=Object(r["filter"])(we,(function(e){var t=e.target;return!("bpmn:CancelEventDefinition"==t.eventDefinitionType&&!Object(S["is"])(n.$parent,"bpmn:Transaction"))&&a(e)})),this._createEntries(e,t)):Object(S["is"])(n,"bpmn:BoundaryEvent")?(t=Object(r["filter"])(De,(function(e){var t=e.target;if("bpmn:CancelEventDefinition"==t.eventDefinition&&!Object(S["is"])(n.attachedToRef,"bpmn:Transaction"))return!1;var i=!1!==t.cancelActivity,o=n.cancelActivity==i;return a(e)||!a(e)&&!o})),this._createEntries(e,t)):Object(S["is"])(n,"bpmn:IntermediateCatchEvent")||Object(S["is"])(n,"bpmn:IntermediateThrowEvent")?(t=Object(r["filter"])(xe,a),this._createEntries(e,t)):Object(S["is"])(n,"bpmn:Gateway")?(t=Object(r["filter"])(Se,a),this._createEntries(e,t)):Object(S["is"])(n,"bpmn:Transaction")?(t=Object(r["filter"])(Pe,a),this._createEntries(e,t)):Object(w["isEventSubProcess"])(n)&&Object(w["isExpanded"])(n)?(t=Object(r["filter"])(_e,a),this._createEntries(e,t)):Object(S["is"])(n,"bpmn:SubProcess")&&Object(w["isExpanded"])(n)?(t=Object(r["filter"])(Be,a),this._createEntries(e,t)):Object(S["is"])(n,"bpmn:AdHocSubProcess")&&!Object(w["isExpanded"])(n)?(t=Object(r["filter"])(Ce,(function(t){var n=t.target,i="bpmn:SubProcess"===n.type,a=!0===n.isExpanded;return isDifferentType(e,n)&&(!i||a)})),this._createEntries(e,t)):Object(S["is"])(n,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,Te):Object(S["is"])(n,"bpmn:FlowNode")?(t=Object(r["filter"])(Ce,a),Object(S["is"])(n,"bpmn:SubProcess")&&!Object(w["isExpanded"])(n)&&(t=Object(r["filter"])(t,(function(e){return"Sub Process (collapsed)"!==e.label}))),this._createEntries(e,t)):[]},ReplaceMenuProvider.prototype.getHeaderEntries=function(e){var t=[];return Object(S["is"])(e,"bpmn:Activity")&&!Object(w["isEventSubProcess"])(e)&&(t=t.concat(this._getLoopEntries(e))),!Object(S["is"])(e,"bpmn:SubProcess")||Object(S["is"])(e,"bpmn:Transaction")||Object(w["isEventSubProcess"])(e)||t.push(this._getAdHocEntry(e)),t},ReplaceMenuProvider.prototype._createEntries=function(e,t){var n=[],i=this;return Object(r["forEach"])(t,(function(t){var a=i._createMenuEntry(t,e);n.push(a)})),n},ReplaceMenuProvider.prototype._createSequenceFlowEntries=function(e,t){var n=Object(S["getBusinessObject"])(e),i=[],a=this._modeling,o=this._moddle,c=this;return Object(r["forEach"])(t,(function(t){switch(t.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(Object(S["is"])(n.sourceRef,"bpmn:ExclusiveGateway")||Object(S["is"])(n.sourceRef,"bpmn:InclusiveGateway")||Object(S["is"])(n.sourceRef,"bpmn:ComplexGateway")||Object(S["is"])(n.sourceRef,"bpmn:Activity"))&&i.push(c._createMenuEntry(t,e,(function(){a.updateProperties(e.source,{default:n})})));break;case"replace-with-conditional-flow":!n.conditionExpression&&Object(S["is"])(n.sourceRef,"bpmn:Activity")&&i.push(c._createMenuEntry(t,e,(function(){var t=o.create("bpmn:FormalExpression",{body:""});a.updateProperties(e,{conditionExpression:t})})));break;default:if(Object(S["is"])(n.sourceRef,"bpmn:Activity")&&n.conditionExpression)return i.push(c._createMenuEntry(t,e,(function(){a.updateProperties(e,{conditionExpression:void 0})})));if((Object(S["is"])(n.sourceRef,"bpmn:ExclusiveGateway")||Object(S["is"])(n.sourceRef,"bpmn:InclusiveGateway")||Object(S["is"])(n.sourceRef,"bpmn:ComplexGateway")||Object(S["is"])(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n)return i.push(c._createMenuEntry(t,e,(function(){a.updateProperties(e.source,{default:void 0})})))}})),i},ReplaceMenuProvider.prototype._createMenuEntry=function(e,t,n){var i=this._translate,a=this._bpmnReplace.replaceElement,replaceAction=function(){return a(t,e.target)};n=n||replaceAction;var o={label:i(e.label),className:e.className,id:e.actionName,action:n};return o},ReplaceMenuProvider.prototype._getLoopEntries=function(e){var t=this,n=this._translate;function toggleLoopEntry(n,i){var a;i.active?a=void 0:(a=t._moddle.create(i.options.loopCharacteristics),i.options.isSequential&&(a.isSequential=i.options.isSequential)),t._modeling.updateProperties(e,{loopCharacteristics:a})}var i,a,o,r=Object(S["getBusinessObject"])(e),c=r.loopCharacteristics;c&&(i=c.isSequential,a=void 0===c.isSequential,o=void 0!==c.isSequential&&!c.isSequential);var s=[{id:"toggle-parallel-mi",className:"bpmn-icon-parallel-mi-marker",title:n("Parallel Multi Instance"),active:o,action:toggleLoopEntry,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},{id:"toggle-sequential-mi",className:"bpmn-icon-sequential-mi-marker",title:n("Sequential Multi Instance"),active:i,action:toggleLoopEntry,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},{id:"toggle-loop",className:"bpmn-icon-loop-marker",title:n("Loop"),active:a,action:toggleLoopEntry,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}];return s},ReplaceMenuProvider.prototype._getAdHocEntry=function(e){var t=this._translate,n=Object(S["getBusinessObject"])(e),i=Object(S["is"])(n,"bpmn:AdHocSubProcess"),a=this._bpmnReplace.replaceElement,o={id:"toggle-adhoc",className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:i,action:function(t,n){return a(e,i?{type:"bpmn:SubProcess"}:{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}};return o};var Ae={__depends__:[he["a"],Oe],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",ReplaceMenuProvider]},Le=n("d6ce"),Me=Math.abs;function getTRBLResize(e,t){return Object(Le["f"])(Object(W["b"])(t),Object(W["b"])(e))}var Fe=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],Ne=30;function collectLanes(e,t){return t=t||[],e.children.filter((function(e){Object(S["is"])(e,"bpmn:Lane")&&(collectLanes(e,t),t.push(e))})),t}function getChildLanes(e){return e.children.filter((function(e){return Object(S["is"])(e,"bpmn:Lane")}))}function getLanesRoot(e){return Object(Q["getParent"])(e,Fe)||e}function computeLanesResize(e,t){var n=getLanesRoot(e),i=Object(S["is"])(n,"bpmn:Process")?[]:[n],a=collectLanes(n,i),o=Object(W["b"])(e),r=Object(W["b"])(t),c=getTRBLResize(e,t),s=[];return a.forEach((function(t){if(t!==e){var n=0,i=c.right,a=0,l=c.left,p=Object(W["b"])(t);c.top&&(Me(p.bottom-o.top)<10&&(a=r.top-p.bottom),Me(p.top-o.top)<5&&(n=r.top-p.top)),c.bottom&&(Me(p.top-o.bottom)<10&&(n=r.bottom-p.top),Me(p.bottom-o.bottom)<5&&(a=r.bottom-p.bottom)),(n||i||a||l)&&s.push({shape:t,newBounds:Object(Le["e"])(t,{top:n,right:i,bottom:a,left:l})})}})),s}var Ie=n("78f9");function ContextPadProvider(e,t,n,i,a,o,r,c,s,l,p,d){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=a,this._elementFactory=o,this._connect=r,this._create=c,this._popupMenu=s,this._canvas=l,this._rules=p,this._translate=d,!1!==e.autoPlace&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,(function(e){var t=e.context,n=t.shape;if(Object(Ie["a"])(e)&&i.isOpen(n)){var a=i.getEntries(n);a.replace&&a.replace.action.click(e,n)}}))}function isEventType(e,t,n){var i=e.$instanceOf(t),a=!1,o=e.eventDefinitions||[];return Object(r["forEach"])(o,(function(e){e.$type===n&&(a=!0)})),i&&a}ContextPadProvider.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"],ContextPadProvider.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,a=this._connect,o=this._create,c=this._popupMenu,s=this._canvas,l=this._rules,p=this._autoPlace,d=this._translate,u={};if("label"===e.type)return u;var m=e.businessObject;function startConnect(e,t){a.start(e,t)}function removeElement(t){n.removeElements([e])}function getReplaceMenuPosition(e){var n=5,i=s.getContainer(),a=t.getPad(e).html,o=i.getBoundingClientRect(),r=a.getBoundingClientRect(),c=r.top-o.top,l=r.left-o.left,p={x:l,y:c+r.height+n};return p}function appendAction(e,t,n,a){function appendStart(t,n){var c=i.createShape(Object(r["assign"])({type:e},a));o.start(t,c,{source:n})}"string"!==typeof n&&(a=n,n=d("Append {type}",{type:e.replace(/^bpmn:/,"")}));var c=p?function(t,n){var o=i.createShape(Object(r["assign"])({type:e},a));p.append(n,o)}:appendStart;return{group:"model",className:t,title:n,action:{dragstart:appendStart,click:c}}}function splitLaneHandler(e){return function(i,a){n.splitLane(a,e),t.open(a,!0)}}if(Object(Q["isAny"])(m,["bpmn:Lane","bpmn:Participant"])&&Object(w["isExpanded"])(m)){var h=getChildLanes(e);Object(r["assign"])(u,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:d("Add Lane above"),action:{click:function(e,t){n.addLane(t,"top")}}}}),h.length<2&&(e.height>=120&&Object(r["assign"])(u,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:d("Divide into two Lanes"),action:{click:splitLaneHandler(2)}}}),e.height>=180&&Object(r["assign"])(u,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:d("Divide into three Lanes"),action:{click:splitLaneHandler(3)}}})),Object(r["assign"])(u,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:d("Add Lane below"),action:{click:function(e,t){n.addLane(t,"bottom")}}}})}Object(S["is"])(m,"bpmn:FlowNode")&&(Object(S["is"])(m,"bpmn:EventBasedGateway")?Object(r["assign"])(u,{"append.receive-task":appendAction("bpmn:ReceiveTask","bpmn-icon-receive-task",d("Append ReceiveTask")),"append.message-intermediate-event":appendAction("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",d("Append MessageIntermediateCatchEvent"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":appendAction("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",d("Append TimerIntermediateCatchEvent"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":appendAction("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",d("Append ConditionIntermediateCatchEvent"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":appendAction("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",d("Append SignalIntermediateCatchEvent"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):isEventType(m,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?Object(r["assign"])(u,{"append.compensation-activity":appendAction("bpmn:Task","bpmn-icon-task",d("Append compensation activity"),{isForCompensation:!0})}):Object(S["is"])(m,"bpmn:EndEvent")||m.isForCompensation||isEventType(m,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||Object(w["isEventSubProcess"])(m)||Object(r["assign"])(u,{"append.end-event":appendAction("bpmn:EndEvent","bpmn-icon-end-event-none",d("Append EndEvent")),"append.gateway":appendAction("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",d("Append Gateway")),"append.append-task":appendAction("bpmn:Task","bpmn-icon-task",d("Append Task")),"append.intermediate-event":appendAction("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",d("Append Intermediate/Boundary Event"))})),c.isEmpty(e,"bpmn-replace")||Object(r["assign"])(u,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:d("Change type"),action:{click:function(e,t){var n=Object(r["assign"])(getReplaceMenuPosition(t),{cursor:{x:e.x,y:e.y}});c.open(t,"bpmn-replace",n)}}}}),Object(Q["isAny"])(m,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Object(r["assign"])(u,{"append.text-annotation":appendAction("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:d("Connect using "+(m.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:startConnect,dragstart:startConnect}}}),Object(Q["isAny"])(m,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Object(r["assign"])(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:d("Connect using DataInputAssociation"),action:{click:startConnect,dragstart:startConnect}}});var b=l.allowed("elements.delete",{elements:[e]});return Object(r["isArray"])(b)&&(b=b[0]===e),b&&Object(r["assign"])(u,{delete:{group:"edit",className:"bpmn-icon-trash",title:d("Remove"),action:{click:removeElement}}}),u};var He={__depends__:[de["a"],ue["a"],U["a"],le["a"],me["a"],Ae],__init__:["contextPadProvider"],contextPadProvider:["type",ContextPadProvider]},ze=n("fa7e");function BpmnDistributeElements(e){e.registerFilter((function(e){return Object(r["filter"])(e,(function(e){var t=Object(Q["isAny"])(e,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:Participant","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(e.labelTarget||t)}))}))}BpmnDistributeElements.$inject=["distributeElements"];var $e={__depends__:[ze["a"]],__init__:["bpmnDistributeElements"],bpmnDistributeElements:["type",BpmnDistributeElements]},We=n("d09c"),Ve=n("9d6f"),Ge=n("43c6");function BpmnEditorActions(e){e.invoke(Ve["a"],this)}a()(BpmnEditorActions,Ve["a"]),BpmnEditorActions.$inject=["injector"],BpmnEditorActions.prototype._registerDefaultActions=function(e){Ve["a"].prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),a=e.get("spaceTool",!1),o=e.get("lassoTool",!1),c=e.get("handTool",!1),s=e.get("globalConnect",!1),l=e.get("distributeElements",!1),p=e.get("alignElements",!1),d=e.get("directEditing",!1),u=e.get("searchPad",!1),m=e.get("modeling",!1);t&&n&&i&&this._registerAction("selectElements",(function(){var e=t.getRootElement(),a=n.filter((function(t){return t!==e}));return i.select(a),a})),a&&this._registerAction("spaceTool",(function(){a.toggle()})),o&&this._registerAction("lassoTool",(function(){o.toggle()})),c&&this._registerAction("handTool",(function(){c.toggle()})),s&&this._registerAction("globalConnectTool",(function(){s.toggle()})),i&&l&&this._registerAction("distributeElements",(function(e){var t=i.get(),n=e.type;t.length&&l.trigger(t,n)})),i&&p&&this._registerAction("alignElements",(function(e){var t=i.get(),n=[],a=e.type;t.length&&(n=Object(r["filter"])(t,(function(e){return!Object(S["is"])(e,"bpmn:Lane")})),p.trigger(n,a))})),i&&m&&this._registerAction("setColor",(function(e){var t=i.get();t.length&&m.setColor(t,e)})),i&&d&&this._registerAction("directEditing",(function(){var e=i.get();e.length&&d.activate(e[0])})),u&&this._registerAction("find",(function(){u.toggle()})),t&&m&&this._registerAction("moveToOrigin",(function(){var e,i,a=t.getRootElement();i=Object(S["is"])(a,"bpmn:Collaboration")?n.filter((function(e){return Object(S["is"])(e.parent,"bpmn:Collaboration")})):n.filter((function(e){return e!==a&&!Object(S["is"])(e.parent,"bpmn:SubProcess")})),e=Object(Ge["b"])(i),m.moveElements(i,{x:-e.x,y:-e.y},a)}))};var Ue={__depends__:[We["a"]],editorActions:["type",BpmnEditorActions]};function BpmnGridSnapping(e){e.on(["create.init","shape.move.init"],(function(e){var t=e.context,n=e.shape;Object(Q["isAny"])(n,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(t.gridSnappingContext||(t.gridSnappingContext={}),t.gridSnappingContext.snapLocation="top-left")}))}BpmnGridSnapping.$inject=["eventBus"];var qe=n("55e5");function AutoPlaceBehavior(e,t){e.on("autoPlace",(function(e){var n=e.source,i=Object(W["e"])(n),a=e.shape,o=getNewShapePosition(n,a);return["x","y"].forEach((function(e){var n={};o[e]!==i[e]&&(o[e]>i[e]?n.min=o[e]:n.max=o[e],Object(S["is"])(a,"bpmn:TextAnnotation")&&(isHorizontal(e)?n.offset=-a.width/2:n.offset=-a.height/2),o[e]=t.snapValue(o[e],n))})),o}))}function isHorizontal(e){return"x"===e}AutoPlaceBehavior.$inject=["eventBus","gridSnapping"];var Ke=1750;function CreateParticipantBehavior(e,t,n){t.on(["create.start","shape.move.start"],Ke,(function(t){var i=t.context,a=i.shape,o=e.getRootElement();if(Object(S["is"])(a,"bpmn:Participant")&&Object(S["is"])(o,"bpmn:Process")&&o.children.length){var r=i.createConstraints;r&&(a.width=n.snapValue(a.width,{min:a.width}),a.height=n.snapValue(a.height,{min:a.height}))}}))}CreateParticipantBehavior.$inject=["canvas","eventBus","gridSnapping"];var Ye=n("3413"),Xe=n("6de3"),Je=3e3;function LayoutConnectionBehavior(e,t,n){Ye["a"].call(this,e),this._gridSnapping=t;var i=this;this.postExecuted(["connection.create","connection.layout"],Je,(function(e){var t=e.context,a=t.connection,o=t.hints||{},r=a.waypoints;o.connectionStart||o.connectionEnd||!1===o.createElementsBehavior||hasMiddleSegments(r)&&n.updateWaypoints(a,i.snapMiddleSegments(r))}))}function hasMiddleSegments(e){return e.length>3}function horizontallyAligned(e){return"h"===e}function verticallyAligned(e){return"v"===e}function snapSegment(e,t,n){var i=Object(Xe["d"])(t,n),a={};return horizontallyAligned(i)&&(a.y=e.snapValue(t.y)),verticallyAligned(i)&&(a.x=e.snapValue(t.x)),("x"in a||"y"in a)&&(t=Object(r["assign"])({},t,a),n=Object(r["assign"])({},n,a)),[t,n]}LayoutConnectionBehavior.$inject=["eventBus","gridSnapping","modeling"],a()(LayoutConnectionBehavior,Ye["a"]),LayoutConnectionBehavior.prototype.snapMiddleSegments=function(e){var t,n=this._gridSnapping;e=e.slice();for(var i=1;i<e.length-2;i++)t=snapSegment(n,e[i],e[i+1]),e[i]=t[0],e[i+1]=t[1];return e};var Ze={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingCreateParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",AutoPlaceBehavior],gridSnappingCreateParticipantBehavior:["type",CreateParticipantBehavior],gridSnappingLayoutConnectionBehavior:["type",LayoutConnectionBehavior]},Qe={__depends__:[qe["a"],Ze],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",BpmnGridSnapping]},et=30,tt=30;function BpmnInteractionEvents(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],(function(e){var t=e.element,i=e.gfx;return Object(S["is"])(t,"bpmn:Lane")?n.createParticipantHit(t,i):Object(S["is"])(t,"bpmn:Participant")?Object(w["isExpanded"])(t)?n.createParticipantHit(t,i):n.createDefaultHit(t,i):Object(S["is"])(t,"bpmn:SubProcess")?Object(w["isExpanded"])(t)?n.createSubProcessHit(t,i):n.createDefaultHit(t,i):void 0}))}BpmnInteractionEvents.$inject=["eventBus","interactionEvents"],BpmnInteractionEvents.prototype.createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0},BpmnInteractionEvents.prototype.createParticipantHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:et,height:e.height}),!0},BpmnInteractionEvents.prototype.createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:tt}),!0};var nt={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",BpmnInteractionEvents]},it=n("2f93"),at=n("19ce");function BpmnKeyboardBindings(e){e.invoke(at["a"],this)}a()(BpmnKeyboardBindings,at["a"]),BpmnKeyboardBindings.$inject=["injector"],BpmnKeyboardBindings.prototype.registerBindings=function(e,t){function addListener(n,i){t.isRegistered(n)&&e.addListener(i)}at["a"].prototype.registerBindings.call(this,e,t),addListener("selectElements",(function(n){var i=n.keyEvent;if(e.isKey(["a","A"],i)&&e.isCmd(i))return t.trigger("selectElements"),!0})),addListener("find",(function(n){var i=n.keyEvent;if(e.isKey(["f","F"],i)&&e.isCmd(i))return t.trigger("find"),!0})),addListener("spaceTool",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["s","S"],i)?(t.trigger("spaceTool"),!0):void 0})),addListener("lassoTool",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["l","L"],i)?(t.trigger("lassoTool"),!0):void 0})),addListener("handTool",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["h","H"],i)?(t.trigger("handTool"),!0):void 0})),addListener("globalConnectTool",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["c","C"],i)?(t.trigger("globalConnectTool"),!0):void 0})),addListener("directEditing",(function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey(["e","E"],i)?(t.trigger("directEditing"),!0):void 0}))};var ot={__depends__:[it["a"]],__init__:["keyboardBindings"],keyboardBindings:["type",BpmnKeyboardBindings]},rt=n("e82a"),ct=n("753e"),st=n("6fd9"),lt=n("ea6d");function createCategoryValue(e,t){var n=t.create("bpmn:CategoryValue"),i=t.create("bpmn:Category",{categoryValue:[n]});return Object(lt["add"])(e.get("rootElements"),i),Object(S["getBusinessObject"])(i).$parent=e,Object(S["getBusinessObject"])(n).$parent=i,n}function LabelEditingProvider(e,t,n,i,a,o,r){function activateDirectEdit(e,t){(t||Object(Q["isAny"])(e,["bpmn:Task","bpmn:TextAnnotation","bpmn:Group"])||isCollapsedSubProcess(e))&&i.activate(e)}this._bpmnFactory=t,this._canvas=n,this._modeling=a,this._textRenderer=r,i.registerProvider(this),e.on("element.dblclick",(function(e){activateDirectEdit(e.element,!0)})),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open"],(function(e){i.isActive()&&i.complete()})),e.on(["commandStack.changed"],(function(e){i.isActive()&&i.cancel()})),e.on("directEditing.activate",(function(e){o.removeResizers()})),e.on("create.end",500,(function(e){var t=e.context,n=t.shape,i=e.context.canExecute,a=e.isTouch;a||i&&(t.hints&&!1===t.hints.createElementsBehavior||activateDirectEdit(n))})),e.on("autoPlace.end",500,(function(e){activateDirectEdit(e.shape)}))}function isCollapsedSubProcess(e){return Object(S["is"])(e,"bpmn:SubProcess")&&!Object(w["isExpanded"])(e)}function isExpandedSubProcess(e){return Object(S["is"])(e,"bpmn:SubProcess")&&Object(w["isExpanded"])(e)}function isCollapsedPool(e){return Object(S["is"])(e,"bpmn:Participant")&&!Object(w["isExpanded"])(e)}function isExpandedPool(e){return Object(S["is"])(e,"bpmn:Participant")&&Object(w["isExpanded"])(e)}function isEmptyText(e){return!e||!e.trim()}LabelEditingProvider.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"],LabelEditingProvider.prototype.activate=function(e){var t=getLabel(e);if(void 0!==t){var n={text:t},i=this.getEditingBBox(e);Object(r["assign"])(n,i);var a={};return(Object(Q["isAny"])(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||isCollapsedSubProcess(e))&&Object(r["assign"])(a,{centerVertically:!0}),isLabelExternal(e)&&Object(r["assign"])(a,{autoResize:!0}),Object(S["is"])(e,"bpmn:TextAnnotation")&&Object(r["assign"])(a,{resizable:!0,autoResize:!0}),Object(r["assign"])(n,{options:a}),n}},LabelEditingProvider.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),a={x:i.x+i.width/2,y:i.y+i.height/2},o={x:i.x,y:i.y},c=t.zoom(),s=this._textRenderer.getDefaultStyle(),l=this._textRenderer.getExternalStyle(),p=l.fontSize*c,d=l.lineHeight,u=s.fontSize*c,m=s.lineHeight,h={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};(Object(S["is"])(e,"bpmn:Lane")||isExpandedPool(e))&&(Object(r["assign"])(o,{width:i.height,height:30*c,x:i.x-i.height/2+15*c,y:a.y-30*c/2}),Object(r["assign"])(h,{fontSize:u+"px",lineHeight:m,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px",transform:"rotate(-90deg)"})),(Object(Q["isAny"])(e,["bpmn:Task","bpmn:CallActivity"])||isCollapsedPool(e)||isCollapsedSubProcess(e))&&(Object(r["assign"])(o,{width:i.width,height:i.height}),Object(r["assign"])(h,{fontSize:u+"px",lineHeight:m,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px"})),isExpandedSubProcess(e)&&(Object(r["assign"])(o,{width:i.width,x:i.x}),Object(r["assign"])(h,{fontSize:u+"px",lineHeight:m,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px"}));var b=90*c,g=7*c,f=4*c;if(n.labelTarget&&(Object(r["assign"])(o,{width:b,height:i.height+g+f,x:a.x-b/2,y:i.y-g}),Object(r["assign"])(h,{fontSize:p+"px",lineHeight:d,paddingTop:g+"px",paddingBottom:f+"px"})),isLabelExternal(n)&&!hasExternalLabel(n)&&!isLabel(n)){var v=getExternalLabelMid(e),y=t.getAbsoluteBBox({x:v.x,y:v.y,width:0,height:0}),E=p+g+f;Object(r["assign"])(o,{width:b,height:E,x:y.x-b/2,y:y.y-E/2}),Object(r["assign"])(h,{fontSize:p+"px",lineHeight:d,paddingTop:g+"px",paddingBottom:f+"px"})}return Object(S["is"])(e,"bpmn:TextAnnotation")&&(Object(r["assign"])(o,{width:i.width,height:i.height,minWidth:30*c,minHeight:10*c}),Object(r["assign"])(h,{textAlign:"left",paddingTop:5*c+"px",paddingBottom:7*c+"px",paddingLeft:7*c+"px",paddingRight:5*c+"px",fontSize:u+"px",lineHeight:m})),{bounds:o,style:h}},LabelEditingProvider.prototype.update=function(e,t,n,i){var a,o;if(Object(S["is"])(e,"bpmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(e),a={x:e.x,y:e.y,width:e.width/o.width*i.width,height:e.height/o.height*i.height}),Object(S["is"])(e,"bpmn:Group")){var r=Object(S["getBusinessObject"])(e);if(!r.categoryValueRef){var c=this._canvas.getRootElement(),s=Object(S["getBusinessObject"])(c).$parent,l=createCategoryValue(s,this._bpmnFactory);Object(S["getBusinessObject"])(e).categoryValueRef=l}}isEmptyText(t)&&(t=null),this._modeling.updateLabel(e,t,a)};var pt="djs-element-hidden",dt="djs-label-hidden";function LabelEditingPreview(e,t,n,i){var a,o,r,c=this,l=t.getDefaultLayer();e.on("directEditing.activate",(function(e){var n=e.active;if(a=n.element.label||n.element,Object(S["is"])(a,"bpmn:TextAnnotation")){o=t.getAbsoluteBBox(a),r=Object(s["f"])("g");var p=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:a.width,containerHeight:a.height,position:{mx:0,my:0}}),d=c.path=Object(s["f"])("path");Object(s["b"])(d,{d:p,strokeWidth:2,stroke:LabelEditingPreview_getStrokeColor(a)}),Object(s["a"])(r,d),Object(s["a"])(l,r),Object(P["c"])(r,a.x,a.y)}Object(S["is"])(a,"bpmn:TextAnnotation")||a.labelTarget?t.addMarker(a,pt):(Object(S["is"])(a,"bpmn:Task")||Object(S["is"])(a,"bpmn:CallActivity")||Object(S["is"])(a,"bpmn:SubProcess")||Object(S["is"])(a,"bpmn:Participant"))&&t.addMarker(a,dt)})),e.on("directEditing.resize",(function(e){if(Object(S["is"])(a,"bpmn:TextAnnotation")){var t=e.height,n=e.dy,r=Math.max(a.height/o.height*(t+n),0),l=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:a.width,containerHeight:r,position:{mx:0,my:0}});Object(s["b"])(c.path,{d:l})}})),e.on(["directEditing.complete","directEditing.cancel"],(function(e){var n=e.active;n&&(t.removeMarker(n.element.label||n.element,pt),t.removeMarker(a,dt)),a=void 0,o=void 0,r&&(Object(s["j"])(r),r=void 0)}))}function LabelEditingPreview_getStrokeColor(e,t){var n=Object(S["getBusinessObject"])(e);return n.di.get("stroke")||t||"black"}LabelEditingPreview.$inject=["eventBus","canvas","elementRegistry","pathMap"];var ut={__depends__:[ct["a"],st["a"],de["a"]],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",LabelEditingProvider],labelEditingPreview:["type",LabelEditingPreview]},mt=n("acb6"),ht=["top","bottom","left","right"],bt=10;function AdaptiveLabelPositioningBehavior(e,t){function checkLabelAdjustment(e){if(hasExternalLabel(e)){var t=getOptimalPosition(e);t&&adjustLabelPosition(e,t)}}function adjustLabelPosition(e,n){var i=Object(W["e"])(e),a=e.label,o=Object(W["e"])(a);if(a.parent){var r,c=Object(W["b"])(e);switch(n){case"top":r={x:i.x,y:c.top-bt-a.height/2};break;case"left":r={x:c.left-bt-a.width/2,y:i.y};break;case"bottom":r={x:i.x,y:c.bottom+bt+a.height/2};break;case"right":r={x:c.right+bt+a.width/2,y:i.y};break}var s=Object(mt["b"])(r,o);t.moveShape(a,s)}}Ye["a"].call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],(function(e){var t=e.context,n=t.connection,i=n.source,a=n.target,o=t.hints||{};!1!==o.createElementsBehavior&&(checkLabelAdjustment(i),checkLabelAdjustment(a))})),this.postExecuted(["label.create"],(function(e){var t=e.context,n=t.shape,i=t.hints||{};!1!==i.createElementsBehavior&&checkLabelAdjustment(n.labelTarget)})),this.postExecuted(["elements.create"],(function(e){var t=e.context,n=t.elements,i=t.hints||{};!1!==i.createElementsBehavior&&n.forEach((function(e){checkLabelAdjustment(e)}))}))}function getTakenHostAlignments(e){var t,n=e.host,i=Object(W["e"])(e),a=Object(W["f"])(i,n);t=a.indexOf("-")>=0?a.split("-"):[a];var o=ht.filter((function(e){return-1===t.indexOf(e)}));return o}function getTakenConnectionAlignments(e){var t=Object(W["e"])(e),n=[].concat(e.incoming.map((function(e){return e.waypoints[e.waypoints.length-2]})),e.outgoing.map((function(e){return e.waypoints[1]}))).map((function(e){return getApproximateOrientation(t,e)}));return n}function getOptimalPosition(e){var t=Object(W["e"])(e.label),n=Object(W["e"])(e),i=getApproximateOrientation(n,t);if(isAligned(i)){var a=getTakenConnectionAlignments(e);if(e.host){var o=getTakenHostAlignments(e);a=a.concat(o)}var r=ht.filter((function(e){return-1===a.indexOf(e)}));if(-1===r.indexOf(i))return r[0]}}function getApproximateOrientation(e,t){return Object(W["f"])(t,e,5)}function isAligned(e){return-1!==ht.indexOf(e)}function AppendBehavior(e,t,n){Ye["a"].call(this,e),this.preExecute("shape.append",(function(e){var t=e.source,n=e.shape;e.position||(Object(S["is"])(n,"bpmn:TextAnnotation")?e.position={x:t.x+t.width/2+75,y:t.y-50-n.height/2}:e.position={x:t.x+t.width+80+n.width/2,y:t.y+t.height/2})}),!0)}function AssociationBehavior(e,t){e.invoke(Ye["a"],this),this.postExecute("shape.move",(function(e){var n=e.newParent,i=e.shape,a=Object(r["filter"])(i.incoming.concat(i.outgoing),(function(e){return Object(S["is"])(e,"bpmn:Association")}));Object(r["forEach"])(a,(function(e){t.moveConnection(e,{x:0,y:0},n)}))}),!0)}a()(AdaptiveLabelPositioningBehavior,Ye["a"]),AdaptiveLabelPositioningBehavior.$inject=["eventBus","modeling"],a()(AppendBehavior,Ye["a"]),AppendBehavior.$inject=["eventBus","elementFactory","bpmnRules"],a()(AssociationBehavior,Ye["a"]),AssociationBehavior.$inject=["injector","modeling"];var gt=500;function AttachEventBehavior(e,t){t.invoke(Ye["a"],this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",gt,(function(e){var t=e.elements;t=t.filter((function(e){var t=e.host;return shouldReplace(e,t)})),1===t.length&&t.map((function(e){return t.indexOf(e)})).forEach((function(i){var a=t[i];e.elements[i]=n.replaceShape(t[i],a)}))}),!0),this.preExecute("elements.move",gt,(function(e){var t=e.shapes,i=e.newHost;if(1===t.length){var a=t[0];shouldReplace(a,i)&&(e.shapes=[n.replaceShape(a,i)])}}),!0)}function getEventDefinition(e){var t=Object(S["getBusinessObject"])(e),n=t.eventDefinitions;return n&&n[0]}function shouldReplace(e,t){return!isLabel(e)&&Object(Q["isAny"])(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function BoundaryEventBehavior(e,t){function getBoundaryEvents(e){return Object(r["filter"])(e.attachers,(function(e){return Object(S["is"])(e,"bpmn:BoundaryEvent")}))}Ye["a"].call(this,e),this.postExecute("connection.create",(function(e){var n=e.context.source,i=e.context.target,a=getBoundaryEvents(i);Object(S["is"])(n,"bpmn:EventBasedGateway")&&Object(S["is"])(i,"bpmn:ReceiveTask")&&a.length>0&&t.removeElements(a)})),this.postExecute("connection.reconnect",(function(e){var n=e.context.oldSource,i=e.context.newSource;Object(S["is"])(n,"bpmn:Gateway")&&Object(S["is"])(i,"bpmn:EventBasedGateway")&&Object(r["forEach"])(i.outgoing,(function(e){var n=e.target,i=getBoundaryEvents(n);Object(S["is"])(n,"bpmn:ReceiveTask")&&i.length>0&&t.removeElements(i)}))}))}AttachEventBehavior.$inject=["bpmnReplace","injector"],a()(AttachEventBehavior,Ye["a"]),AttachEventBehavior.prototype.replaceShape=function(e,t){var n=getEventDefinition(e),i={type:"bpmn:BoundaryEvent",host:t};return n&&(i.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,i,{layoutConnection:!1})},BoundaryEventBehavior.$inject=["eventBus","modeling"],a()(BoundaryEventBehavior,Ye["a"]);var ft=500;function RootElementReferenceBehavior(e,t,n,i,a){function canHaveRootElementReference(e){return Object(Q["isAny"])(e,["bpmn:ReceiveTask","bpmn:SendTask"])||hasAnyEventDefinition(e,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function hasRootElement(t){var n=e.getDefinitions(),i=n.get("rootElements");return!!Object(r["find"])(i,Object(r["matchPattern"])({id:t.id}))}function getRootElementReferencePropertyName(e){return Object(S["is"])(e,"bpmn:ErrorEventDefinition")?"errorRef":Object(S["is"])(e,"bpmn:EscalationEventDefinition")?"escalationRef":Object(S["is"])(e,"bpmn:MessageEventDefinition")?"messageRef":Object(S["is"])(e,"bpmn:SignalEventDefinition")?"signalRef":void 0}function getRootElement(e){if(Object(Q["isAny"])(e,["bpmn:ReceiveTask","bpmn:SendTask"]))return e.get("messageRef");var t=e.get("eventDefinitions"),n=t[0];return n.get(getRootElementReferencePropertyName(n))}function setRootElement(e,t){if(Object(Q["isAny"])(e,["bpmn:ReceiveTask","bpmn:SendTask"]))return e.set("messageRef",t);var n=e.get("eventDefinitions"),i=n[0];return i.set(getRootElementReferencePropertyName(i),t)}n.invoke(Ye["a"],this),this.executed("shape.create",(function(t){var n=t.shape;if(canHaveRootElementReference(n)){var i,a=Object(S["getBusinessObject"])(n),o=getRootElement(a);o&&!hasRootElement(o)&&(i=e.getDefinitions().get("rootElements"),Object(lt["add"])(i,o),t.addedRootElement=o)}}),!0),this.reverted("shape.create",(function(t){var n=t.addedRootElement;if(n){var i=e.getDefinitions().get("rootElements");Object(lt["remove"])(i,n)}}),!0),t.on("copyPaste.copyElement",(function(e){var t=e.descriptor,n=e.element;if(canHaveRootElementReference(n)){var i=Object(S["getBusinessObject"])(n),a=getRootElement(i);a&&(t.referencedRootElement=a)}})),t.on("copyPaste.pasteElement",ft,(function(e){var t=e.descriptor,n=t.businessObject;if(canHaveRootElementReference(n)){var o=t.referencedRootElement;o&&(hasRootElement(o)||(o=i.copyElement(o,a.create(o.$type))),setRootElement(n,o))}}))}function hasAnyEventDefinition(e,t){return Object(r["isArray"])(t)||(t=[t]),Object(r["some"])(t,(function(t){return Object(w["hasEventDefinition"])(e,t)}))}function CreateBehavior(e){e.invoke(Ye["a"],this),this.preExecute("shape.create",1500,(function(e){var t=e.context,n=t.parent,i=t.shape;Object(S["is"])(n,"bpmn:Lane")&&!Object(S["is"])(i,"bpmn:Lane")&&(t.parent=Object(Q["getParent"])(n,"bpmn:Participant"))}))}RootElementReferenceBehavior.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"],a()(RootElementReferenceBehavior,Ye["a"]),CreateBehavior.$inject=["injector"],a()(CreateBehavior,Ye["a"]);var vt=1500,yt=2e3;function FixHoverBehavior(e,t,n){t.on(["create.hover","create.move","create.end","shape.move.hover","shape.move.move","shape.move.end"],vt,(function(t){var i=t.context,a=i.shape||t.shape,o=t.hover;Object(S["is"])(o,"bpmn:Lane")&&!Object(Q["isAny"])(a,["bpmn:Lane","bpmn:Participant"])&&(t.hover=getLanesRoot(o),t.hoverGfx=e.getGraphics(t.hover));var r=n.getRootElement();o!==r&&(a.labelTarget||Object(S["is"])(a,"bpmn:Group"))&&(t.hover=r,t.hoverGfx=e.getGraphics(t.hover))})),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],vt,(function(t){var n=t.hover;Object(S["is"])(n,"bpmn:Lane")&&(t.hover=getLanesRoot(n)||n,t.hoverGfx=e.getGraphics(t.hover))})),t.on(["bendpoint.move.hover"],vt,(function(t){var n=t.context,i=t.hover,a=n.type;Object(S["is"])(i,"bpmn:Lane")&&/reconnect/.test(a)&&(t.hover=getLanesRoot(i)||i,t.hoverGfx=e.getGraphics(t.hover))})),t.on(["connect.start"],vt,(function(e){var t=e.context,n=t.start;Object(S["is"])(n,"bpmn:Lane")&&(t.start=getLanesRoot(n)||n)})),t.on("shape.move.start",yt,(function(e){var t=e.shape;Object(S["is"])(t,"bpmn:Lane")&&(e.shape=getLanesRoot(t)||t)}))}function CreateDataObjectBehavior(e,t,n){Ye["a"].call(this,e),this.preExecute("shape.create",(function(e){var n=e.context,i=n.shape;if(Object(S["is"])(i,"bpmn:DataObjectReference")&&"label"!==i.type){var a=t.create("bpmn:DataObject");i.businessObject.dataObjectRef=a}}))}FixHoverBehavior.$inject=["elementRegistry","eventBus","canvas"],CreateDataObjectBehavior.$inject=["eventBus","bpmnFactory","moddle"],a()(CreateDataObjectBehavior,Ye["a"]);var Et=20,Ot=20,jt=30,xt=2e3;function CreateParticipantBehavior_CreateParticipantBehavior(e,t,n){function ensureCollaboration(t){var i,a=t.parent,o=e.getRootElement();Object(S["is"])(o,"bpmn:Collaboration")?i=o:(i=n.makeCollaboration(),t.process=a),t.parent=i}Ye["a"].call(this,t),t.on(["create.start","shape.move.start"],xt,(function(t){var n=t.context,i=n.shape,a=e.getRootElement();if(Object(S["is"])(i,"bpmn:Participant")&&Object(S["is"])(a,"bpmn:Process")&&a.children.length){var o=a.children.filter((function(e){return!Object(S["is"])(e,"bpmn:Group")&&!isLabel(e)&&!isConnection(e)}));if(o.length){var c=Object(Ge["b"])(o),s=getParticipantBounds(i,c);Object(r["assign"])(i,s),n.createConstraints=getParticipantCreateConstraints(i,c)}}})),t.on("create.start",xt,(function(n){var i=n.context,a=i.shape,o=e.getRootElement(),r=e.getGraphics(o);function ensureHoveringProcess(e){e.element=o,e.gfx=r}Object(S["is"])(a,"bpmn:Participant")&&Object(S["is"])(o,"bpmn:Process")&&(t.on("element.hover",xt,ensureHoveringProcess),t.once("create.cleanup",(function(){t.off("element.hover",ensureHoveringProcess)})))})),this.preExecute("shape.create",(function(e){var t=e.parent,n=e.shape;Object(S["is"])(n,"bpmn:Participant")&&Object(S["is"])(t,"bpmn:Process")&&ensureCollaboration(e)}),!0),this.execute("shape.create",(function(e){var t=e.process,n=e.shape;t&&(e.oldProcessRef=n.businessObject.processRef,n.businessObject.processRef=t.businessObject)}),!0),this.revert("shape.create",(function(e){var t=e.process,n=e.shape;t&&(n.businessObject.processRef=e.oldProcessRef)}),!0),this.postExecute("shape.create",(function(e){var t=e.process,i=e.shape;if(t){var a=t.children.slice();n.moveElements(a,{x:0,y:0},i)}}),!0),this.preExecute("elements.create",xt,(function(e){var t,n=e.elements,i=e.parent,a=findParticipant(n);a&&Object(S["is"])(i,"bpmn:Process")&&(ensureCollaboration(e),t=findParticipant(n),e.oldProcessRef=t.businessObject.processRef,t.businessObject.processRef=i.businessObject)}),!0),this.revert("elements.create",(function(e){var t,n=e.elements,i=e.process;i&&(t=findParticipant(n),t.businessObject.processRef=e.oldProcessRef)}),!0),this.postExecute("elements.create",(function(e){var t,i=e.elements,a=e.process;if(a){t=findParticipant(i);var o=a.children.slice();n.moveElements(o,{x:0,y:0},t)}}),!0)}function getParticipantBounds(e,t){t={width:t.width+2*Et+jt,height:t.height+2*Ot};var n=Math.max(e.width,t.width),i=Math.max(e.height,t.height);return{x:-n/2,y:-i/2,width:n,height:i}}function getParticipantCreateConstraints(e,t){return t=Object(W["b"])(t),{bottom:t.top+e.height/2-Ot,left:t.right-e.width/2+Et,top:t.bottom-e.height/2+Ot,right:t.left+e.width/2-Et-jt}}function isConnection(e){return!!e.waypoints}function findParticipant(e){return Object(r["find"])(e,(function(e){return Object(S["is"])(e,"bpmn:Participant")}))}CreateParticipantBehavior_CreateParticipantBehavior.$inject=["canvas","eventBus","modeling"],a()(CreateParticipantBehavior_CreateParticipantBehavior,Ye["a"]);var wt="__targetRef_placeholder";function DataInputAssociationBehavior(e,t){function usesTargetRef(e,t,n){var i=e.get("dataInputAssociations");return Object(r["find"])(i,(function(e){return e!==n&&e.targetRef===t}))}function getTargetRef(e,n){var i=e.get("properties"),a=Object(r["find"])(i,(function(e){return e.name===wt}));return!a&&n&&(a=t.create("bpmn:Property",{name:wt}),Object(lt["add"])(i,a)),a}function cleanupTargetRef(e,t){var n=getTargetRef(e);n&&(usesTargetRef(e,n,t)||Object(lt["remove"])(e.get("properties"),n))}function fixTargetRef(e){var t,n=e.context,i=n.connection,a=i.businessObject,o=i.target,r=o&&o.businessObject,c=n.newTarget,s=c&&c.businessObject,l=n.oldTarget||n.target,p=l&&l.businessObject,d=i.businessObject;p&&p!==r&&cleanupTargetRef(p,a),s&&s!==r&&cleanupTargetRef(s,a),r?(t=getTargetRef(r,!0),d.targetRef=t):d.targetRef=null}Ye["a"].call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],ifDataInputAssociation(fixTargetRef)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],ifDataInputAssociation(fixTargetRef))}function ifDataInputAssociation(e){return function(t){var n=t.context,i=n.connection;if(Object(S["is"])(i,"bpmn:DataInputAssociation"))return e(t)}}function UpdateSemanticParentHandler(e){this._bpmnUpdater=e}function DataStoreBehavior(e,t,n,i){function getFirstParticipant(){return n.filter((function(e){return Object(S["is"])(e,"bpmn:Participant")}))[0]}function getDataStores(e){return e.children.filter((function(e){return Object(S["is"])(e,"bpmn:DataStoreReference")&&!e.labelTarget}))}function updateDataStoreParent(e,n){var i=e.businessObject||e;if(n=n||getFirstParticipant(),n){var a=n.businessObject||n;t.execute("dataStore.updateContainment",{dataStoreBo:i,newSemanticParent:a.processRef||a,newDiParent:a.di})}}Ye["a"].call(this,i),t.registerHandler("dataStore.updateContainment",UpdateSemanticParentHandler),this.preExecute("shape.create",(function(e){var t=e.context,n=t.shape;Object(S["is"])(n,"bpmn:DataStoreReference")&&"label"!==n.type&&(t.hints||(t.hints={}),t.hints.autoResize=!1)})),this.preExecute("elements.move",(function(e){var t=e.context,n=t.shapes,i=n.filter((function(e){return Object(S["is"])(e,"bpmn:DataStoreReference")}));i.length&&(t.hints||(t.hints={}),t.hints.autoResize=n.filter((function(e){return!Object(S["is"])(e,"bpmn:DataStoreReference")})))})),this.postExecute("shape.create",(function(e){var t=e.context,n=t.shape,i=n.parent;Object(S["is"])(n,"bpmn:DataStoreReference")&&"label"!==n.type&&Object(S["is"])(i,"bpmn:Collaboration")&&updateDataStoreParent(n)})),this.postExecute("shape.move",(function(e){var t=e.context,n=t.shape,i=t.oldParent,a=n.parent;if(!Object(S["is"])(i,"bpmn:Collaboration")&&Object(S["is"])(n,"bpmn:DataStoreReference")&&"label"!==n.type&&Object(S["is"])(a,"bpmn:Collaboration")){var o=Object(S["is"])(i,"bpmn:Participant")?i:getAncestor(i,"bpmn:Participant");updateDataStoreParent(n,o)}})),this.postExecute("shape.delete",(function(t){var n=t.context,i=n.shape,a=e.getRootElement();Object(Q["isAny"])(i,["bpmn:Participant","bpmn:SubProcess"])&&Object(S["is"])(a,"bpmn:Collaboration")&&getDataStores(a).filter((function(e){return isDescendant(e,i)})).forEach((function(e){updateDataStoreParent(e)}))})),this.postExecute("canvas.updateRoot",(function(e){var t=e.context,n=t.oldRoot,i=t.newRoot,a=getDataStores(n);a.forEach((function(e){Object(S["is"])(i,"bpmn:Process")&&updateDataStoreParent(e,i)}))}))}function isDescendant(e,t){var n=e.businessObject||e,i=t.businessObject||t;while(n.$parent){if(n.$parent===i.processRef||i)return!0;n=n.$parent}return!1}function getAncestor(e,t){while(e.parent){if(Object(S["is"])(e.parent,t))return e.parent;e=e.parent}}DataInputAssociationBehavior.$inject=["eventBus","bpmnFactory"],a()(DataInputAssociationBehavior,Ye["a"]),UpdateSemanticParentHandler.$inject=["bpmnUpdater"],UpdateSemanticParentHandler.prototype.execute=function(e){var t=e.dataStoreBo,n=e.newSemanticParent,i=e.newDiParent;e.oldSemanticParent=t.$parent,e.oldDiParent=t.di.$parent,this._bpmnUpdater.updateSemanticParent(t,n),this._bpmnUpdater.updateDiParent(t.di,i)},UpdateSemanticParentHandler.prototype.revert=function(e){var t=e.dataStoreBo,n=e.oldSemanticParent,i=e.oldDiParent;this._bpmnUpdater.updateSemanticParent(t,n),this._bpmnUpdater.updateDiParent(t.di,i)},DataStoreBehavior.$inject=["canvas","commandStack","elementRegistry","eventBus"],a()(DataStoreBehavior,Ye["a"]);var St=500;function DeleteLaneBehavior(e,t,n){function compensateLaneDelete(e,t){var i,a,o,r=getChildLanes(t),c=[],s=[];(Object(Ge["a"])(r,(function(t){return t.y>e.y?s.push(t):c.push(t),t.children})),r.length)&&(i=s.length&&c.length?e.height/2:e.height,c.length&&(a=n.calculateAdjustments(c,"y",i,e.y-10),n.makeSpace(a.movingShapes,a.resizingShapes,{x:0,y:i},"s")),s.length&&(o=n.calculateAdjustments(s,"y",-i,e.y+e.height+10),n.makeSpace(o.movingShapes,o.resizingShapes,{x:0,y:-i},"n")))}Ye["a"].call(this,e),this.postExecuted("shape.delete",St,(function(e){var t=e.context,n=t.hints,i=t.shape,a=t.oldParent;Object(S["is"])(i,"bpmn:Lane")&&(n&&n.nested||compensateLaneDelete(i,a))}))}DeleteLaneBehavior.$inject=["eventBus","modeling","spaceTool"],a()(DeleteLaneBehavior,Ye["a"]);var Bt=500;function DetachEventBehavior(e,t){t.invoke(Ye["a"],this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",Bt,(function(e){var t=e.elements;t.filter((function(e){var t=e.host;return DetachEventBehavior_shouldReplace(e,t)})).map((function(e){return t.indexOf(e)})).forEach((function(i){e.elements[i]=n.replaceShape(t[i])}))}),!0),this.preExecute("elements.move",Bt,(function(e){var t=e.shapes,i=e.newHost;t.forEach((function(e,a){var o=e.host;DetachEventBehavior_shouldReplace(e,includes(t,o)?o:i)&&(t[a]=n.replaceShape(e))}))}),!0)}function DetachEventBehavior_getEventDefinition(e){var t=Object(S["getBusinessObject"])(e),n=t.eventDefinitions;return n&&n[0]}function DetachEventBehavior_shouldReplace(e,t){return!isLabel(e)&&Object(S["is"])(e,"bpmn:BoundaryEvent")&&!t}function includes(e,t){return-1!==e.indexOf(t)}DetachEventBehavior.$inject=["bpmnReplace","injector"],a()(DetachEventBehavior,Ye["a"]),DetachEventBehavior.prototype.replaceShape=function(e){var t,n=DetachEventBehavior_getEventDefinition(e);return t=n?{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:n.$type}:{type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,t,{layoutConnection:!1})};var Pt=n("997c");function DropOnFlowBehavior(e,t,n){function insertShape(e,i,a){var o,c,s,l,p,d,u,m,h=i.waypoints,b=e.outgoing.slice(),g=e.incoming.slice();m=Object(r["isNumber"])(a.width)?Object(W["e"])(a):a;var f=Object(Pt["a"])(h,m);if(f){if(o=h.slice(0,f.index),c=h.slice(f.index+(f.bendpoint?1:0)),!o.length||!c.length)return;s=f.bendpoint?h[f.index]:m,DropOnFlowBehavior_isPointInsideBBox(e,o[o.length-1])||o.push(copy(s)),DropOnFlowBehavior_isPointInsideBBox(e,c[0])||c.unshift(copy(s))}l=i.source,p=i.target,t.canConnect(l,e,i)&&(n.reconnectEnd(i,e,o||m),d=i),t.canConnect(e,p,i)&&(d?u=n.connect(e,p,{type:i.type,waypoints:c}):(n.reconnectStart(i,e,c||m),u=i));var v=[].concat(d&&Object(r["filter"])(g,(function(e){return e.source===d.source}))||[],u&&Object(r["filter"])(b,(function(e){return e.target===u.target}))||[]);v.length&&n.removeElements(v)}Ye["a"].call(this,e),this.preExecute("elements.move",(function(e){var n=e.newParent,i=e.shapes,a=e.delta,o=i[0];if(o&&n){n&&n.waypoints&&(e.newParent=n=n.parent);var c=Object(W["e"])(o),s={x:c.x+a.x,y:c.y+a.y},l=Object(r["find"])(n.children,(function(e){var n=t.canInsert(i,e);return n&&Object(Pt["a"])(e.waypoints,s)}));l&&(e.targetFlow=l,e.position=s)}}),!0),this.postExecuted("elements.move",(function(e){var t=e.shapes,n=e.targetFlow,i=e.position;n&&insertShape(t[0],n,i)}),!0),this.preExecute("shape.create",(function(e){var n=e.parent,i=e.shape;t.canInsert(i,n)&&(e.targetFlow=n,e.parent=n.parent)}),!0),this.postExecuted("shape.create",(function(e){var t=e.shape,n=e.targetFlow,i=e.position;n&&insertShape(t,n,i)}),!0)}function DropOnFlowBehavior_isPointInsideBBox(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function copy(e){return Object(r["assign"])({},e)}function EventBasedGatewayBehavior(e,t){Ye["a"].call(this,e),this.preExecuted("connection.create",(function(e){var n=e.context,i=n.source,a=n.target,o=a.incoming.slice();n.hints&&!1===n.hints.createElementsBehavior||Object(S["is"])(i,"bpmn:EventBasedGateway")&&a.incoming.length&&o.filter(isSequenceFlow).forEach((function(e){t.removeConnection(e)}))})),this.preExecuted("shape.replace",(function(e){var n,i,a=e.context.newShape;Object(S["is"])(a,"bpmn:EventBasedGateway")&&(n=a.outgoing.filter(isSequenceFlow).map((function(e){return e.target})),i=n.reduce((function(e,t){var n=t.incoming.filter(isSequenceFlow);return e.concat(n)}),[]),i.forEach((function(e){e.source!==a&&t.removeConnection(e)})))}))}function isSequenceFlow(e){return Object(S["is"])(e,"bpmn:SequenceFlow")}a()(DropOnFlowBehavior,Ye["a"]),DropOnFlowBehavior.$inject=["eventBus","bpmnRules","modeling"],EventBasedGatewayBehavior.$inject=["eventBus","modeling"],a()(EventBasedGatewayBehavior,Ye["a"]);var _t=2e3;function GroupBehavior(e,t,n,i,a,o){function getDefinitions(){var e=t.getRootElement(),n=Object(S["getBusinessObject"])(e);return n.$parent}function removeReferencedCategoryValue(e){var t=Object(S["getBusinessObject"])(e),n=t.categoryValueRef;if(n){var i=n.$parent;n&&(Object(lt["remove"])(i.categoryValue,n),i&&!i.categoryValue.length&&removeCategory(i))}}function removeCategory(e){var t=getDefinitions();Object(lt["remove"])(t.get("rootElements"),e)}function getGroupElements(){return n.filter((function(e){return Object(S["is"])(e,"bpmn:Group")}))}function isReferenced(e,t){return e.some((function(e){var n=Object(S["getBusinessObject"])(e);return n.categoryValueRef&&n.categoryValueRef===t}))}a.invoke(Ye["a"],this),this.executed("shape.delete",(function(e){var t=e.context,n=t.shape;if(Object(S["is"])(n,"bpmn:Group")){var i=Object(S["getBusinessObject"])(n),a=i.categoryValueRef,o=getGroupElements();isReferenced(o,a)||removeReferencedCategoryValue(n)}})),this.reverted("shape.delete",(function(e){var t=e.context,n=t.shape;if(Object(S["is"])(n,"bpmn:Group")){var i=Object(S["getBusinessObject"])(n),a=i.categoryValueRef,o=getDefinitions(),r=a?a.$parent:null;Object(lt["add"])(r.get("categoryValue"),a),Object(lt["add"])(o.get("rootElements"),r)}})),this.execute("shape.create",(function(t){var n=t.context,i=n.shape,a=Object(S["getBusinessObject"])(i);if(Object(S["is"])(a,"bpmn:Group")&&!a.categoryValueRef){var o=getDefinitions(),r=createCategoryValue(o,e);a.categoryValueRef=r}})),this.revert("shape.create",(function(e){var t=e.context,n=t.shape;Object(S["is"])(n,"bpmn:Group")&&(removeReferencedCategoryValue(n),delete Object(S["getBusinessObject"])(n).categoryValueRef)})),i.on("moddleCopy.canCopyProperty",_t,(function(t){var n,i=t.property;if(Object(S["is"])(i,"bpmn:CategoryValue"))return n=createCategoryValue(getDefinitions(),e),o.copyElement(i,n)}))}function lineIntersect(e,t,n,i){var a,o,r,c,s;return a=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y),0==a?null:(o=e.y-n.y,r=e.x-n.x,s=(i.x-n.x)*o-(i.y-n.y)*r,c=s/a,{x:Math.round(e.x+c*(t.x-e.x)),y:Math.round(e.y+c*(t.y-e.y))})}function ImportDockingFix(e){function adjustDocking(e,t,n){var i,a={x:n.x,y:n.y-50},o={x:n.x-50,y:n.y},r=lineIntersect(e,t,n,a),c=lineIntersect(e,t,n,o);i=r&&c?getDistance(r,n)>getDistance(c,n)?c:r:r||c,e.original=i}function fixDockings(e){var t=e.waypoints;adjustDocking(t[0],t[1],Object(W["e"])(e.source)),adjustDocking(t[t.length-1],t[t.length-2],Object(W["e"])(e.target))}e.on("bpmnElement.added",(function(e){var t=e.element;t.waypoints&&fixDockings(t)}))}function getDistance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function IsHorizontalFix(e){Ye["a"].call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],(function(e){var n=Object(S["getBusinessObject"])(e.context.shape);Object(Q["isAny"])(n,t)&&!n.di.get("isHorizontal")&&n.di.set("isHorizontal",!0)}))}function vectorLength(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function getAngle(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function rotateVector(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function solveLambaSystem(e,t,n){var i=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],a=i[0].n*t[0]+i[1].n*t[1],o=i[0].lambda*t[0]+i[1].lambda*t[1];return-a/o}function perpendicularFoot(e,t){var n=t[0],i=t[1],a={x:i.x-n.x,y:i.y-n.y},o=solveLambaSystem([n.x,n.y],[a.x,a.y],[e.x,e.y]);return{x:n.x+o*a.x,y:n.y+o*a.y}}function getDistancePointLine(e,t){var n=perpendicularFoot(e,t),i={x:n.x-e.x,y:n.y-e.y};return vectorLength(i)}function getDistancePointPoint(e,t){return vectorLength({x:e.x-t.x,y:e.y-t.y})}GroupBehavior.$inject=["bpmnFactory","canvas","elementRegistry","eventBus","injector","moddleCopy"],a()(GroupBehavior,Ye["a"]),ImportDockingFix.$inject=["eventBus"],IsHorizontalFix.$inject=["eventBus"],a()(IsHorizontalFix,Ye["a"]);var Ct=Math.sqrt,Dt=Math.min,Rt=Math.max,Tt=Math.abs;function sq(e){return Math.pow(e,2)}function LineAttachmentUtil_getDistance(e,t){return Ct(sq(e.x-t.x)+sq(e.y-t.y))}function getAttachment(e,t){var n,i,a,o,r,c,s,l,p,d,u,m=0;for(m=0;m<t.length-1;m++){if(n=t[m],i=t[m+1],pointsEqual(n,i)?s=[n]:(a=LineAttachmentUtil_getDistance(e,n),o=LineAttachmentUtil_getDistance(e,i),c=Dt(a,o),s=getCircleSegmentIntersections(n,i,e,c)),s.length<1)throw new Error("expected between [1, 2] circle -> line intersections");1===s.length&&(l={type:"bendpoint",position:s[0],segmentIndex:m,bendpointIndex:pointsEqual(n,s[0])?m:m+1}),2===s.length&&(r=LineAttachmentUtil_mid(s[0],s[1]),l={type:"segment",position:r,segmentIndex:m,relativeLocation:LineAttachmentUtil_getDistance(n,r)/LineAttachmentUtil_getDistance(n,i)}),p=LineAttachmentUtil_getDistance(l.position,e),(!u||d>p)&&(u=l,d=p)}return u}function getCircleSegmentIntersections(e,t,n,i){var a=t.x-e.x,o=t.y-e.y,r=n.x-e.x,c=n.y-e.y,s=a*a+o*o,l=a*r+o*c,p=r*r+c*c-i*i,d=l/s,u=p/s,m=d*d-u;if(m<0&&m>-1e-6&&(m=0),m<0)return[];var h=Ct(m),b=-d+h,g=-d-h,f={x:e.x-a*b,y:e.y-o*b};if(0===m)return[f];var v={x:e.x-a*g,y:e.y-o*g};return[f,v].filter((function(n){return isPointInSegment(n,e,t)}))}function isPointInSegment(e,t,n){return fenced(e.x,t.x,n.x)&&fenced(e.y,t.y,n.y)}function fenced(e,t,n){return e>=Dt(t,n)-kt&&e<=Rt(t,n)+kt}function LineAttachmentUtil_mid(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var kt=.1;function pointsEqual(e,t){return Tt(e.x-t.x)<=kt&&Tt(e.y-t.y)<=kt}function findNewLabelLineStartIndex(e,t,n,i){var a=n.segmentIndex,o=t.length-e.length;if(i.segmentMove){var r=i.segmentMove.segmentStartIndex,c=i.segmentMove.newSegmentStartIndex;return a===r?c:a>=c?a+o<c?c:a+o:a}if(i.bendpointMove){var s,l=i.bendpointMove.insert,p=i.bendpointMove.bendpointIndex;if(0===o)return a;if(a>=p&&(s=l?a+1:a-1),a<p&&(s=a,l&&"bendpoint"!==n.type&&p-1===a)){var d=relativePositionMidWaypoint(t,p);d<n.relativeLocation&&s++}return s}return 0===o?a:i.connectionStart?0===a?0:null:i.connectionEnd&&a===e.length-2?t.length-2:null}function getLabelAdjustment(e,t,n,i){var a=0,o=0,r=getLabelMid(e),c=getAttachment(r,n),s=c.segmentIndex,l=findNewLabelLineStartIndex(n,t,c,i);if(null===l)return{x:a,y:o};if(l<0||l>t.length-2)return{x:a,y:o};var p=getLine(n,s),d=getLine(t,l),u=c.position,m=getRelativeFootPosition(p,u),h=getAngleDelta(p,d);if("bendpoint"===c.type){var b=t.length-n.length,g=c.bendpointIndex,f=n[g];if(-1!==t.indexOf(f))return{x:a,y:o};if(0===b){var v=t[g];return{x:v.x-c.position.x,y:v.y-c.position.y}}b<0&&0!==g&&g<n.length-1&&(m=relativePositionMidWaypoint(n,g))}var y={x:(d[1].x-d[0].x)*m+d[0].x,y:(d[1].y-d[0].y)*m+d[0].y},E=rotateVector({x:r.x-u.x,y:r.y-u.y},h);return a=y.x+E.x-r.x,o=y.y+E.y-r.y,Object(W["h"])({x:a,y:o})}function relativePositionMidWaypoint(e,t){var n=getDistancePointPoint(e[t-1],e[t]),i=getDistancePointPoint(e[t],e[t+1]),a=n/(n+i);return a}function getLabelMid(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function getAngleDelta(e,t){var n=getAngle(e),i=getAngle(t);return i-n}function getLine(e,t){return[e[t],e[t+1]]}function getRelativeFootPosition(e,t){var n=getDistancePointPoint(e[0],e[1]),i=getDistancePointPoint(e[0],t);return 0===n?0:i/n}var At=n("5efa"),Lt={width:90,height:20},Mt="name",Ft="text";function LabelBehavior(e,t,n,i){function getVisibleLabelAdjustment(e){var t=e.context,n=t.connection,i=n.label,a=Object(r["assign"])({},t.hints),o=t.newWaypoints||n.waypoints,c=t.oldWaypoints;return"undefined"===typeof a.startChanged&&(a.startChanged=!!a.connectionStart),"undefined"===typeof a.endChanged&&(a.endChanged=!!a.connectionEnd),getLabelAdjustment(i,o,c,a)}Ye["a"].call(this,e),this.postExecute("element.updateProperties",(function(e){var n=e.context,a=n.element,o=n.properties;if(Mt in o&&t.updateLabel(a,o[Mt]),Ft in o&&Object(S["is"])(a,"bpmn:TextAnnotation")){var r=i.getTextAnnotationBounds({x:a.x,y:a.y,width:a.width,height:a.height},o[Ft]||"");t.updateLabel(a,o.text,r)}})),this.postExecute(["shape.create","connection.create"],(function(e){var n=e.context,a=n.hints||{};if(!1!==a.createElementsBehavior){var o=n.shape||n.connection,r=o.businessObject;if(!isLabel(o)&&isLabelExternal(o)&&getLabel(o)){var c=getExternalLabelMid(o),s=i.getExternalLabelBounds(Lt,getLabel(o));t.createLabel(o,c,{id:r.id+"_label",businessObject:r,width:s.width,height:s.height})}}})),this.postExecute("shape.delete",(function(e){var n=e.context,i=n.labelTarget,a=n.hints||{};i&&!1!==a.unsetLabel&&t.updateLabel(i,null,null,{removeShape:!1})})),this.postExecute(["label.create"],(function(e){var t,i,a=e.context,o=a.shape;o.labelTarget&&Object(S["is"])(o.labelTarget||o,"bpmn:BaseElement")&&(t=o.businessObject,i=t.di,i.label||(i.label=n.create("bpmndi:BPMNLabel",{bounds:n.create("dc:Bounds")})),Object(r["assign"])(i.label.bounds,{x:o.x,y:o.y,width:o.width,height:o.height}))})),this.postExecute(["connection.layout","connection.updateWaypoints"],(function(e){var n=e.context,i=n.hints||{};if(!1!==i.labelBehavior){var a,o=n.connection,r=o.label;r&&r.parent&&(a=getVisibleLabelAdjustment(e),t.moveShape(r,a))}})),this.postExecute(["shape.replace"],(function(e){var t=e.context,n=t.newShape,i=t.oldShape,a=Object(S["getBusinessObject"])(n);a&&isLabelExternal(a)&&i.label&&n.label&&(n.label.x=i.label.x,n.label.y=i.label.y)})),this.postExecute("shape.resize",(function(e){var n=e.context,i=n.shape,a=n.newBounds,o=n.oldBounds;if(hasExternalLabel(i)){var r=i.label,c=Object(W["e"])(r),s=asEdges(o),l=getReferencePoint(c,s),p=getReferencePointDelta(l,o,a);t.moveShape(r,p)}}))}function getReferencePointDelta(e,t,n){var i=Object(At["a"])(e,t,n);return Object(W["h"])(Object(mt["b"])(i,e))}function getReferencePoint(e,t){if(t.length){var n=getNearestLine(e,t);return perpendicularFoot(e,n)}}function asEdges(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function getNearestLine(e,t){var n=t.map((function(t){return{line:t,distance:getDistancePointLine(e,t)}})),i=Object(r["sortBy"])(n,"distance");return i[0].line}a()(LabelBehavior,Ye["a"]),LabelBehavior.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];var Nt="flow elements must be children of pools/participants",It="participants cannot be pasted onto a non-empty process diagram";function ModelingFeedback(e,t,n){function showError(e,n,i){t.add({position:{x:e.x+5,y:e.y+5},type:"error",timeout:i||2e3,html:"<div>"+n+"</div>"})}e.on(["shape.move.rejected","create.rejected"],(function(e){var t=e.context,i=t.shape,a=t.target;Object(S["is"])(a,"bpmn:Collaboration")&&Object(S["is"])(i,"bpmn:FlowNode")&&showError(e,n(Nt))})),e.on(["elements.paste.rejected"],(function(e){var t=e.context,i=t.position,a=t.target;Object(S["is"])(a,"bpmn:Collaboration")&&showError(i,n(Nt)),Object(S["is"])(a,"bpmn:Process")&&showError(i,n(It),3e3)}))}function ReplaceConnectionBehavior(e,t,n,i){Ye["a"].call(this,e);var a=i.get("dragging",!1);function fixConnection(e){var i,a,o=e.source,r=e.target,c=e.parent;c&&(Object(S["is"])(e,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(o,r)||(a=!0),n.canConnectMessageFlow(o,r)&&(i="bpmn:MessageFlow")),Object(S["is"])(e,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(o,r)||(a=!0),n.canConnectSequenceFlow(o,r)&&(i="bpmn:SequenceFlow")),Object(S["is"])(e,"bpmn:Association")&&!n.canConnectAssociation(o,r)&&(a=!0),a&&t.removeConnection(e),i&&t.connect(o,r,{type:i,waypoints:e.waypoints.slice()}))}function replaceReconnectedConnection(e){var i,o,r=e.context,c=r.connection,s=r.newSource||c.source,l=r.newTarget||c.target;i=n.canConnect(s,l),i&&i.type!==c.type&&(o=t.connect(s,l,{type:i.type,waypoints:c.waypoints.slice()}),t.removeConnection(c),r.connection=o,a&&cleanDraggingSelection(c,o))}function cleanDraggingSelection(e,t){var n,i=a.context(),o=i&&i.payload.previousSelection;o&&o.length&&(n=o.indexOf(e),-1!==n&&o.splice(n,1,t))}this.postExecuted("elements.move",(function(e){var t=e.closure,n=t.allConnections;Object(r["forEach"])(n,fixConnection)}),!0),this.preExecute("connection.reconnect",replaceReconnectedConnection),this.postExecuted("element.updateProperties",(function(e){var n,i=e.context,a=i.properties,o=i.element,c=o.businessObject;a.default&&(n=Object(r["find"])(o.outgoing,Object(r["matchPattern"])({id:o.businessObject.default.id})),n&&t.updateProperties(n,{conditionExpression:void 0})),a.conditionExpression&&c.sourceRef.default===c&&t.updateProperties(o.source,{default:void 0})}))}function RemoveParticipantBehavior(e,t){Ye["a"].call(this,e),this.preExecute("shape.delete",(function(e){var t=e.shape,n=t.parent;Object(S["is"])(t,"bpmn:Participant")&&(e.collaborationRoot=n)}),!0),this.postExecute("shape.delete",(function(e){var n=e.collaborationRoot;n&&!n.businessObject.participants.length&&t.makeProcess()}),!0)}function ReplaceElementBehaviour(e,t,n,i,a,o){i.invoke(Ye["a"],this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=o,this.postExecuted(["elements.move"],500,(function(e){var n=e.context,i=n.newParent,a=n.newHost,o=[];Object(r["forEach"])(n.closure.topLevel,(function(e){o=Object(w["isEventSubProcess"])(e)?o.concat(e.children):o.concat(e)})),1===o.length&&a&&(i=a);var c=t.canReplace(o,i);c&&this.replaceElements(o,c.replacements,a)}),this),this.postExecute(["shape.replace"],1500,(function(e){var n,i=e.context,a=i.oldShape,o=i.newShape,r=a.attachers;r&&r.length&&(n=t.canReplace(r,o),this.replaceElements(r,n.replacements))}),this),this.postExecuted(["shape.replace"],1500,(function(e){var t=e.context,n=t.oldShape,i=t.newShape;a.unclaimId(n.businessObject.id,n.businessObject),a.updateProperties(i,{id:n.id})}))}ModelingFeedback.$inject=["eventBus","tooltips","translate"],a()(ReplaceConnectionBehavior,Ye["a"]),ReplaceConnectionBehavior.$inject=["eventBus","modeling","bpmnRules","injector"],RemoveParticipantBehavior.$inject=["eventBus","modeling"],a()(RemoveParticipantBehavior,Ye["a"]),a()(ReplaceElementBehaviour,Ye["a"]),ReplaceElementBehaviour.prototype.replaceElements=function(e,t){var n=this._elementRegistry,i=this._bpmnReplace,a=this._selection;Object(r["forEach"])(t,(function(t){var a={type:t.newElementType},o=n.get(t.oldElementId),r=e.indexOf(o);e[r]=i.replaceElement(o,a,{select:!1})})),t&&a.select(e)},ReplaceElementBehaviour.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var Ht=Math.abs,zt=Math.min,$t=Math.max;function addToTrbl(e,t,n,i){var a=e[t];e[t]=void 0===a?n:i(n,a)}function addMin(e,t,n){return addToTrbl(e,t,n,zt)}function addMax(e,t,n){return addToTrbl(e,t,n,$t)}var Wt=60,Vt=300,Gt=20,Ut=50,qt=20,Kt=20;function getParticipantResizeConstraints(e,t,n){var i=getLanesRoot(e),a=!0,o=!0,r=collectLanes(i,[i]),c=Object(W["b"])(e),s={},l={};/e/.test(t)?l.right=c.left+Vt:/w/.test(t)&&(l.left=c.right-Vt),r.forEach((function(e){var i=Object(W["b"])(e);/n/.test(t)&&(i.top<c.top-10&&(a=!1),n&&Ht(c.top-i.bottom)<10&&addMax(s,"top",i.top+Wt),Ht(c.top-i.top)<5&&addMin(l,"top",i.bottom-Wt)),/s/.test(t)&&(i.bottom>c.bottom+10&&(o=!1),n&&Ht(c.bottom-i.top)<10&&addMin(s,"bottom",i.bottom-Wt),Ht(c.bottom-i.bottom)<5&&addMax(l,"bottom",i.top+Wt))}));var p=i.children.filter((function(e){return!e.hidden&&!e.waypoints&&(Object(S["is"])(e,"bpmn:FlowElement")||Object(S["is"])(e,"bpmn:Artifact"))}));return p.forEach((function(e){var n=Object(W["b"])(e);a&&/n/.test(t)&&addMin(l,"top",n.top-qt),/e/.test(t)&&addMax(l,"right",n.right+Gt),o&&/s/.test(t)&&addMax(l,"bottom",n.bottom+Kt),/w/.test(t)&&addMin(l,"left",n.left-Ut)})),{min:l,max:s}}var Yt=1500,Xt={width:300,height:150},Jt={width:140,height:120},Zt={width:50,height:30};function ResizeBehavior(e){e.on("resize.start",Yt,(function(e){var t=e.context,n=t.shape,i=t.direction,a=t.balanced;(Object(S["is"])(n,"bpmn:Lane")||Object(S["is"])(n,"bpmn:Participant"))&&(t.resizeConstraints=getParticipantResizeConstraints(n,i,a)),Object(S["is"])(n,"bpmn:Participant")&&(t.minDimensions=Xt),Object(S["is"])(n,"bpmn:SubProcess")&&Object(w["isExpanded"])(n)&&(t.minDimensions=Jt),Object(S["is"])(n,"bpmn:TextAnnotation")&&(t.minDimensions=Zt)}))}ResizeBehavior.$inject=["eventBus"];var Qt=1001;function ResizeLaneBehavior(e,t){e.on("resize.start",Qt+500,(function(e){var t=e.context,n=t.shape;(Object(S["is"])(n,"bpmn:Lane")||Object(S["is"])(n,"bpmn:Participant"))&&(t.balanced=!Object(Ie["a"])(e))})),e.on("resize.end",Qt,(function(e){var n=e.context,i=n.shape,a=n.canExecute,o=n.newBounds;if(Object(S["is"])(i,"bpmn:Lane")||Object(S["is"])(i,"bpmn:Participant"))return a&&(o=Object(W["g"])(o),t.resizeLane(i,o,n.balanced)),!1}))}function RemoveElementBehavior(e,t,n){Ye["a"].call(this,e),this.preExecute("shape.delete",(function(e){var i=e.context.shape;if(1===i.incoming.length&&1===i.outgoing.length){var a=i.incoming[0],o=i.outgoing[0];if(Object(S["is"])(a,"bpmn:SequenceFlow")&&Object(S["is"])(o,"bpmn:SequenceFlow")&&t.canConnect(a.source,o.target,a)){var r=getNewWaypoints(a.waypoints,o.waypoints);n.reconnectEnd(a,o.target,r)}}}))}function getDocking(e){return e.original||e}function getNewWaypoints(e,t){var n=lineIntersect(getDocking(e[e.length-2]),getDocking(e[e.length-1]),getDocking(t[1]),getDocking(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[getDocking(e[0]),getDocking(t[t.length-1])]}function SpaceToolBehavior(e){e.on("spaceTool.getMinDimensions",(function(e){var t=e.shapes,n={};return Object(r["forEach"])(t,(function(e){var t=e.id;Object(S["is"])(e,"bpmn:Participant")&&(n[t]=Xt),Object(S["is"])(e,"bpmn:SubProcess")&&Object(w["isExpanded"])(e)&&(n[t]=Jt),Object(S["is"])(e,"bpmn:TextAnnotation")&&(n[t]=Zt)})),n}))}function SubProcessStartEventBehavior(e,t){e.invoke(Ye["a"],this),this.postExecuted("shape.replace",(function(e){var n=e.context.oldShape,i=e.context.newShape;if(Object(S["is"])(i,"bpmn:SubProcess")&&Object(S["is"])(n,"bpmn:Task")&&Object(w["isExpanded"])(i)){var a=getStartEventPosition(i);t.createShape({type:"bpmn:StartEvent"},a,i)}}))}function getStartEventPosition(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}ResizeLaneBehavior.$inject=["eventBus","modeling"],a()(RemoveElementBehavior,Ye["a"]),RemoveElementBehavior.$inject=["eventBus","bpmnRules","modeling"],SpaceToolBehavior.$inject=["eventBus"],SubProcessStartEventBehavior.$inject=["injector","modeling"],a()(SubProcessStartEventBehavior,Ye["a"]);var en=500;function ToggleElementCollapseBehaviour(e,t,n,i){function hideEmptyLabels(e){e.length&&e.forEach((function(e){"label"!==e.type||e.businessObject.name||(e.hidden=!0)}))}function expandedBounds(e,t){var n,i,a=e.children,o=t;return n=filterVisible(a).concat([e]),i=Object(Le["a"])(n),i?(o.width=Math.max(i.width,o.width),o.height=Math.max(i.height,o.height),o.x=i.x+(i.width-o.width)/2,o.y=i.y+(i.height-o.height)/2):(o.x=e.x+(e.width-o.width)/2,o.y=e.y+(e.height-o.height)/2),o}function collapsedBounds(e,t){return{x:e.x+(e.width-t.width)/2,y:e.y+(e.height-t.height)/2,width:t.width,height:t.height}}Ye["a"].call(this,e),this.executed(["shape.toggleCollapse"],en,(function(e){var t=e.context,n=t.shape;Object(S["is"])(n,"bpmn:SubProcess")&&(n.collapsed?Object(S["getBusinessObject"])(n).di.isExpanded=!1:(hideEmptyLabels(n.children),Object(S["getBusinessObject"])(n).di.isExpanded=!0))})),this.reverted(["shape.toggleCollapse"],en,(function(e){var t=e.context,n=t.shape;n.collapsed?Object(S["getBusinessObject"])(n).di.isExpanded=!1:Object(S["getBusinessObject"])(n).di.isExpanded=!0})),this.postExecuted(["shape.toggleCollapse"],en,(function(e){var i,a=e.context.shape,o=t._getDefaultSize(a);i=a.collapsed?collapsedBounds(a,o):expandedBounds(a,o),n.resizeShape(a,i,null,{autoResize:!a.collapsed&&"nwse"})}))}function filterVisible(e){return e.filter((function(e){return!e.hidden}))}function UnclaimIdBehavior(e,t,n,i){t.invoke(Ye["a"],this),this.preExecute("shape.delete",(function(e){var t=e.context,a=t.shape,o=a.businessObject;isLabel(a)||(Object(S["is"])(a,"bpmn:Participant")&&Object(w["isExpanded"])(a)&&n.ids.unclaim(o.processRef.id),i.unclaimId(o.id,o))})),this.preExecute("connection.delete",(function(e){var t=e.context,n=t.connection,a=n.businessObject;i.unclaimId(a.id,a)})),this.preExecute("canvas.updateRoot",(function(){var t=e.getRootElement(),i=t.businessObject;n.ids.unclaim(i.id)}))}a()(ToggleElementCollapseBehaviour,Ye["a"]),ToggleElementCollapseBehaviour.$inject=["eventBus","elementFactory","modeling"],a()(UnclaimIdBehavior,Ye["a"]),UnclaimIdBehavior.$inject=["canvas","injector","moddle","modeling"];var tn=500,nn=5e3;function UpdateFlowNodeRefsBehavior(e,t,n){var i;function initContext(){return i=i||new UpdateContext,i.enter(),i}function getContext(){if(!i)throw new Error(n("out of bounds release"));return i}function releaseContext(){if(!i)throw new Error(n("out of bounds release"));var e=i.leave();return e&&(t.updateLaneRefs(i.flowNodes,i.lanes),i=null),e}Ye["a"].call(this,e);var a=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(a,nn,(function(e){initContext()})),this.postExecuted(a,tn,(function(e){releaseContext()})),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],(function(e){var t=e.context,n=t.shape,i=getContext();n.labelTarget||(Object(S["is"])(n,"bpmn:Lane")&&i.addLane(n),Object(S["is"])(n,"bpmn:FlowNode")&&i.addFlowNode(n))}))}function UpdateContext(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function DeleteSequenceFlowBehavior(e,t){Ye["a"].call(this,e),this.preExecute("connection.delete",(function(e){var n=e.context,i=n.connection,a=i.source;isDefaultFlow(i,a)&&t.updateProperties(a,{default:null})}))}function isDefaultFlow(e,t){if(!Object(S["is"])(e,"bpmn:SequenceFlow"))return!1;var n=Object(S["getBusinessObject"])(t),i=Object(S["getBusinessObject"])(e);return n.get("default")===i}UpdateFlowNodeRefsBehavior.$inject=["eventBus","modeling","translate"],a()(UpdateFlowNodeRefsBehavior,Ye["a"]),a()(DeleteSequenceFlowBehavior,Ye["a"]),DeleteSequenceFlowBehavior.$inject=["eventBus","modeling"];var an={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","rootElementReferenceBehavior","createBehavior","fixHoverBehavior","createDataObjectBehavior","createParticipantBehavior","dataStoreBehavior","dataInputAssociationBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","modelingFeedback","removeElementBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","toggleElementCollapseBehaviour","spaceToolBehavior","subProcessStartEventBehavior","unclaimIdBehavior","unsetDefaultFlowBehavior","updateFlowNodeRefsBehavior"],adaptiveLabelPositioningBehavior:["type",AdaptiveLabelPositioningBehavior],appendBehavior:["type",AppendBehavior],associationBehavior:["type",AssociationBehavior],attachEventBehavior:["type",AttachEventBehavior],boundaryEventBehavior:["type",BoundaryEventBehavior],rootElementReferenceBehavior:["type",RootElementReferenceBehavior],createBehavior:["type",CreateBehavior],fixHoverBehavior:["type",FixHoverBehavior],createDataObjectBehavior:["type",CreateDataObjectBehavior],createParticipantBehavior:["type",CreateParticipantBehavior_CreateParticipantBehavior],dataInputAssociationBehavior:["type",DataInputAssociationBehavior],dataStoreBehavior:["type",DataStoreBehavior],deleteLaneBehavior:["type",DeleteLaneBehavior],detachEventBehavior:["type",DetachEventBehavior],dropOnFlowBehavior:["type",DropOnFlowBehavior],eventBasedGatewayBehavior:["type",EventBasedGatewayBehavior],groupBehavior:["type",GroupBehavior],importDockingFix:["type",ImportDockingFix],isHorizontalFix:["type",IsHorizontalFix],labelBehavior:["type",LabelBehavior],modelingFeedback:["type",ModelingFeedback],replaceConnectionBehavior:["type",ReplaceConnectionBehavior],removeParticipantBehavior:["type",RemoveParticipantBehavior],replaceElementBehaviour:["type",ReplaceElementBehaviour],resizeBehavior:["type",ResizeBehavior],resizeLaneBehavior:["type",ResizeLaneBehavior],removeElementBehavior:["type",RemoveElementBehavior],toggleElementCollapseBehaviour:["type",ToggleElementCollapseBehaviour],spaceToolBehavior:["type",SpaceToolBehavior],subProcessStartEventBehavior:["type",SubProcessStartEventBehavior],unclaimIdBehavior:["type",UnclaimIdBehavior],updateFlowNodeRefsBehavior:["type",UpdateFlowNodeRefsBehavior],unsetDefaultFlowBehavior:["type",DeleteSequenceFlowBehavior]},on=n("c5b3"),rn=n("4ae2");function getBoundaryAttachment(e,t){var n=Object(W["f"])(e,t,-15);return"intersect"!==n?n:null}function BpmnRules(e){rn["a"].call(this,e)}function canStartConnection(e){return nonExistingOrLabel(e)?null:Object(Q["isAny"])(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])}function nonExistingOrLabel(e){return!e||isLabel(e)}function isSame(e,t){return e===t}function getOrganizationalParent(e){do{if(Object(S["is"])(e,"bpmn:Process"))return Object(S["getBusinessObject"])(e);if(Object(S["is"])(e,"bpmn:Participant"))return Object(S["getBusinessObject"])(e).processRef||Object(S["getBusinessObject"])(e)}while(e=e.parent)}function isTextAnnotation(e){return Object(S["is"])(e,"bpmn:TextAnnotation")}function isGroup(e){return Object(S["is"])(e,"bpmn:Group")&&!e.labelTarget}function isCompensationBoundary(e){return Object(S["is"])(e,"bpmn:BoundaryEvent")&&BpmnRules_hasEventDefinition(e,"bpmn:CompensateEventDefinition")}function isForCompensation(e){return Object(S["getBusinessObject"])(e).isForCompensation}function isSameOrganization(e,t){var n=getOrganizationalParent(e),i=getOrganizationalParent(t);return n===i}function isMessageFlowSource(e){return Object(S["is"])(e,"bpmn:InteractionNode")&&(!Object(S["is"])(e,"bpmn:Event")||Object(S["is"])(e,"bpmn:ThrowEvent")&&hasEventDefinitionOrNone(e,"bpmn:MessageEventDefinition"))}function isMessageFlowTarget(e){return Object(S["is"])(e,"bpmn:InteractionNode")&&!isForCompensation(e)&&(!Object(S["is"])(e,"bpmn:Event")||Object(S["is"])(e,"bpmn:CatchEvent")&&hasEventDefinitionOrNone(e,"bpmn:MessageEventDefinition"))}function getScopeParent(e){var t=e;while(t=t.parent){if(Object(S["is"])(t,"bpmn:FlowElementsContainer"))return Object(S["getBusinessObject"])(t);if(Object(S["is"])(t,"bpmn:Participant"))return Object(S["getBusinessObject"])(t).processRef}return null}function isSameScope(e,t){var n=getScopeParent(e),i=getScopeParent(t);return n===i}function BpmnRules_hasEventDefinition(e,t){var n=Object(S["getBusinessObject"])(e);return!!Object(r["find"])(n.eventDefinitions||[],(function(e){return Object(S["is"])(e,t)}))}function hasEventDefinitionOrNone(e,t){var n=Object(S["getBusinessObject"])(e);return(n.eventDefinitions||[]).every((function(e){return Object(S["is"])(e,t)}))}function isSequenceFlowSource(e){return Object(S["is"])(e,"bpmn:FlowNode")&&!Object(S["is"])(e,"bpmn:EndEvent")&&!Object(w["isEventSubProcess"])(e)&&!(Object(S["is"])(e,"bpmn:IntermediateThrowEvent")&&BpmnRules_hasEventDefinition(e,"bpmn:LinkEventDefinition"))&&!isCompensationBoundary(e)&&!isForCompensation(e)}function isSequenceFlowTarget(e){return Object(S["is"])(e,"bpmn:FlowNode")&&!Object(S["is"])(e,"bpmn:StartEvent")&&!Object(S["is"])(e,"bpmn:BoundaryEvent")&&!Object(w["isEventSubProcess"])(e)&&!(Object(S["is"])(e,"bpmn:IntermediateCatchEvent")&&BpmnRules_hasEventDefinition(e,"bpmn:LinkEventDefinition"))&&!isForCompensation(e)}function isEventBasedTarget(e){return Object(S["is"])(e,"bpmn:ReceiveTask")||Object(S["is"])(e,"bpmn:IntermediateCatchEvent")&&(BpmnRules_hasEventDefinition(e,"bpmn:MessageEventDefinition")||BpmnRules_hasEventDefinition(e,"bpmn:TimerEventDefinition")||BpmnRules_hasEventDefinition(e,"bpmn:ConditionalEventDefinition")||BpmnRules_hasEventDefinition(e,"bpmn:SignalEventDefinition"))}function BpmnRules_isConnection(e){return e.waypoints}function getParents(e){var t=[];while(e)e=e.parent,e&&t.push(e);return t}function isParent(e,t){var n=getParents(t);return-1!==n.indexOf(e)}function canConnect(e,t,n){if(nonExistingOrLabel(e)||nonExistingOrLabel(t))return null;if(!Object(S["is"])(n,"bpmn:DataAssociation")){if(canConnectMessageFlow(e,t))return{type:"bpmn:MessageFlow"};if(canConnectSequenceFlow(e,t))return{type:"bpmn:SequenceFlow"}}var i=canConnectDataAssociation(e,t);return i||(isCompensationBoundary(e)&&isForCompensation(t)?{type:"bpmn:Association",associationDirection:"One"}:!!canConnectAssociation(e,t)&&{type:"bpmn:Association"})}function canDrop(e,t,n){return!(!isLabel(e)&&!isGroup(e))||!(Object(S["is"])(t,"bpmn:Participant")&&!Object(w["isExpanded"])(t))&&(Object(S["is"])(e,"bpmn:Participant")?Object(S["is"])(t,"bpmn:Process")||Object(S["is"])(t,"bpmn:Collaboration"):Object(Q["isAny"])(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:Object(S["is"])(e,"bpmn:Lane")?Object(S["is"])(t,"bpmn:Participant")||Object(S["is"])(t,"bpmn:Lane"):!(Object(S["is"])(e,"bpmn:BoundaryEvent")&&!isDroppableBoundaryEvent(e))&&(Object(S["is"])(e,"bpmn:FlowElement")&&!Object(S["is"])(e,"bpmn:DataStoreReference")?Object(S["is"])(t,"bpmn:FlowElementsContainer")?Object(w["isExpanded"])(t):Object(Q["isAny"])(t,["bpmn:Participant","bpmn:Lane"]):Object(Q["isAny"])(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?Object(Q["isAny"])(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):!!Object(S["is"])(e,"bpmn:MessageFlow")&&(Object(S["is"])(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t)))}function isDroppableBoundaryEvent(e){return Object(S["getBusinessObject"])(e).cancelActivity&&(hasNoEventDefinition(e)||hasCommonBoundaryIntermediateEventDefinition(e))}function isBoundaryEvent(e){return!isLabel(e)&&Object(S["is"])(e,"bpmn:BoundaryEvent")}function isLane(e){return Object(S["is"])(e,"bpmn:Lane")}function isBoundaryCandidate(e){return!!isBoundaryEvent(e)||(!(!Object(S["is"])(e,"bpmn:IntermediateThrowEvent")||!hasNoEventDefinition(e))||Object(S["is"])(e,"bpmn:IntermediateCatchEvent")&&hasCommonBoundaryIntermediateEventDefinition(e))}function hasNoEventDefinition(e){var t=Object(S["getBusinessObject"])(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function hasCommonBoundaryIntermediateEventDefinition(e){return hasOneOfEventDefinitions(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function hasOneOfEventDefinitions(e,t){return t.some((function(t){return BpmnRules_hasEventDefinition(e,t)}))}function isReceiveTaskAfterEventBasedGateway(e){return Object(S["is"])(e,"bpmn:ReceiveTask")&&Object(r["find"])(e.incoming,(function(e){return Object(S["is"])(e.source,"bpmn:EventBasedGateway")}))}function BpmnRules_canAttach(e,t,n,i){if(Array.isArray(e)||(e=[e]),1!==e.length)return!1;var a=e[0];return!isLabel(a)&&(!!isBoundaryCandidate(a)&&(!Object(w["isEventSubProcess"])(t)&&(!(!Object(S["is"])(t,"bpmn:Activity")||isForCompensation(t))&&(!(i&&!getBoundaryAttachment(i,t))&&(!isReceiveTaskAfterEventBasedGateway(t)&&"attach")))))}function BpmnRules_canReplace(e,t,n){if(!t)return!1;var i={replacements:[]};return Object(r["forEach"])(e,(function(e){Object(w["isEventSubProcess"])(t)||Object(S["is"])(e,"bpmn:StartEvent")&&"label"!==e.type&&canDrop(e,t)&&(Object(w["isInterrupting"])(e)||i.replacements.push({oldElementId:e.id,newElementType:"bpmn:StartEvent"}),(Object(w["hasErrorEventDefinition"])(e)||Object(w["hasEscalationEventDefinition"])(e)||Object(w["hasCompensateEventDefinition"])(e))&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:StartEvent"})),Object(S["is"])(t,"bpmn:Transaction")||BpmnRules_hasEventDefinition(e,"bpmn:CancelEventDefinition")&&"label"!==e.type&&(Object(S["is"])(e,"bpmn:EndEvent")&&canDrop(e,t)&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:EndEvent"}),Object(S["is"])(e,"bpmn:BoundaryEvent")&&BpmnRules_canAttach(e,t,null,n)&&i.replacements.push({oldElementId:e.id,newElementType:"bpmn:BoundaryEvent"}))})),!!i.replacements.length&&i}function canMove(e,t){return!Object(r["some"])(e,isLane)&&(!t||e.every((function(e){return canDrop(e,t)})))}function canCreate(e,t,n,i){return!!t&&(!(!isLabel(e)&&!isGroup(e))||!isSame(n,t)&&((!n||!isParent(n,t))&&(canDrop(e,t,i)||BpmnRules_canInsert(e,t,i))))}function BpmnRules_canResize(e,t){return Object(S["is"])(e,"bpmn:SubProcess")?Object(w["isExpanded"])(e)&&(!t||t.width>=100&&t.height>=80):Object(S["is"])(e,"bpmn:Lane")?!t||t.width>=130&&t.height>=60:Object(S["is"])(e,"bpmn:Participant")?!t||t.width>=250&&t.height>=50:!!isTextAnnotation(e)||!!isGroup(e)}function isOneTextAnnotation(e,t){var n=isTextAnnotation(e),i=isTextAnnotation(t);return(n||i)&&n!==i}function canConnectAssociation(e,t){return!BpmnRules_isConnection(e)&&!BpmnRules_isConnection(t)&&(!(!isCompensationBoundary(e)||!isForCompensation(t))||!isParent(t,e)&&!isParent(e,t)&&(!!isOneTextAnnotation(e,t)||!!canConnectDataAssociation(e,t)))}function canConnectMessageFlow(e,t){return!(BpmnRules_getRootElement(e)&&!BpmnRules_getRootElement(t))&&(isMessageFlowSource(e)&&isMessageFlowTarget(t)&&!isSameOrganization(e,t))}function canConnectSequenceFlow(e,t){return!(isEventBasedTarget(t)&&t.incoming.length>0&&areOutgoingEventBasedGatewayConnections(t.incoming)&&!Object(S["is"])(e,"bpmn:EventBasedGateway"))&&(isSequenceFlowSource(e)&&isSequenceFlowTarget(t)&&isSameScope(e,t)&&!(Object(S["is"])(e,"bpmn:EventBasedGateway")&&!isEventBasedTarget(t)))}function canConnectDataAssociation(e,t){return Object(Q["isAny"])(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Object(Q["isAny"])(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:!(!Object(Q["isAny"])(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])||!Object(Q["isAny"])(e,["bpmn:Activity","bpmn:CatchEvent"]))&&{type:"bpmn:DataOutputAssociation"}}function BpmnRules_canInsert(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(1!==e.length)return!1;e=e[0]}return t.source!==e&&t.target!==e&&(Object(Q["isAny"])(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!isLabel(t)&&Object(S["is"])(e,"bpmn:FlowNode")&&!Object(S["is"])(e,"bpmn:BoundaryEvent")&&canDrop(e,t.parent,n))}function BpmnRules_includes(e,t){return e&&t&&-1!==e.indexOf(t)}function canCopy(e,t){return!!isLabel(t)||!(Object(S["is"])(t,"bpmn:Lane")&&!BpmnRules_includes(e,t.parent))}function isOutgoingEventBasedGatewayConnection(e){if(e&&e.source)return Object(S["is"])(e.source,"bpmn:EventBasedGateway")}function areOutgoingEventBasedGatewayConnections(e){return e=e||[],e.some(isOutgoingEventBasedGatewayConnection)}function BpmnRules_getRootElement(e){return Object(Q["getParent"])(e,"bpmn:Process")||Object(Q["getParent"])(e,"bpmn:Collaboration")}a()(BpmnRules,rn["a"]),BpmnRules.$inject=["eventBus"],BpmnRules.prototype.init=function(){this.addRule("connection.start",(function(e){var t=e.source;return canStartConnection(t)})),this.addRule("connection.create",(function(e){var t=e.source,n=e.target,i=e.hints||{},a=i.targetParent,o=i.targetAttach;if(o)return!1;a&&(n.parent=a);try{return canConnect(t,n)}finally{a&&(n.parent=null)}})),this.addRule("connection.reconnect",(function(e){var t=e.connection,n=e.source,i=e.target;return canConnect(n,i,t)})),this.addRule("connection.updateWaypoints",(function(e){return{type:e.connection.type}})),this.addRule("shape.resize",(function(e){var t=e.shape,n=e.newBounds;return BpmnRules_canResize(t,n)})),this.addRule("elements.create",(function(e){var t=e.elements,n=e.position,i=e.target;return Object(r["every"])(t,(function(e){return BpmnRules_isConnection(e)?canConnect(e.source,e.target,e):e.host?BpmnRules_canAttach(e,e.host,null,n):canCreate(e,i,null,n)}))})),this.addRule("elements.move",(function(e){var t=e.target,n=e.shapes,i=e.position;return BpmnRules_canAttach(n,t,null,i)||BpmnRules_canReplace(n,t,i)||canMove(n,t,i)||BpmnRules_canInsert(n,t,i)})),this.addRule("shape.create",(function(e){return canCreate(e.shape,e.target,e.source,e.position)})),this.addRule("shape.attach",(function(e){return BpmnRules_canAttach(e.shape,e.target,null,e.position)})),this.addRule("element.copy",(function(e){var t=e.element,n=e.elements;return canCopy(n,t)}))},BpmnRules.prototype.canConnectMessageFlow=canConnectMessageFlow,BpmnRules.prototype.canConnectSequenceFlow=canConnectSequenceFlow,BpmnRules.prototype.canConnectDataAssociation=canConnectDataAssociation,BpmnRules.prototype.canConnectAssociation=canConnectAssociation,BpmnRules.prototype.canMove=canMove,BpmnRules.prototype.canAttach=BpmnRules_canAttach,BpmnRules.prototype.canReplace=BpmnRules_canReplace,BpmnRules.prototype.canDrop=canDrop,BpmnRules.prototype.canInsert=BpmnRules_canInsert,BpmnRules.prototype.canCreate=canCreate,BpmnRules.prototype.canConnect=canConnect,BpmnRules.prototype.canResize=BpmnRules_canResize,BpmnRules.prototype.canCopy=canCopy;var cn={__depends__:[on["a"]],__init__:["bpmnRules"],bpmnRules:["type",BpmnRules]},sn=2e3;function BpmnDiOrdering(e,t){function orderDi(){var e,n,i=t.getRootElement(),a=Object(S["getBusinessObject"])(i).di;e=Object(Ge["h"])([i],!1),e=Object(r["filter"])(e,(function(e){return e!==i&&!e.labelTarget})),n=Object(r["map"])(e,getDi),a.set("planeElement",n)}e.on("saveXML.start",sn,orderDi)}BpmnDiOrdering.$inject=["eventBus","canvas"];var ln={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",BpmnDiOrdering]},pn=n("5684");function BpmnOrderingProvider(e,t,n){pn["a"].call(this,e);var i=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:3,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function computeOrder(e){if(e.labelTarget)return{level:10};var t=Object(r["find"])(i,(function(t){return Object(Q["isAny"])(e,[t.type])}));return t&&t.order||{level:1}}function getOrder(e){var t=e.order;return t||(e.order=t=computeOrder(e)),t}function findActualParent(e,t,i){var a=t;while(a){if(Object(Q["isAny"])(a,i))break;a=a.parent}if(!a)throw new Error(n("no parent for {element} in {parent}",{element:e.id,parent:t.id}));return a}this.getOrdering=function(e,n){if(e.labelTarget)return{parent:t.getRootElement(),index:-1};var i=getOrder(e);i.containers&&(n=findActualParent(e,n,i.containers));var a=n.children.indexOf(e),o=Object(r["findIndex"])(n.children,(function(t){return!(!e.labelTarget&&t.labelTarget)&&i.level<getOrder(t).level}));return-1!==o&&-1!==a&&a<o&&(o-=1),{index:o,parent:n}}}BpmnOrderingProvider.$inject=["eventBus","canvas","translate"],a()(BpmnOrderingProvider,pn["a"]);var dn={__depends__:[H["default"]],__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",BpmnOrderingProvider]},un=n("5dee"),mn=n("f217"),hn=n("b87a"),bn=n("a39d"),gn=n("194a");function BpmnFactory(e){this._model=e}BpmnFactory.$inject=["moddle"],BpmnFactory.prototype._needsId=function(e){return Object(Q["isAny"])(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])},BpmnFactory.prototype._ensureId=function(e){var t;t=Object(S["is"])(e,"bpmn:Activity")?"Activity":Object(S["is"])(e,"bpmn:Event")?"Event":Object(S["is"])(e,"bpmn:Gateway")?"Gateway":Object(Q["isAny"])(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?"Flow":(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},BpmnFactory.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},BpmnFactory.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})},BpmnFactory.prototype.createDiShape=function(e,t,n){return this.create("bpmndi:BPMNShape",Object(r["assign"])({bpmnElement:e,bounds:this.createDiBounds(t)},n))},BpmnFactory.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)},BpmnFactory.prototype.createDiWaypoints=function(e){var t=this;return Object(r["map"])(e,(function(e){return t.createDiWaypoint(e)}))},BpmnFactory.prototype.createDiWaypoint=function(e){return this.create("dc:Point",Object(r["pick"])(e,["x","y"]))},BpmnFactory.prototype.createDiEdge=function(e,t,n){return this.create("bpmndi:BPMNEdge",Object(r["assign"])({bpmnElement:e},n))},BpmnFactory.prototype.createDiPlane=function(e){return this.create("bpmndi:BPMNPlane",{bpmnElement:e})};var fn=n("dd5f");function BpmnUpdater(e,t,n,i){Ye["a"].call(this,e),this._bpmnFactory=t,this._translate=i;var a=this;function cropConnection(e){var t,i=e.context,a=i.hints||{};i.cropped||!1===a.createElementsBehavior||(t=i.connection,t.waypoints=n.getCroppedWaypoints(t),i.cropped=!0)}function updateParent(e){var t=e.context;a.updateParent(t.shape||t.connection,t.oldParent)}function reverseUpdateParent(e){var t=e.context,n=t.shape||t.connection,i=t.parent||t.newParent;a.updateParent(n,i)}function updateRoot(e){var t=e.context,n=t.oldRoot,i=n.children;Object(r["forEach"])(i,(function(e){Object(S["is"])(e,"bpmn:BaseElement")&&a.updateParent(e)}))}function updateBounds(e){var t=e.context.shape;Object(S["is"])(t,"bpmn:BaseElement")&&a.updateBounds(t)}function updateConnection(e){a.updateConnection(e.context)}function updateConnectionWaypoints(e){a.updateConnectionWaypoints(e.context.connection)}function updateAttachment(e){a.updateAttachment(e.context)}this.executed(["connection.layout","connection.create"],cropConnection),this.reverted(["connection.layout"],(function(e){delete e.context.cropped})),this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],ifBpmn(updateParent)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],ifBpmn(reverseUpdateParent)),this.executed(["canvas.updateRoot"],updateRoot),this.reverted(["canvas.updateRoot"],updateRoot),this.executed(["shape.move","shape.create","shape.resize"],ifBpmn((function(e){"label"!==e.context.shape.type&&updateBounds(e)}))),this.reverted(["shape.move","shape.create","shape.resize"],ifBpmn((function(e){"label"!==e.context.shape.type&&updateBounds(e)}))),e.on("shape.changed",(function(e){"label"===e.element.type&&updateBounds({context:{shape:e.element}})})),this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],ifBpmn(updateConnection)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],ifBpmn(updateConnection)),this.executed(["connection.layout","connection.move","connection.updateWaypoints"],ifBpmn(updateConnectionWaypoints)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],ifBpmn(updateConnectionWaypoints)),this.executed("connection.reconnect",ifBpmn((function(e){var t=e.context,n=t.connection,i=t.oldSource,a=t.newSource,o=Object(S["getBusinessObject"])(n),r=Object(S["getBusinessObject"])(i),c=Object(S["getBusinessObject"])(a);o.conditionExpression&&!Object(Q["isAny"])(c,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(t.oldConditionExpression=o.conditionExpression,delete o.conditionExpression),i!==a&&r.default===o&&(t.oldDefault=r.default,delete r.default)}))),this.reverted("connection.reconnect",ifBpmn((function(e){var t=e.context,n=t.connection,i=t.oldSource,a=t.newSource,o=Object(S["getBusinessObject"])(n),r=Object(S["getBusinessObject"])(i),c=Object(S["getBusinessObject"])(a);t.oldConditionExpression&&(o.conditionExpression=t.oldConditionExpression),t.oldDefault&&(r.default=t.oldDefault,delete c.default)}))),this.executed(["element.updateAttachment"],ifBpmn(updateAttachment)),this.reverted(["element.updateAttachment"],ifBpmn(updateAttachment))}function BpmnUpdater_getDefinitions(e){while(e&&!Object(S["is"])(e,"bpmn:Definitions"))e=e.$parent;return e}function ifBpmn(e){return function(t){var n=t.context,i=n.shape||n.connection;Object(S["is"])(i,"bpmn:BaseElement")&&e(t)}}a()(BpmnUpdater,Ye["a"]),BpmnUpdater.$inject=["eventBus","bpmnFactory","connectionDocking","translate"],BpmnUpdater.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject},BpmnUpdater.prototype.updateParent=function(e,t){if(!(e instanceof fn["b"])&&!(Object(S["is"])(e,"bpmn:DataStoreReference")&&e.parent&&Object(S["is"])(e.parent,"bpmn:Collaboration"))){var n=e.parent,i=e.businessObject,a=n&&n.businessObject,o=a&&a.di;Object(S["is"])(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,a,t&&t.businessObject),Object(S["is"])(e,"bpmn:DataOutputAssociation")&&(a=e.source?e.source.businessObject:null),Object(S["is"])(e,"bpmn:DataInputAssociation")&&(a=e.target?e.target.businessObject:null),this.updateSemanticParent(i,a),Object(S["is"])(e,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,a),this.updateDiParent(i.di,o)}},BpmnUpdater.prototype.updateBounds=function(e){var t=e.businessObject.di,n=e instanceof fn["b"]?this._getLabel(t):t,i=n.bounds;i||(i=this._bpmnFactory.createDiBounds(),n.set("bounds",i)),Object(r["assign"])(i,{x:e.x,y:e.y,width:e.width,height:e.height})},BpmnUpdater.prototype.updateFlowNodeRefs=function(e,t,n){var i,a;n!==t&&(Object(S["is"])(n,"bpmn:Lane")&&(i=n.get("flowNodeRef"),Object(lt["remove"])(i,e)),Object(S["is"])(t,"bpmn:Lane")&&(a=t.get("flowNodeRef"),Object(lt["add"])(a,e)))},BpmnUpdater.prototype.updateDiConnection=function(e,t,n){e.sourceElement&&e.sourceElement.bpmnElement!==t&&(e.sourceElement=t&&t.di),e.targetElement&&e.targetElement.bpmnElement!==n&&(e.targetElement=n&&n.di)},BpmnUpdater.prototype.updateDiParent=function(e,t){if(t&&!Object(S["is"])(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(Object(lt["remove"])(n,e),e.$parent=null)}},BpmnUpdater.prototype.getLaneSet=function(e){var t,n;return Object(S["is"])(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(Object(S["is"])(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)},BpmnUpdater.prototype.updateSemanticParent=function(e,t,n){var i,a=this._translate;if(e.$parent!==t&&(!Object(S["is"])(e,"bpmn:DataInput")&&!Object(S["is"])(e,"bpmn:DataOutput")||(Object(S["is"])(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),!("ioSpecification"in t)||t.ioSpecification!==e.$parent))){if(Object(S["is"])(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),i="lanes";else if(Object(S["is"])(e,"bpmn:FlowElement")){if(t)if(Object(S["is"])(t,"bpmn:Participant"))t=t.processRef;else if(Object(S["is"])(t,"bpmn:Lane"))do{t=t.$parent.$parent}while(Object(S["is"])(t,"bpmn:Lane"));i="flowElements"}else if(Object(S["is"])(e,"bpmn:Artifact")){while(t&&!Object(S["is"])(t,"bpmn:Process")&&!Object(S["is"])(t,"bpmn:SubProcess")&&!Object(S["is"])(t,"bpmn:Collaboration")){if(Object(S["is"])(t,"bpmn:Participant")){t=t.processRef;break}t=t.$parent}i="artifacts"}else if(Object(S["is"])(e,"bpmn:MessageFlow"))i="messageFlows";else if(Object(S["is"])(e,"bpmn:Participant")){i="participants";var o,r=e.processRef;r&&(o=BpmnUpdater_getDefinitions(e.$parent||t),e.$parent&&(Object(lt["remove"])(o.get("rootElements"),r),r.$parent=null),t&&(Object(lt["add"])(o.get("rootElements"),r),r.$parent=o))}else Object(S["is"])(e,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":Object(S["is"])(e,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(a("no parent for {element} in {parent}",{element:e.id,parent:t.id}));var c;if(e.$parent&&(c=e.$parent.get(i),Object(lt["remove"])(c,e)),t?(c=t.get(i),c.push(e),e.$parent=t):e.$parent=null,n){var s=n.get(i);Object(lt["remove"])(c,e),t&&(s||(s=[],t.set(i,s)),s.push(e))}}},BpmnUpdater.prototype.updateConnectionWaypoints=function(e){e.businessObject.di.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))},BpmnUpdater.prototype.updateConnection=function(e){var t,n=e.connection,i=Object(S["getBusinessObject"])(n),a=Object(S["getBusinessObject"])(n.source),o=Object(S["getBusinessObject"])(n.target);if(Object(S["is"])(i,"bpmn:DataAssociation"))Object(S["is"])(i,"bpmn:DataInputAssociation")?(i.get("sourceRef")[0]=a,t=e.parent||e.newParent||o,this.updateSemanticParent(i,o,t)):Object(S["is"])(i,"bpmn:DataOutputAssociation")&&(t=e.parent||e.newParent||a,this.updateSemanticParent(i,a,t),i.targetRef=o);else{var r=Object(S["is"])(i,"bpmn:SequenceFlow");i.sourceRef!==a&&(r&&(Object(lt["remove"])(i.sourceRef&&i.sourceRef.get("outgoing"),i),a&&a.get("outgoing")&&a.get("outgoing").push(i)),i.sourceRef=a),i.targetRef!==o&&(r&&(Object(lt["remove"])(i.targetRef&&i.targetRef.get("incoming"),i),o&&o.get("incoming")&&o.get("incoming").push(i)),i.targetRef=o)}this.updateConnectionWaypoints(n),this.updateDiConnection(i.di,a,o)},BpmnUpdater.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};var vn=n("4888");function ElementFactory_ElementFactory(e,t,n){vn["a"].call(this),this._bpmnFactory=e,this._moddle=t,this._translate=n}function applyAttributes(e,t,n){Object(r["forEach"])(n,(function(n){void 0!==t[n]&&applyAttribute(e,t,n)}))}function applyAttribute(e,t,n){e[n]=t[n],delete t[n]}a()(ElementFactory_ElementFactory,vn["a"]),ElementFactory_ElementFactory.$inject=["bpmnFactory","moddle","translate"],ElementFactory_ElementFactory.prototype.baseCreate=vn["a"].prototype.create,ElementFactory_ElementFactory.prototype.create=function(e,t){return"label"===e?this.baseCreate(e,Object(r["assign"])({type:"label"},z,t)):this.createBpmnElement(e,t)},ElementFactory_ElementFactory.prototype.createBpmnElement=function(e,t){var n,i=this._translate;t=t||{};var a,o,c=t.businessObject;if(!c){if(!t.type)throw new Error(i("no shape type specified"));c=this._bpmnFactory.create(t.type)}return c.di||(c.di="root"===e?this._bpmnFactory.createDiPlane(c,[],{id:c.id+"_di"}):"connection"===e?this._bpmnFactory.createDiEdge(c,[],{id:c.id+"_di"}):this._bpmnFactory.createDiShape(c,{},{id:c.id+"_di"})),Object(S["is"])(c,"bpmn:Group")&&(t=Object(r["assign"])({isFrame:!0},t)),t.di&&(Object(r["assign"])(c.di,t.di),delete t.di),applyAttributes(c,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&applyAttribute(c.di,t,"isExpanded"),Object(S["is"])(c,"bpmn:ExclusiveGateway")&&(c.di.isMarkerVisible=!0),t.eventDefinitionType&&(a=c.get("eventDefinitions")||[],o=this._bpmnFactory.create(t.eventDefinitionType),"bpmn:ConditionalEventDefinition"===t.eventDefinitionType&&(o.condition=this._bpmnFactory.create("bpmn:FormalExpression")),a.push(o),o.$parent=c,c.eventDefinitions=a,delete t.eventDefinitionType),n=this._getDefaultSize(c),t=Object(r["assign"])({businessObject:c,id:c.id},n,t),this.baseCreate(e,t)},ElementFactory_ElementFactory.prototype._getDefaultSize=function(e){return Object(S["is"])(e,"bpmn:SubProcess")?Object(w["isExpanded"])(e)?{width:350,height:200}:{width:100,height:80}:Object(S["is"])(e,"bpmn:Task")?{width:100,height:80}:Object(S["is"])(e,"bpmn:Gateway")?{width:50,height:50}:Object(S["is"])(e,"bpmn:Event")?{width:36,height:36}:Object(S["is"])(e,"bpmn:Participant")?Object(w["isExpanded"])(e)?{width:600,height:250}:{width:400,height:60}:Object(S["is"])(e,"bpmn:Lane")?{width:400,height:100}:Object(S["is"])(e,"bpmn:DataObjectReference")?{width:36,height:50}:Object(S["is"])(e,"bpmn:DataStoreReference")?{width:50,height:50}:Object(S["is"])(e,"bpmn:TextAnnotation")?{width:100,height:30}:Object(S["is"])(e,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}},ElementFactory_ElementFactory.prototype.createParticipantShape=function(e){return Object(r["isObject"])(e)||(e={isExpanded:e}),e=Object(r["assign"])({type:"bpmn:Participant"},e||{}),!1!==e.isExpanded&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};var yn=n("63c4"),En="default",On="id",jn="di",xn={width:0,height:0};function UpdatePropertiesHandler(e,t,n,i,a){this._elementRegistry=e,this._moddle=t,this._translate=n,this._modeling=i,this._textRenderer=a}function isIdChange(e,t){return On in e&&e[On]!==t[On]}function getProperties(e,t){var n=Object(r["keys"])(t);return Object(r["reduce"])(n,(function(n,i){return n[i]=i!==jn?e.get(i):getDiProperties(e.di,Object(r["keys"])(t.di)),n}),{})}function getDiProperties(e,t){return Object(r["reduce"])(t,(function(t,n){return t[n]=e.get(n),t}),{})}function setProperties(e,t){Object(r["forEach"])(t,(function(t,n){n!==jn?e.set(n,t):e.di&&setDiProperties(e.di,t)}))}function setDiProperties(e,t){Object(r["forEach"])(t,(function(t,n){e.set(n,t)}))}UpdatePropertiesHandler.$inject=["elementRegistry","moddle","translate","modeling","textRenderer"],UpdatePropertiesHandler.prototype.execute=function(e){var t=e.element,n=[t],i=this._translate;if(!t)throw new Error(i("element required"));var a=this._elementRegistry,o=this._moddle.ids,r=t.businessObject,c=unwrapBusinessObjects(e.properties),s=e.oldProperties||getProperties(r,c);return isIdChange(c,r)&&(o.unclaim(r[On]),a.updateId(t,c[On]),o.claim(c[On],r)),En in c&&(c[En]&&n.push(a.get(c[En].id)),r[En]&&n.push(a.get(r[En].id))),setProperties(r,c),e.oldProperties=s,e.changed=n,n},UpdatePropertiesHandler.prototype.postExecute=function(e){var t=e.element,n=t.label,i=n&&Object(S["getBusinessObject"])(n).name;if(i){var a=this._textRenderer.getExternalLabelBounds(n,i);this._modeling.resizeShape(n,a,xn)}},UpdatePropertiesHandler.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,a=t.businessObject,o=this._elementRegistry,r=this._moddle.ids;return setProperties(a,i),isIdChange(n,a)&&(r.unclaim(n[On]),o.updateId(t,i[On]),r.claim(i[On],a)),e.changed};var wn=["default"];function unwrapBusinessObjects(e){var t=Object(r["assign"])({},e);return wn.forEach((function(n){n in e&&(t[n]=Object(S["getBusinessObject"])(t[n]))})),t}function UpdateCanvasRootHandler(e,t){this._canvas=e,this._modeling=t}function AddLaneHandler(e,t){this._modeling=e,this._spaceTool=t}function SplitLaneHandler(e,t){this._modeling=e,this._translate=t}function ResizeLaneHandler(e,t){this._modeling=e,this._spaceTool=t}UpdateCanvasRootHandler.$inject=["canvas","modeling"],UpdateCanvasRootHandler.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,a=t.getRootElement(),o=a.businessObject,r=o.$parent,c=o.di;t.setRootElement(n,!0),Object(lt["add"])(r.rootElements,i),i.$parent=r,Object(lt["remove"])(r.rootElements,o),o.$parent=null,o.di=null,c.bpmnElement=i,i.di=c,e.oldRoot=a},UpdateCanvasRootHandler.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,a=e.oldRoot,o=a.businessObject,r=i.$parent,c=i.di;t.setRootElement(a,!0),Object(lt["remove"])(r.rootElements,i),i.$parent=null,Object(lt["add"])(r.rootElements,o),o.$parent=r,i.di=null,c.bpmnElement=o,o.di=c},AddLaneHandler.$inject=["modeling","spaceTool"],AddLaneHandler.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,i=e.shape,a=e.location,o=getLanesRoot(i),c=o===i,s=c?i:i.parent,l=getChildLanes(s);l.length||n.createShape({type:"bpmn:Lane"},{x:i.x+Ne,y:i.y,width:i.width-Ne,height:i.height},s);var p=[];Object(Ge["a"])(o,(function(e){return p.push(e),e.label&&p.push(e.label),e===i?[]:Object(r["filter"])(e.children,(function(e){return e!==i}))}));var d="top"===a?-120:120,u="top"===a?i.y:i.y+i.height,m=u+("top"===a?10:-10),h="top"===a?"n":"s",b=t.calculateAdjustments(p,"y",d,m);t.makeSpace(b.movingShapes,b.resizingShapes,{x:0,y:d},h,m),e.newLane=n.createShape({type:"bpmn:Lane"},{x:i.x+(c?Ne:0),y:u-("top"===a?120:0),width:i.width-(c?Ne:0),height:120},s)},SplitLaneHandler.$inject=["modeling","translate"],SplitLaneHandler.prototype.preExecute=function(e){var t=this._modeling,n=this._translate,i=e.shape,a=e.count,o=getChildLanes(i),r=o.length;if(r>a)throw new Error(n("more than {count} child lanes",{count:a}));var c,s,l,p,d,u=Math.round(i.height/a);for(d=0;d<a;d++)c=i.y+d*u,s=d===a-1?i.height-u*d:u,l={x:i.x+Ne,y:c,width:i.width-Ne,height:s},d<r?t.resizeShape(o[d],l):(p={type:"bpmn:Lane"},t.createShape(p,l,i))},ResizeLaneHandler.$inject=["modeling","spaceTool"],ResizeLaneHandler.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,i=e.balanced;!1!==i?this.resizeBalanced(t,n):this.resizeSpace(t,n)},ResizeLaneHandler.prototype.resizeBalanced=function(e,t){var n=this._modeling,i=computeLanesResize(e,t);n.resizeShape(e,t),i.forEach((function(e){n.resizeShape(e.shape,e.newBounds)}))},ResizeLaneHandler.prototype.resizeSpace=function(e,t){var n,i,a,o,r,c=this._spaceTool,s=Object(W["b"])(e),l=Object(W["b"])(t),p=Object(Le["f"])(l,s),d=getLanesRoot(e),u=[],m=[];Object(Ge["a"])(d,(function(e){return u.push(e),(Object(S["is"])(e,"bpmn:Lane")||Object(S["is"])(e,"bpmn:Participant"))&&m.push(e),e.children})),(p.bottom||p.top)&&(n=p.bottom||p.top,i=e.y+(p.bottom?e.height:0)+(p.bottom?-10:10),a=p.bottom?"s":"n",o=p.top>0||p.bottom<0?-n:n,r=c.calculateAdjustments(u,"y",o,i),c.makeSpace(r.movingShapes,r.resizingShapes,{x:0,y:n},a)),(p.left||p.right)&&(n=p.right||p.left,i=e.x+(p.right?e.width:0)+(p.right?-10:100),a=p.right?"e":"w",o=p.left>0||p.right<0?-n:n,r=c.calculateAdjustments(m,"x",o,i),c.makeSpace(r.movingShapes,r.resizingShapes,{x:n,y:0},a))};var Sn="flowNodeRef",Bn="lanes";function UpdateFlowNodeRefsHandler(e){this._elementRegistry=e}function IdClaimHandler(e){this._moddle=e}UpdateFlowNodeRefsHandler.$inject=["elementRegistry"],UpdateFlowNodeRefsHandler.prototype.computeUpdates=function(e,t){var n=[],i=[],a={},o=[];function isInLaneShape(e,t){var n=Object(W["b"])(t),i={x:e.x+e.width/2,y:e.y+e.height/2};return i.x>n.left&&i.x<n.right&&i.y>n.top&&i.y<n.bottom}function addFlowNodeShape(e){-1===n.indexOf(e)&&(o.push(e),n.push(e))}function getAllLaneShapes(e){var t=getLanesRoot(e);return a[t.id]||(a[t.id]=collectLanes(t)),a[t.id]}function getNewLanes(e){if(!e.parent)return[];var t=getAllLaneShapes(e);return t.filter((function(t){return isInLaneShape(e,t)})).map((function(e){return e.businessObject}))}return t.forEach((function(e){var t=getLanesRoot(e);if(t&&-1===n.indexOf(t)){var i=t.children.filter((function(e){return Object(S["is"])(e,"bpmn:FlowNode")}));i.forEach(addFlowNodeShape),n.push(t)}})),e.forEach(addFlowNodeShape),o.forEach((function(e){var t=e.businessObject,n=t.get(Bn),a=n.slice(),o=getNewLanes(e);i.push({flowNode:t,remove:a,add:o})})),t.forEach((function(e){var t=e.businessObject;e.parent||t.get(Sn).forEach((function(e){i.push({flowNode:e,remove:[t],add:[]})}))})),i},UpdateFlowNodeRefsHandler.prototype.execute=function(e){var t=e.updates;t||(t=e.updates=this.computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach((function(e){var t=e.flowNode,n=t.get(Bn);e.remove.forEach((function(e){Object(lt["remove"])(n,e),Object(lt["remove"])(e.get(Sn),t)})),e.add.forEach((function(e){Object(lt["add"])(n,e),Object(lt["add"])(e.get(Sn),t)}))}))},UpdateFlowNodeRefsHandler.prototype.revert=function(e){var t=e.updates;t.forEach((function(e){var t=e.flowNode,n=t.get(Bn);e.add.forEach((function(e){Object(lt["remove"])(n,e),Object(lt["remove"])(e.get(Sn),t)})),e.remove.forEach((function(e){Object(lt["add"])(n,e),Object(lt["add"])(e.get(Sn),t)}))}))},IdClaimHandler.$inject=["moddle"],IdClaimHandler.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element,a=e.claiming;a?t.claim(n,i):t.unclaim(n)},IdClaimHandler.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element,a=e.claiming;a?t.unclaim(n):t.claim(n,i)};var Pn={fill:void 0,stroke:void 0};function SetColorHandler(e){this._commandStack=e}SetColorHandler.$inject=["commandStack"],SetColorHandler.prototype.postExecute=function(e){var t=e.elements,n=e.colors||Pn,i=this,a={};"fill"in n&&Object(r["assign"])(a,{fill:n.fill}),"stroke"in n&&Object(r["assign"])(a,{stroke:n.stroke}),Object(r["forEach"])(t,(function(e){i._commandStack.execute("element.updateProperties",{element:e,properties:{di:a}})}))};var _n={width:0,height:0};function UpdateLabelHandler(e,t){function setText(e,t){var n=e.label||e,i=e.labelTarget||e;return setLabel(n,t,i!==n),[n,i]}function preExecute(t){var n=t.element,i=n.businessObject,a=t.newLabel;if(!isLabel(n)&&isLabelExternal(n)&&!hasExternalLabel(n)&&!UpdateLabelHandler_isEmptyText(a)){var o=7,r=getExternalLabelMid(n);r={x:r.x,y:r.y+o},e.createLabel(n,r,{id:i.id+"_label",businessObject:i})}}function execute(e){return e.oldLabel=getLabel(e.element),setText(e.element,e.newLabel)}function revert(e){return setText(e.element,e.oldLabel)}function postExecute(n){var i=n.element,a=i.label||i,o=n.newLabel,r=n.newBounds,c=n.hints||{};if(isLabel(a)&&UpdateLabelHandler_isEmptyText(o))!1!==c.removeShape&&e.removeShape(a,{unsetLabel:!1});else if(isLabelExternal(i)||Object(S["is"])(i,"bpmn:TextAnnotation")){var s=getLabel(a);"undefined"===typeof r&&(r=t.getExternalLabelBounds(a,s)),r&&e.resizeShape(a,r,_n)}}this.preExecute=preExecute,this.execute=execute,this.revert=revert,this.postExecute=postExecute}function UpdateLabelHandler_isEmptyText(e){return!e||!e.trim()}function Modeling_Modeling(e,t,n,i){yn["a"].call(this,e,t,n),this._bpmnRules=i}UpdateLabelHandler.$inject=["modeling","textRenderer"],a()(Modeling_Modeling,yn["a"]),Modeling_Modeling.$inject=["eventBus","elementFactory","commandStack","bpmnRules"],Modeling_Modeling.prototype.getHandlers=function(){var e=yn["a"].prototype.getHandlers.call(this);return e["element.updateProperties"]=UpdatePropertiesHandler,e["canvas.updateRoot"]=UpdateCanvasRootHandler,e["lane.add"]=AddLaneHandler,e["lane.resize"]=ResizeLaneHandler,e["lane.split"]=SplitLaneHandler,e["lane.updateRefs"]=UpdateFlowNodeRefsHandler,e["id.updateClaim"]=IdClaimHandler,e["element.setColor"]=SetColorHandler,e["element.updateLabel"]=UpdateLabelHandler,e},Modeling_Modeling.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})},Modeling_Modeling.prototype.connect=function(e,t,n,i){var a=this._bpmnRules;if(n||(n=a.canConnect(e,t)),n)return this.createConnection(e,t,n,e.parent,i)},Modeling_Modeling.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})},Modeling_Modeling.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})},Modeling_Modeling.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane},Modeling_Modeling.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})},Modeling_Modeling.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e},Modeling_Modeling.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})},Modeling_Modeling.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};this._commandStack.execute("canvas.updateRoot",t)},Modeling_Modeling.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})},Modeling_Modeling.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})},Modeling_Modeling.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};var Cn=n("4cea"),Dn=n("d864"),Rn=-10,Tn=40,kn={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},An={top:"t",right:"r",bottom:"b",left:"l"};function BpmnLayouter(){}function getAttachOrientation(e){var t=e.host;return Object(W["f"])(Object(W["e"])(e),t,Rn)}function getMessageFlowManhattanOptions(e,t){return{preferredLayouts:["straight","v:v"],preserveDocking:getMessageFlowPreserveDocking(e,t)}}function getMessageFlowPreserveDocking(e,t){return Object(S["is"])(t,"bpmn:Participant")?"source":Object(S["is"])(e,"bpmn:Participant")?"target":BpmnLayouter_isExpandedSubProcess(t)?"source":BpmnLayouter_isExpandedSubProcess(e)||Object(S["is"])(t,"bpmn:Event")?"target":Object(S["is"])(e,"bpmn:Event")?"source":null}function getConnectionDocking(e,t){return e?e.original||e:Object(W["e"])(t)}function isCompensationAssociation(e,t){return Object(S["is"])(t,"bpmn:Activity")&&Object(S["is"])(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function BpmnLayouter_isExpandedSubProcess(e){return Object(S["is"])(e,"bpmn:SubProcess")&&Object(w["isExpanded"])(e)}function BpmnLayouter_isSame(e,t){return e===t}function isAnyOrientation(e,t){return-1!==t.indexOf(e)}function getHorizontalOrientation(e){var t=/right|left/.exec(e);return t&&t[0]}function getVerticalOrientation(e){var t=/top|bottom/.exec(e);return t&&t[0]}function isOppositeOrientation(e,t){return kn[e]===t}function isOppositeHorizontalOrientation(e,t){var n=getHorizontalOrientation(e),i=kn[n];return-1!==t.indexOf(i)}function isOppositeVerticalOrientation(e,t){var n=getVerticalOrientation(e),i=kn[n];return-1!==t.indexOf(i)}function isHorizontalOrientation(e){return"right"===e||"left"===e}function getLoopPreferredLayout(e,t){var n=t.waypoints,i=n&&n.length&&Object(W["f"])(n[0],e);return"top"===i?["t:r"]:"right"===i?["r:b"]:"left"===i?["l:t"]:["b:l"]}function getBoundaryEventPreferredLayouts(e,t,n){var i,a,o=Object(W["e"])(e),r=Object(W["e"])(t),c=getAttachOrientation(e),s=BpmnLayouter_isSame(e.host,t),l=isAnyOrientation(c,["top","right","bottom","left"]),p=Object(W["f"])(r,o,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return s?getBoundaryEventLoopLayout(c,l,e,t,n):(i=getBoundaryEventSourceLayout(c,p,l),a=getBoundaryEventTargetLayout(c,p,l),[i+":"+a])}function getBoundaryEventLoopLayout(e,t,n,i,a){var o,r=t?e:getVerticalOrientation(e),c=An[r];return o=t?isHorizontalOrientation(e)?shouldConnectToSameSide("y",n,i,a)?"h":"b":shouldConnectToSameSide("x",n,i,a)?"v":"l":"v",[c+":"+o]}function shouldConnectToSameSide(e,t,n,i){var a=Tn;return!(areCloseOnAxis(e,i,n,a)||areCloseOnAxis(e,i,{x:n.x+n.width,y:n.y+n.height},a)||areCloseOnAxis(e,i,Object(W["e"])(t),a))}function areCloseOnAxis(e,t,n,i){return Math.abs(t[e]-n[e])<i}function getBoundaryEventSourceLayout(e,t,n){return n?An[e]:BpmnLayouter_isSame(getVerticalOrientation(e),getVerticalOrientation(t))||isOppositeOrientation(getHorizontalOrientation(e),getHorizontalOrientation(t))?An[getVerticalOrientation(e)]:An[getHorizontalOrientation(e)]}function getBoundaryEventTargetLayout(e,t,n){return n?isHorizontalOrientation(e)?isOppositeHorizontalOrientation(e,t)||BpmnLayouter_isSame(e,t)?"h":"v":isOppositeVerticalOrientation(e,t)||BpmnLayouter_isSame(e,t)?"v":"h":isHorizontalOrientation(t)||BpmnLayouter_isSame(getVerticalOrientation(e),getVerticalOrientation(t))&&getHorizontalOrientation(t)?"h":"v"}a()(BpmnLayouter,Cn["a"]),BpmnLayouter.prototype.layoutConnection=function(e,t){t||(t={});var n,i,a=t.source||e.source,o=t.target||e.target,c=t.waypoints||e.waypoints,s=t.connectionStart,l=t.connectionEnd;return s||(s=getConnectionDocking(c&&c[0],a)),l||(l=getConnectionDocking(c&&c[c.length-1],o)),(Object(S["is"])(e,"bpmn:Association")||Object(S["is"])(e,"bpmn:DataAssociation"))&&c&&!isCompensationAssociation(a,o)?[].concat([s],c.slice(1,-1),[l]):(Object(S["is"])(e,"bpmn:MessageFlow")?n=getMessageFlowManhattanOptions(a,o):(Object(S["is"])(e,"bpmn:SequenceFlow")||isCompensationAssociation(a,o))&&(n=a===o?{preferredLayouts:getLoopPreferredLayout(a,e)}:Object(S["is"])(a,"bpmn:BoundaryEvent")?{preferredLayouts:getBoundaryEventPreferredLayouts(a,o,l)}:Object(S["is"])(a,"bpmn:Gateway")?{preferredLayouts:["v:h"]}:Object(S["is"])(o,"bpmn:Gateway")?{preferredLayouts:["h:v"]}:{preferredLayouts:["h:h"]}),n&&(n=Object(r["assign"])(n,t),i=Object(Dn["b"])(Object(Dn["a"])(a,o,s,l,c,n))),i||[s,l])};var Ln=n("622c"),Mn={__init__:["modeling","bpmnUpdater"],__depends__:[an,cn,ln,dn,Oe,un["a"],mn["a"],hn["a"],bn["a"],U["a"],ct["a"],gn["a"]],bpmnFactory:["type",BpmnFactory],bpmnUpdater:["type",BpmnUpdater],elementFactory:["type",ElementFactory_ElementFactory],modeling:["type",Modeling_Modeling],layouter:["type",BpmnLayouter],connectionDocking:["type",Ln["a"]]},Fn=n("3c9c"),Nn=n("4bee"),In=n("61f7"),Hn=n("c4ba"),zn=n("665f");function PaletteProvider(e,t,n,i,a,o,r,c){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=a,this._handTool=o,this._globalConnect=r,this._translate=c,e.registerProvider(this)}PaletteProvider.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],PaletteProvider.prototype.getPaletteEntries=function(e){var t={},n=this._create,i=this._elementFactory,a=this._spaceTool,o=this._lassoTool,c=this._handTool,s=this._globalConnect,l=this._translate;function createAction(e,t,a,o,c){function createListener(t){var a=i.createShape(Object(r["assign"])({type:e},c));c&&(a.businessObject.di.isExpanded=c.isExpanded),n.start(t,a)}var s=e.replace(/^bpmn:/,"");return{group:t,className:a,title:o||l("Create {type}",{type:s}),action:{dragstart:createListener,click:createListener}}}function createSubprocess(e){var t=i.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),a=i.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:t});n.start(e,[t,a],{hints:{autoSelect:[a]}})}function createParticipant(e){n.start(e,i.createParticipantShape())}return Object(r["assign"])(t,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:l("Activate the hand tool"),action:{click:function(e){c.activateHand(e)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:l("Activate the lasso tool"),action:{click:function(e){o.activateSelection(e)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:l("Activate the create/remove space tool"),action:{click:function(e){a.activateSelection(e)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:l("Activate the global connect tool"),action:{click:function(e){s.toggle(e)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":createAction("bpmn:StartEvent","event","bpmn-icon-start-event-none",l("Create StartEvent")),"create.intermediate-event":createAction("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",l("Create Intermediate/Boundary Event")),"create.end-event":createAction("bpmn:EndEvent","event","bpmn-icon-end-event-none",l("Create EndEvent")),"create.exclusive-gateway":createAction("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",l("Create Gateway")),"create.task":createAction("bpmn:Task","activity","bpmn-icon-task",l("Create Task")),"create.data-object":createAction("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",l("Create DataObjectReference")),"create.data-store":createAction("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",l("Create DataStoreReference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:l("Create expanded SubProcess"),action:{dragstart:createSubprocess,click:createSubprocess}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:l("Create Pool/Participant"),action:{dragstart:createParticipant,click:createParticipant}},"create.group":createAction("bpmn:Group","artifact","bpmn-icon-group",l("Create Group"))}),t};var $n={__depends__:[Nn["a"],me["a"],gn["a"],In["a"],Hn["a"],zn["a"],H["default"]],__init__:["paletteProvider"],paletteProvider:["type",PaletteProvider]},Wn=n("71f4"),Vn=n("e7a5"),Gn=n.n(Vn),Un=250;function BpmnReplacePreview(e,t,n,i,a){function replaceVisual(e){var o=e.canExecute.replacements;Object(r["forEach"])(o,(function(o){var l=o.oldElementId,p={type:o.newElementType};if(!e.visualReplacements[l]){var d=t.get(l);Object(r["assign"])(p,{x:d.x,y:d.y});var u=n.createShape(p);i.addShape(u,d.parent);var m=Object(c["query"])('[data-element-id="'+Gn()(d.id)+'"]',e.dragGroup);m&&Object(s["b"])(m,{display:"none"});var h=a.addDragger(u,e.dragGroup);e.visualReplacements[l]=h,i.removeShape(u)}}))}function restoreVisual(e){var t=e.visualReplacements;Object(r["forEach"])(t,(function(n,i){var a=Object(c["query"])('[data-element-id="'+Gn()(i)+'"]',e.dragGroup);a&&Object(s["b"])(a,{display:"inline"}),n.remove(),t[i]&&delete t[i]}))}Ye["a"].call(this,e),e.on("shape.move.move",Un,(function(e){var t=e.context,n=t.canExecute;t.visualReplacements||(t.visualReplacements={}),n&&n.replacements?replaceVisual(t):restoreVisual(t)}))}BpmnReplacePreview.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"],a()(BpmnReplacePreview,Ye["a"]);var qn={__depends__:[Wn["a"]],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",BpmnReplacePreview]},Kn=n("9f71"),Yn=n("1502"),Xn=1250,Jn=40,Zn=20,Qn=10,ei=20,ti=["x","y"],ni=Math.abs;function BpmnConnectSnapping(e){e.on(["connect.hover","connect.move","connect.end"],Xn,(function(e){var t=e.context,n=t.canExecute,i=t.start,a=t.hover,o=t.source,r=t.target;e.originalEvent&&Object(Yn["b"])(e.originalEvent)||(t.initialConnectionStart||(t.initialConnectionStart=t.connectionStart),n&&a&&snapToShape(e,a,getTargetBoundsPadding(a)),a&&isAnyType(n,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(t.connectionStart=Object(Kn["d"])(i),Object(Q["isAny"])(a,["bpmn:Event","bpmn:Gateway"])&&snapToPosition(e,Object(Kn["d"])(a)),Object(Q["isAny"])(a,["bpmn:Task","bpmn:SubProcess"])&&snapToTargetMid(e,a),Object(S["is"])(o,"bpmn:BoundaryEvent")&&r===o.host&&snapBoundaryEventLoop(e)):BpmnConnectSnapping_isType(n,"bpmn:MessageFlow")?(Object(S["is"])(i,"bpmn:Event")&&(t.connectionStart=Object(Kn["d"])(i)),Object(S["is"])(a,"bpmn:Event")&&snapToPosition(e,Object(Kn["d"])(a))):t.connectionStart=t.initialConnectionStart)}))}function snapToShape(e,t,n){ti.forEach((function(i){var a=getDimensionForAxis(i,t);e[i]<t[i]+n?Object(Kn["e"])(e,i,t[i]+n):e[i]>t[i]+a-n&&Object(Kn["e"])(e,i,t[i]+a-n)}))}function snapToTargetMid(e,t){var n=Object(Kn["d"])(t);ti.forEach((function(i){isMid(e,t,i)&&Object(Kn["e"])(e,i,n[i])}))}function snapBoundaryEventLoop(e){var t=e.context,n=t.source,i=t.target;if(!isReverse(t)){var a=Object(Kn["d"])(n),o=Object(W["f"])(a,i,-10),r=[];/top|bottom/.test(o)&&r.push("x"),/left|right/.test(o)&&r.push("y"),r.forEach((function(t){var n,i=e[t];ni(i-a[t])<Jn&&(n=i>a[t]?a[t]+Jn:a[t]-Jn,Object(Kn["e"])(e,t,n))}))}}function snapToPosition(e,t){Object(Kn["e"])(e,"x",t.x),Object(Kn["e"])(e,"y",t.y)}function BpmnConnectSnapping_isType(e,t){return e&&e.type===t}function isAnyType(e,t){return Object(r["some"])(t,(function(t){return BpmnConnectSnapping_isType(e,t)}))}function getDimensionForAxis(e,t){return"x"===e?t.width:t.height}function getTargetBoundsPadding(e){return Object(S["is"])(e,"bpmn:Task")?Qn:Zn}function isMid(e,t,n){return e[n]>t[n]+ei&&e[n]<t[n]+getDimensionForAxis(n,t)-ei}function isReverse(e){var t=e.hover,n=e.source;return t&&n&&t===n}BpmnConnectSnapping.$inject=["eventBus"];var ii=n("fe4b"),ai=1500;function BpmnCreateMoveSnapping(e,t){t.invoke(ii["a"],this),e.on(["create.move","create.end"],ai,setSnappedIfConstrained),e.on(["create.move","create.end","shape.move.move","shape.move.end"],ai,(function(e){var t=e.context,n=t.canExecute,i=t.target,a=n&&("attach"===n||n.attach);a&&!Object(Kn["c"])(e)&&snapBoundaryEvent(e,i)}))}function snapBoundaryEvent(e,t){var n,i=Object(W["b"])(t),a=getBoundaryAttachment(e,t),o=e.context,r=o.shape;n=r.parent?{x:0,y:0}:Object(W["e"])(r),/top/.test(a)?Object(Kn["e"])(e,"y",i.top-n.y):/bottom/.test(a)&&Object(Kn["e"])(e,"y",i.bottom-n.y),/left/.test(a)?Object(Kn["e"])(e,"x",i.left-n.x):/right/.test(a)&&Object(Kn["e"])(e,"x",i.right-n.x)}function areAll(e,t){return e.every((function(e){return Object(S["is"])(e,t)}))}function isContainer(e){return!(!Object(S["is"])(e,"bpmn:SubProcess")||!Object(w["isExpanded"])(e))||Object(S["is"])(e,"bpmn:Participant")}function setSnappedIfConstrained(e){var t=e.context,n=t.createConstraints;if(n){var i=n.top,a=n.right,o=n.bottom,r=n.left;(r&&r>=e.x||a&&a<=e.x)&&Object(Kn["e"])(e,"x",e.x),(i&&i>=e.y||o&&o<=e.y)&&Object(Kn["e"])(e,"y",e.y)}}function BpmnCreateMoveSnapping_includes(e,t){return-1!==e.indexOf(t)}function getDockingSnapOrigin(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}a()(BpmnCreateMoveSnapping,ii["a"]),BpmnCreateMoveSnapping.$inject=["eventBus","injector"],BpmnCreateMoveSnapping.prototype.initSnap=function(e){var t=ii["a"].prototype.initSnap.call(this,e),n=e.shape,i=!!this._elementRegistry.get(n.id);return Object(r["forEach"])(n.outgoing,(function(n){var a=n.waypoints[0];a=a.original||a,t.setSnapOrigin(n.id+"-docking",getDockingSnapOrigin(a,i,e))})),Object(r["forEach"])(n.incoming,(function(n){var a=n.waypoints[n.waypoints.length-1];a=a.original||a,t.setSnapOrigin(n.id+"-docking",getDockingSnapOrigin(a,i,e))})),Object(S["is"])(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t},BpmnCreateMoveSnapping.prototype.addSnapTargetPoints=function(e,t,n){ii["a"].prototype.addSnapTargetPoints.call(this,e,t,n);var i=this.getSnapTargets(t,n);Object(r["forEach"])(i,(function(n){(isContainer(n)||areAll([t,n],"bpmn:TextAnnotation"))&&(e.add("top-left",Object(Kn["g"])(n)),e.add("bottom-right",Object(Kn["a"])(n)))}));var a=this._elementRegistry;return Object(r["forEach"])(t.incoming,(function(n){if(a.get(t.id)){BpmnCreateMoveSnapping_includes(i,n.source)||e.add("mid",Object(W["e"])(n.source));var o=n.waypoints[0];e.add(n.id+"-docking",o.original||o)}})),Object(r["forEach"])(t.outgoing,(function(n){if(a.get(t.id)){BpmnCreateMoveSnapping_includes(i,n.target)||e.add("mid",Object(W["e"])(n.target));var o=n.waypoints[n.waypoints.length-1];e.add(n.id+"-docking",o.original||o)}})),Object(S["is"])(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e},BpmnCreateMoveSnapping.prototype.getSnapTargets=function(e,t){return ii["a"].prototype.getSnapTargets.call(this,e,t).filter((function(e){return!Object(S["is"])(e,"bpmn:Lane")}))};var oi=n("87d2"),ri={__depends__:[oi["a"]],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",BpmnConnectSnapping],createMoveSnapping:["type",BpmnCreateMoveSnapping]},ci=n("34fe");function BpmnSearchProvider(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}function hasMatched(e){var t=Object(r["filter"])(e,(function(e){return!!e.matched}));return t.length>0}function matchAndSplit(e,t){var n=[],i=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var a=e.indexOf(t);return a>-1?(0!==a&&n.push({normal:i.substr(0,a)}),n.push({matched:i.substr(a,t.length)}),t.length+a<e.length&&n.push({normal:i.substr(t.length+a,e.length)})):n.push({normal:i}),n}BpmnSearchProvider.$inject=["elementRegistry","searchPad","canvas"],BpmnSearchProvider.prototype.find=function(e){var t=this._canvas.getRootElement(),n=this._elementRegistry.filter((function(e){return!e.labelTarget}));return n=Object(r["filter"])(n,(function(e){return e!==t})),n=Object(r["map"])(n,(function(t){return{primaryTokens:matchAndSplit(getLabel(t),e),secondaryTokens:matchAndSplit(t.id,e),element:t}})),n=Object(r["filter"])(n,(function(e){return hasMatched(e.primaryTokens)||hasMatched(e.secondaryTokens)})),n=Object(r["sortBy"])(n,(function(e){return getLabel(e.element)+e.element.id})),n};var si={__depends__:[ci["a"]],__init__:["bpmnSearch"],bpmnSearch:["type",BpmnSearchProvider]},li='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function Modeler(e){BaseModeler.call(this,e)}a()(Modeler,BaseModeler),Modeler.Viewer=Viewer,Modeler.NavigatedViewer=NavigatedViewer,Modeler.prototype.createDiagram=function(e){return this.importXML(li,e)},Modeler.prototype._interactionModules=[K["a"],Y["a"],J["a"],X["a"]],Modeler.prototype._modelingModules=[Z["a"],ie,ce["a"],re,se["a"],le["a"],pe["a"],He,ve,me["a"],$e,Ue,Qe,nt,ot,rt["a"],ut,Mn,Fn["a"],$n,qn,st["a"],ri,si],Modeler.prototype._modules=[].concat(Viewer.prototype._modules,Modeler.prototype._interactionModules,Modeler.prototype._modelingModules)},"7a6b":function(e,t,n){"use strict";function is(e,t){var n=getBusinessObject(e);return n&&"function"===typeof n.$instanceOf&&n.$instanceOf(t)}function getBusinessObject(e){return e&&e.businessObject||e}n.r(t),n.d(t,"is",(function(){return is})),n.d(t,"getBusinessObject",(function(){return getBusinessObject}))},dbc8:function(e,t,n){"use strict";n.r(t),n.d(t,"isExpanded",(function(){return isExpanded})),n.d(t,"isInterrupting",(function(){return isInterrupting})),n.d(t,"isEventSubProcess",(function(){return isEventSubProcess})),n.d(t,"hasEventDefinition",(function(){return hasEventDefinition})),n.d(t,"hasErrorEventDefinition",(function(){return hasErrorEventDefinition})),n.d(t,"hasEscalationEventDefinition",(function(){return hasEscalationEventDefinition})),n.d(t,"hasCompensateEventDefinition",(function(){return hasCompensateEventDefinition}));var i=n("7a6b"),a=n("87f2");function isExpanded(e){return!Object(i["is"])(e,"bpmn:CallActivity")&&(Object(i["is"])(e,"bpmn:SubProcess")?!!Object(i["getBusinessObject"])(e).di.isExpanded:!Object(i["is"])(e,"bpmn:Participant")||!!Object(i["getBusinessObject"])(e).processRef)}function isInterrupting(e){return e&&!1!==Object(i["getBusinessObject"])(e).isInterrupting}function isEventSubProcess(e){return e&&!!Object(i["getBusinessObject"])(e).triggeredByEvent}function hasEventDefinition(e,t){var n=Object(i["getBusinessObject"])(e),o=!1;return n.eventDefinitions&&Object(a["forEach"])(n.eventDefinitions,(function(e){Object(i["is"])(e,t)&&(o=!0)})),o}function hasErrorEventDefinition(e){return hasEventDefinition(e,"bpmn:ErrorEventDefinition")}function hasEscalationEventDefinition(e){return hasEventDefinition(e,"bpmn:EscalationEventDefinition")}function hasCompensateEventDefinition(e){return hasEventDefinition(e,"bpmn:CompensateEventDefinition")}}}]);